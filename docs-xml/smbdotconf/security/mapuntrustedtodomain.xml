<samba:parameter name="map untrusted to domain"
                 context="G"
                 type="enum"
                 enumlist="enum_bool_auto"
                 deprecated="1"
                 xmlns:samba="http://www.samba.org/samba/DTD/samba-doc">
<description>
<!-- 原文 samba-4.7.0
    <para>
    By default, and with <smbconfoption name="map untrusted to domain">auto</smbconfoption>
    smbd will defer the decision whether the domain name provided by the
    client is a valid domain name to the Domain Controller (DC) of
    the domain it is a member of, if it is not a DC.  If the DC indicates
    that the domain portion is unknown, then a local authentication is performed.
    Standalone servers always ignore the domain.  This is basically the same as
    the behavior implemented in Windows.
    </para>
-->
    <para>
    既定値の <smbconfoption name="map untrusted to domain">auto</smbconfoption>
    にしている場合は、クライアントから提供されたドメイン名が適正なドメイン名である
    のか、つまりドメインコントローラーではないサーバーであった場合に、ドメイン
    メンバーのドメインコントローラーに対して適正なドメイン名であるのか、これに
    対する決定を smbd は保留する。そしてドメインコントローラーによって、ドメイン
    名部分が不明であることが示された場合、ローカル認証が行われる。スタンドアロン
    サーバーであれば、ドメイン名部分は常に無視される。このような動作は、基本的に
    Windows に実装されているものと同様である。
    </para>

<!-- 原文 samba-4.7.0
    <para>
    With <smbconfoption name="map untrusted to domain">no</smbconfoption>,
    if a client connects to smbd using an untrusted domain name, such as
    BOGUS\user, smbd replaces the BOGUS domain with it's SAM name
    (forcing local authentication) before
    attempting to authenticate that user.  In the case where smbd is acting as
    a NT4 PDC/BDC this will be DOMAIN\user.  In the case where smbd is acting as a
    domain member server or a standalone server this will be WORKSTATION\user.
    While this appears similar to the behaviour of
    <smbconfoption name="map untrusted to domain">auto</smbconfoption>,
    the difference is that smbd will use a cached (maybe incomplete) list
    of trusted domains in order to classify a domain as "untrusted"
    before contacting any DC first.
    </para>
-->
    <para>
    <smbconfoption name="map untrusted to domain">no</smbconfoption> として
    いて、クライアントが smbd に接続する際に BOGUS\user のような信頼されない
    ドメイン名を使っている場合、smbd は BOGUS ドメインを自身の SAM 名に
    （強制的にローカル認証として）置き換えてからそのユーザーを認証する。
    smbd が NT4 PDC/BDC として動作している場合、置き換えられた名前は
    DOMAIN\user となる。smbd がドメインのメンバーサーバーあるいはスタンド
    アロンサーバーとして動作している場合、置き換えられた名前は
    WORKSTATION\user となる。この動作は <smbconfoption name="map untrusted
    to domain">auto</smbconfoption> と同様に見えるかもしれないが、以下の
    ような違いがある。smbd はキャッシュされた（おそらく不完全な）信頼ドメイン
    のリストを参照し、DC に問い合わせをしなくてもドメインが信頼されていない
    ものとして識別しようとする。
    </para>

<!-- 原文 samba-4.7.0
    <para>
    With <smbconfoption name="map untrusted to domain">yes</smbconfoption>,
    smbd provides the legacy behavior matching that of versions of Samba pre 3.4:
    the BOGUS domain name would always be replaced by the
    primary domain before attempting to authenticate that user.
    This will be DOMAIN\user in all server roles except active directory domain controller.
    </para>
-->
    <para>
    <smbconfoption name="map untrusted to domain">yes</smbconfoption> で
    ある場合、smbd は Samba 3.4 バージョン以前に行われていた古い動作を行う。
    つまり BOGUS ドメイン名は必ずプライマリドメイン名により置き換えられ、
    その後にユーザー認証が行われる。Active Directory ドメインコントローラー
    でない場合は、サーバーのすべての機能において DOMAIN\user が用いられる。
    </para>

<!-- 原文 samba-4.7.0
    <para>
    <smbconfoption name="map untrusted to domain">no</smbconfoption>,
    was the default up to Samba 4.6.
    </para>
-->
    <para>
    <smbconfoption name="map untrusted to domain">no</smbconfoption> は
    Samba 4.6 までの既定値であった。
    </para>

<!-- 原文 samba-4.7.0
    <para>
    <smbconfoption name="map untrusted to domain">auto</smbconfoption> was added
    and become the default with Samba 4.7.0. As the option is marked as
    <constant>deprecated</constant> it will be removed in a future release, while the behavior of
    <smbconfoption name="map untrusted to domain">auto</smbconfoption> will be kept.
    </para>
-->
    <para>
    Samba 4.7.0 から <smbconfoption name="map untrusted to domain">auto
    </smbconfoption> が加えられ既定値となった。このオプションは
    <constant>deprecated</constant>（非推奨）となったため、将来、取り除かれる
    予定である。ただし <smbconfoption name="map untrusted to domain">auto
    </smbconfoption> の動作は維持される。
    </para>
</description>

<value type="default">auto</value>
</samba:parameter>
