<samba:parameter name="password server"
                 context="G"
				 type="list"
                 advanced="1" wizard="1" developer="1"
		 xmlns:samba="http://www.samba.org/samba/DTD/samba-doc">
<description>
    <para> このオプションで、別の SMB サーバーか、Active Directory ドメインコントローラーの
    指定を行い、<command moreinfo="none">security = [ads|domain|server]</command>を
    使うことで、Samba が行なうユーザー名、パスワードの認証のすべてを指定した別のサーバーに行なわせることが可能となる。</para>

    <para> このオプションでは、使用するパスワードサーバーの名前あるいは IP アドレスを設定する。
    また、ADS のレルムに対応するサーバーへの接続時に使用するポートの指定にもこのオプ
ョンが使用できるようになっており、そのための書式も追加されている。
    デフォルトの LDAP ポートである 389 以外のポートを指定する場合には、名前あるいは IP アドレスの後にコロンを付けて指定する（例: 192.168.1.100:389）。
    ポートを指定しなかった場合、 Samba は標準の LDAP ポートである tcp/389 を使用する。このポート番号は、Windows NT 4.0 ドメインや NetBIOS 接続に対応するパスワードサーバーには何の意味も持たないという点に注意。</para>

    <para> このパラメーターの値が名前の場合、名前解決は
    <smbconfoption name="name resolve order"/>
    パラメーターで設定された方法と順番に従って行なわれるため、
    このパラメーターで指定可能な任意の方式を任意の順番で組み合わせることができる。</para>

    <para> パスワードサーバーは、 &quot;LM1.2X002&quot;または&quot;LM NT 0.12&quot;
      プロトコルが利用可能であり、ユーザーレベルのセキュリティモードで構成されたマシン
      である必要がある。</para>

    <note><para>パスワードサーバーを利用するということは、
    Samba を実行している UNIX マシンのセキュリティはパスワードサーバーに依存するということである。
    <emphasis> 完全に信頼することができるサーバー以外をパスワードサーバーとして設定してはいけない</emphasis>。
    </para></note>

    <para> Samba サーバー自身をパスワードサーバーに設定しないこと。
    これはループを発生させ、Samba サーバーをフリーズさせてしまう!</para>

    <para> password server の値には、 Samba 変数も通常通り利用できるが、
   事実上有用なものは、Samba サーバーに接続してきたクライアントをパスワードサーバーとして設定することを意味する、
    <parameter moreinfo="none">%m</parameter> だけであろう。
    この設定はクライアントを信頼することになるため、
    hosts allow パラメーターにより接続を制限することが望ましい。</para>

    <para> <parameter moreinfo="none">security</parameter> パラメーターを
    <constant>domain</constant> もしくは <constant>ads</constant> に設定する場合、このオプションでは、
    ドメインのプライマリおよびバックアップドメインコントローラーを指定するか、
    「*」という文字を指定する必要がある。これは、
    Samba サーバーをドメインのメンバーとして機能させるとともに、
    ユーザーのログオン時に認証を行なうために、暗号化された認証済のRPCコールを利用するためである。
    <command moreinfo="none">security = domain</command> を用いる利点は、
    <parameter moreinfo="none">password server</parameter> 
    オプションで幾つかのサーバーを指定した場合に、 <command moreinfo="none">
    smbd</command> が、どれかのサーバーから応答があるまでリスト中のサーバーに対して順番に問い合わせを行なっていくという点にある。
    これは、通常問い合わせを行なうサーバーが停止してしまった時に効果を発揮する。</para>

    <para><parameter moreinfo="none">password server</parameter> オプションに文字 「*」 を指定すると、Samba は <constant>WORKGROUP&lt;1C&gt;</constant> への問い合わせを行い、名前解決機構から返却された IP アドレスリスト中の各サーバーにアクセスを行って認証を実施するため、プライマリあるいはバックアップドメインコントローラーの名前解決を自動的に実施する。</para>

    <para>「*」文字とサーバーのリストの両方を指定した場合、
    リストは問い合わせを行なうサーバーの優先順位として機能するが、
    それ以外の DC もリストには追加される。
    Samba は最も近い DC の位置を検出することによるリストの最適化は行なわない。
    </para>

    <para><parameter moreinfo="none">security</parameter> パラメーターが
    <constant>server</constant> の場合、
    <command moreinfo="none">security = domain</command>
    の場合にはなかった制限事項が幾つか発生する:</para>

    <itemizedlist>
	<listitem>
            <para> 複数のパスワードサーバーを <parameter moreinfo="none">
            password server</parameter> パラメーター中に設定できるが、
            一旦 <command moreinfo="none">smbd</command> が接続を行なったパスワードサーバーが停止してしまうと、
            その <command moreinfo="none">smbd</command>
            ではそれ以上のユーザー認証が一切行なえなくなる。
            これは <command moinfo="none">security = server</command>
            モードにおける SMB/CIFS プロトコルでの制限で、Samba 側では対処できない。</para>
	</listitem>
        <listitem>
            <para> Windows NT サーバーをパスワードサーバーとして使っている場合、
            ユーザーが Samba サーバーからログオンできるようにする必要がある。
            これは、<command moreinfo="none">security = server</command> モードの場合、
            ネットワーク経由のログオンは、ユーザーのワークステーションからではなく、
            Samba サーバーから行われたものとして扱われるためである。</para>
        </listitem>
    </itemizedlist>
</description>

<related>security</related>
<value type="default">*</value>
<value type="example">NT-PDC, NT-BDC1, NT-BDC2, *</value>
<value type="example">windc.mydomain.com:389 192.168.1.101 *</value>
</samba:parameter>
