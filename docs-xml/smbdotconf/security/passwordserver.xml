<samba:parameter name="password server"
                 context="G"
				 type="list"
                 advanced="1" wizard="1" developer="1"
		 xmlns:samba="http://www.samba.org/samba/DTD/samba-doc">
<description>
    <para> このオプションで、別の SMB サーバーか、Active Directory ドメインコントローラーの
    指定を行い、<command moreinfo="none">security = [ads|domain|server]</command>を
    使うことで、Samba が行なうユーザー名、パスワードの認証のすべてを指定した別のサーバーに行なわせることが可能となる。</para>

    <para> <parameter moreinfo="none">security</parameter> パラメーターを
    <constant>domain</constant> もしくは <constant>ads</constant> に設定する場合、
    このオプションは、ADドメイン中の他のすべてのホストが行うのとちょうど同じように、
    既定値 '*' が Samba に対して、最適のDCを動的に決定させるように示すため、
    これを<emphasis>使うべきではない</emphasis>。これは、ドメインに、
     smb.conf ファイルの変更なしに維持される事を可能にする。パスワードを検証するために、
     認証されたRPC上における暗号化による保護は、この既定値が安全であることを
     確実にする。</para>

     <para><emphasis>既定値の '*' を使うことを強く推奨する。</emphasis>しかしながら、
     使用している特定の環境において、特定のDCの一覧を指定しする理由がある場合、
     このオプション中のマシンのリストは、ドメインに対するドメインコントローラーの
     名前又は IP アドレスでなければならない。既定値の '*' か
     <parameter  moreinfo="none">password server</parameter> オプション中の、
     いくつかのホストのリストを使う場合、
     <command moreinfo="none">smbd </command> は、ある1つのものが反応するまで
     順番に試行する。これは、使用しているプライマリサーバーが停止している時に
     便利である。</para>

    <para><parameter moreinfo="none">password server</parameter> オプションに文字 「*」 を指定すると、Samba は <constant>WORKGROUP&lt;1C&gt;</constant> への問い合わせを行い、名前解決機構から返却された IP アドレスリスト中の各サーバーにアクセスを行って認証を実施するため、プライマリあるいはバックアップドメインコントローラーの名前解決を自動的に実施する。</para>

    <para>「*」文字とサーバーのリストの両方を指定した場合、
    リストは問い合わせを行なうサーバーの優先順位として機能するが、
    それ以外の DC もリストには追加される。
    Samba は最も近い DC の位置を検出することによるリストの最適化は行なわない。
    </para>

    <para>もしもパラメーターが名前だった場合、
    <smbconfoption name="name resolve order"/> パラメーターを使って名前を検索し、
    そのパラメーター中に記述された順番と手法で名前解決が行われる。</para>

    <para><parameter moreinfo="none">security</parameter> パラメーターが
    <constant>server</constant> の場合、以下の追加制限事項が適用される:</para>

    <itemizedlist>
	<listitem>
            <para> 複数のパスワードサーバーを <parameter moreinfo="none">
            password server</parameter> パラメーター中に設定できるが、
            一旦 <command moreinfo="none">smbd</command> が接続を行なったパスワードサーバーが停止してしまうと、
            その <command moreinfo="none">smbd</command>
            ではそれ以上のユーザー認証が一切行なえなくなる。
            これは <command moinfo="none">security = server</command>
            モードにおける SMB/CIFS プロトコルでの制限で、Samba 側では対処できない。</para>
	</listitem>
        <listitem>
            <para> ユーザーが Samba サーバーからログオンできるようにする必要がある。
            これは、<command moreinfo="none">security = server</command> モードの場合、
            ネットワーク経由のログオンは、ユーザーのワークステーションからではなく、
            Samba サーバーから行われたものとして扱われるためである。</para>
        </listitem>

        <listitem>
            <para>クライアントは NTLMv2 認証を選択してはいけない。</para>
	</listitem>

        <listitem>
          <para>パスワードサーバーは、&quot;LM1.2X002&quot; か &quot;NT LM 0.12&quot;
	  プロトコルが使えるようにしておかねばならず、かつ、ユーザーレベルの
	  セキュリティモードにしておかねばならない。</para>
        </listitem>

        <listitem>
          <para>パスワードサーバーの使用は、使用しているUNIXマシン(Sambaが
	  動作しているもの)が、使用する(代行している)パスワードサーバーと
	  同じ程度にセキュアであることを意味している。<emphasis>
	  完全に信頼していないパスワードサーバーを選択してはならない</emphasis>。
          </para>
       </listitem>

        <listitem>
          <para>パスワードサービスのために、決してSamba サーバーが自分自身を
	  指定してはならない。これは、ループになってしまい、Samba サーバー
	  を見つけられなくなる!</para>
        </listitem>

        <listitem>
          <para>パスワードサーバーの名前が標準の文字列置換が使えるが、
	  Samba サーバーが入力されたクライアントをパスワードサーバーとして使う
	  事を意味する、<parameter moreinfo="none">%m</parameter>の場合にのみが、
	  おそらく使える。もしも、これを使う場合、使用するクライアントを
	  より信頼するようにし、かつ、hosts allow を使って制限をする事がさらによい!
	  The name of the password server takes the standard
          substitutions, but probably the only useful one is <parameter moreinfo="none">%m
          </parameter>, which means the Samba server will use the incoming
          client as the password server. If you use this then you better
          trust your clients, and you had better restrict them with hosts allow!</para>
        </listitem>


    </itemizedlist>
</description>

<related>security</related>
<value type="default">*</value>
<value type="example">NT-PDC, NT-BDC1, NT-BDC2, *</value>
<value type="example">windc.mydomain.com:389 192.168.1.101 *</value>
</samba:parameter>
