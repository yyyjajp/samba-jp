<samba:parameter name="server schannel"
                 context="G"
		 type="enum"
		 enumlist="enum_bool_auto"
		 deprecated="1"
		 xmlns:samba="http://www.samba.org/samba/DTD/samba-doc">
<description>
<!-- Samba-4.13.0
    <para>
        This option is deprecated and will be removed in future,
        as it is a security problem if not set to "yes" (which will be
        the hardcoded behavior in future).
    </para>

    <para>
        Samba will complain in the log files at log level 0,
        about the security problem if the option is not set to "yes".
    </para>
    <para>
        See CVE-2020-1472(ZeroLogon) https://bugzilla.samba.org/show_bug.cgi?id=14497
    </para>

    <para>If you still have legacy domain members use the <smbconfoption name="server require schannel:COMPUTERACCOUNT"/> option.
    </para>

    <para>This option yields precedence to the <smbconfoption name="server require schannel:COMPUTERACCOUNT"/> option.</para>
-->
    <para>
       このオプションは非推奨で将来廃止される予定であり、
       (将来ハードコードされた動作となる) "yes" に設定しない場合、
       セキュリティ上の問題が存在する。
    </para>

    <para>
      オプションが "yes" に設定されていない場合、セキュリティ上の
      問題があることについて、Samba はログレベル 0 で、ログファイルに
      警告を記録する。
    </para>
    <para>
        CVE-2020-1472(ZeroLogon) https://bugzilla.samba.org/show_bug.cgi?id=14497 を参照のこと。
    </para>
    
    <para>旧来のドメンメンバを使用している場合は、
    <smbconfoption name="server require schannel:COMPUTERACCOUNT"/> オプションを使用する。
    </para>

    <para>このオプションは<smbconfoption name="server require schannel:COMPUTERACCOUNT"/>
    オプションを優先する。</para>
    
</description>

<value type="default">yes</value>
</samba:parameter>

<samba:parameter name="server require schannel:COMPUTERACCOUNT"
                 context="G"
                 type="string"
                 xmlns:samba="http://www.samba.org/samba/DTD/samba-doc">
<description>
<!-- Samba-4.13.0
    <para>If you still have legacy domain members, which required "server schannel = auto" before,
        it is possible to specify explicit expection per computer account
        by using 'server require schannel:COMPUTERACCOUNT = no' as option.
        Note that COMPUTERACCOUNT has to be the sAMAccountName value of
        the computer account (including the trailing '$' sign).
    </para>

    <para>
        Samba will complain in the log files at log level 0,
        about the security problem if the option is not set to "no",
        but the related computer is actually using the netlogon
        secure channel (schannel) feature.
    </para>

    <para>
        Samba will warn in the log files at log level 5,
        if a setting is still needed for the specified computer account.
    </para>

    <para>
        See CVE-2020-1472(ZeroLogon) https://bugzilla.samba.org/show_bug.cgi?id=14497
    </para>

    <para>This option takes precedence to the <smbconfoption name="server schannel"/> option.</para>
-->
    <para>以前に、"server schannel = auto" を必要とした、旧来のドメインメンバを使用している場合、
        'server require schannel:COMPUTERACCOUNT = no' をオプションとして使う事で、
	コンピュータアカウント毎に、明示的な期待値を指定することが出来ます。
	COMPUTERACCOUNT は、コンピュータアカウント(末尾に '$' 記号を含む)の
	sAMAccountName の値でなければならないことに注意すること。
    </para>

    <para>
	オプションが "no" に設定されていない場合に、セキュリティ上の
        問題があることについて、Samba はログレベル 0 で、ログファイルに
        警告を記録するが、関連するコンピュータは、実際には netlogon
	secure channel (schannel) 機能を使う。
    </para>

    <para>
	指定されたコンピュータアカウントで引き続き設定が必要な場合、
	Samba はログレベル 5 でログファイルに警告を記録する。
    </para>

    <para>
      CVE-2020-1472(ZeroLogon) https://bugzilla.samba.org/show_bug.cgi?id=14497 も参照のこと。
    </para>

    <para>このオプションは<smbconfoption name="server schannel"/> に優先する。</para>~
    <programlisting>
        server require schannel:LEGACYCOMPUTER1$ = no
        server require schannel:NASBOX$ = no
        server require schannel:LEGACYCOMPUTER2$ = no
    </programlisting>
</description>

</samba:parameter>
