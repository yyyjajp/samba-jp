'\" t
.\"     Title: idmap_ldap
.\"    Author: [FIXME: author] [see http://docbook.sf.net/el/author]
.\" Generator: DocBook XSL Stylesheets v1.75.2 <http://docbook.sf.net/>
.\"      Date: 11/11/2010
.\"    Manual: システム管理ツール
.\"    Source: Samba 3.5
.\"  Language: English
.\"
.TH "IDMAP_LDAP" "8" "11/11/2010" "Samba 3\&.5" "システム管理ツール"
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
idmap_ldap \- SambaのWinbind用idmap_ldapバックエンド
.SH "説明"
.PP
idmap_ldap プラグインは、 LDAP ディレクトリサービスにある SID/uid/gid のマッピングテーブルに対して、 Winbind から格納／ 呼び出しを行う手段を提供する。このモジュールは "idmap" と "idmap alloc" API の両方を実装している。
.SH "IDMAP オプション"
.PP
ldap_base_dn = DN
.RS 4
SID/uid/gid マッピングエントリの検索を行う際に使用する、 ディレクトリの base suffix を定義する。定義されていない場合、 idmap_ldap はデフォルトで smb\&.conf の "ldap idmap suffix" オプションの値を使用する。
.RE
.PP
ldap_user_dn = DN
.RS 4
認証の際に使用する user DN を定義する。 未定義の場合は匿名バインドが実行される。
.RE
.PP
ldap_url = ldap://server/
.RS 4
既存の SID/uid/gid マップのエントリを検索する際に使用する LDAP サーバーを指定する。未定義の場合、 ldap://localhost/ が使われる。
.RE
.PP
range = low \- high
.RS 4
バックエンドが権威を持つと規定されている、 uid と gid の利用可能な マッチング範囲を定義する。事実上同じバックエンドが SID/uid/gid マッピングのエントリを格納／呼び出しするため、通常その範囲は 割り当て範囲と同じになる。指定がない場合 Winbind はフェイル オーバーして、 smb\&.conf の "idmap uid" と "idmap gid" オプションを使用する。
.RE
.SH "IDMAP ALLOC オプション"
.PP
ldap_base_dn = DN
.RS 4
そのディレクトリの中で、新しい SID/uid/gid マッピングのエントリを 格納するべき base suffix を定義する。指定がない場合、 idmap_ldap は デフォルトとして smb\&.conf の "ldap idmap suffix" オプションを使用する。
.RE
.PP
ldap_user_dn = DN
.RS 4
認証の際に使用するuser DNを定義する。 未定義の場合は匿名バインドが実行される。
.RE
.PP
ldap_url = ldap://server/
.RS 4
modify/add/delete リクエストを送信する宛先としての LDAP サーバー を指定する。未定義の場合 ldap://localhost/ が使われる。
.RE
.PP
range = low \- high
.RS 4
winbindd からユーザとグループに対して割り当てができる uid と gid の利用可能範囲を定義する。指定がない場合 Winbind はフェイル オーバーして、 smb\&.conf の "idmap uid" と "idmap gid" オプションを使用する。
.RE
.SH "使用例"
.PP
以下の LDAP 設定の例は、SID/gid/uid マッピングを高速に検索するために localhost 上で動作しているスレーブサーバーのものであり、紹介(referral) の設定が正しくなされていることを暗に示している。 idmap 割当て用バックエンドは直接マスターを指しており、紹介（とそれに 続くマスターへの再接続）はスキップされる。これにより、スレーブは 割り当て要求の結果としてマスター側で書き込まれたものを返してくれる。
.sp
.if n \{\
.RS 4
.\}
.nf
	[global]
	    idmap domains = ALLDOMAINS
	    idmap config ALLDOMAINS:default      = yes
	    idmap config ALLDOMAINS:backend      = ldap
	    idmap config ALLDOMAINS:ldap_base_dn = ou=idmap,dc=example,dc=com
	    idmap config ALLDOMAINS:ldap_url     = ldap://localhost/
	    idmap config ALLDOMAINS:range        = 10000 \- 50000

	    idmap alloc backend = ldap
	    idmap alloc config:ldap_base_dn = ou=idmap,dc=example,dc=com
	    idmap alloc config:ldap_url     = ldap://master\&.example\&.com/
	    idmap alloc config:range        = 10000 \- 50000
	
.fi
.if n \{\
.RE
.\}
.SH "備考"
.PP
LDAP サーバーに対して認証を使用するには DN とパスワードを 指定する必要があるだろう。設定ファイル中に平文で指定された パスワードが晒されてしまうことを防ぐために、これらはセキュリティ ストアの中に格納される。特定の idmap ドメインにおいて、指定された DN に対する秘密のパスワードを格納するには "net idmap " コマンドを使用する。
.SH "著者"
.PP
オリジナルの Samba ソフトウェアとそれに関連するユーティリティーは、 Andrew Tridgell によって作られた。Samba は現在、Linux カーネル開発と 同様の方法で、Samba Team によりオープンソースプロジェクトとして 開発されている。
.SH "日本語訳"
.PP
このマニュアルページは Samba 3\&.2\&.4 \- 3\&.5\&.6 対応のものである。
.PP
このドキュメントの Samba 3\&.2\&.4 \- 3\&.5\&.6 対応の翻訳は
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
堀田 倫英(hotta@net\-newbie\&.com)
.sp
.RE
によって行なわれた。
