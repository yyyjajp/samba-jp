'\" t
.\"     Title: smbcontrol
.\"    Author: [FIXME: author] [see http://docbook.sf.net/el/author]
.\" Generator: DocBook XSL Stylesheets v1.75.2 <http://docbook.sf.net/>
.\"      Date: 01/25/2011
.\"    Manual: ユーザコマンド
.\"    Source: Samba 3.4
.\"  Language: English
.\"
.TH "SMBCONTROL" "1" "01/25/2011" "Samba 3\&.4" "ユーザコマンド"
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
smbcontrol \- smbd、nmbd または winbindd のプロセスにメッセージを送信する
.SH "SYNOPSIS"
.HP \w'\ 'u
smbcontrol [\-i] [\-s]
.HP \w'\ 'u
smbcontrol [destination] [message\-type] [parameter]
.SH "説明"
.PP
このツールは
\fBSamba\fR(7)システムの一部である。
.PP
smbcontrol
は動作中の
\fBsmbd\fR(8)、\fBnmbd\fR(8)
や
\fBwinbindd\fR(8)
デーモンにメッセージを送る、 とても小さなプログラムである。
.SH "オプション"
.PP
\-h|\-\-help
.RS 4
コマンドラインオプションの要約を表示する。
.RE
.PP
\-s <configuration file>
.RS 4
サーバーが必要とする詳細な設定を含む設定ファイルを 指定する。このファイルには、サーバーが提供するサービスに関する記述や、 どの printcap ファイルを利用するかといった情報が含まれている。詳細は
smb\&.conf
を参照のこと。設定ファイルの名前の既定値は、コンパイル時 に決定される。
.RE
.PP
\-i
.RS 4
対話的に動作する。それぞれのコマンドの destination、message\-type、parameter は標準入力より入力できる。 空のコマンドラインまたは "q" でプログラムは終了する。
.RE
.PP
destination
.RS 4
\fInmbd\fR、
\fIsmbd\fR
かプロセス ID のどれか。
.sp
distinationに
\fIall\fRを指定すると、 nmbdとwinbindを含む、動いているデーモンすべてに、"ブロードキャスト" で、メッセージを送る。これは、Samba 3\&.3から変更になり、それ以前 では、smbdがこのパラメータを使う。
.sp
destination に
\fIsmbd\fR
を指定すると
smbd\&.pidファイルで指定されたsmbdデーモンに メッセージが送られる。
.sp
destination に
\fInmbd\fR
を指定すると
nmbd\&.pid
ファイルで指定されている nmbd デーモンに対してメッセージが送られる。
.sp
destination に
\fIwinbindd\fR
を指定すると
winbindd\&.pid
ファイルで指定されている winbindd デーモンに対してメッセージが送られる。
.sp
もし単一のプロセス ID が与えられたときは、メッセージは その 1 つのプロセスにのみ送られる。
.RE
.PP
message\-type
.RS 4
メッセージの種類を指定する。詳細は
\fBMESSAGE\-TYPES\fR
を参照のこと。
.RE
.PP
parameters
.RS 4
メッセージの種類によって必要なパラメータ。
.RE
.SH "MESSAGE-TYPES"
.PP
使用可能なメッセージの種類:
.PP
close\-share
.RS 4
smbd に対し、指名した共有に接続しているクライアントの 接続を閉じるように命令する。これはクライアントの他の共有への接続には 影響を与えないことに注意。このメッセージタイプはクライアント接続を 閉じたい共有名か、全ての開いてある共有を切断する "*" を引数として 受け取る。これは、共有のアクセスコントロールを変更したときに便利である。 このメッセージは
\fBsmbd\fR
にのみ送ることができる。
.RE
.PP
debug
.RS 4
メッセージはデバッグレベルを parameter で指定された値に設定する。このメッセージはどの destination に対しても送信できる。
.RE
.PP
force\-election
.RS 4
このメッセージは
nmbd
デーモンに新たにマスタブラウザの選定を始めさせる。
.RE
.PP
ping
.RS 4
メッセージは parameter で指定された数だけの "ping" メッセージを送信し、同じ数だけの "pong" メッセージの応答を待つ。 このメッセージはどの destination に対しても 送信できる。
.RE
.PP
profile
.RS 4
メッセージはデーモンに parameter に基づいた profile の設定に変更するメッセージを送信する。 parameter に "on" を指定すると profile stats の収集が有効となり、"off" を指定すると profile stats の収集が無効となり、"count" を指定すると count stats の収集のみが 有効となり (time stats は無効)、また、"flush" を指定したときは現在の profile stats をゼロにする。 このメッセージはどの smbd および nmbd にも送信できる。
.RE
.PP
debuglevel
.RS 4
メッセージはデーモンの "debuglevel" を問い合わせる メッセージを送信し、それを STDOUT に書き込む。このメッセージはどの destination に対しても送信できる。
.RE
.PP
profilelevel
.RS 4
メッセージはデーモンの "profile" を問い合わせる メッセージを送信し、それを STDOUT に書き込む。このメッセージはどの smbd および nmbd のデーモンに対しても送信することができる。
.RE
.PP
printnotify
.RS 4
メッセージはプリンタに接続しているすべての Windows NT クライアントへ printer notify message を送信する。このメッセージには 以下の引数を渡すことができる:
.PP
queuepause printername
.RS 4
指定したプリンタに対し、queue pause change notify メッセージを送信する。
.RE
.PP
queueresume printername
.RS 4
指定したプリンタに対し、queue resume change notify メッセージを送信する。
.RE
.PP
jobpause printername unixjobid
.RS 4
指定したプリンタと UNIX の jobid に対し、job pause change notify メッセージを送信する。
.RE
.PP
jobresume printername unixjobid
.RS 4
指定したプリンタと UNIX の jobid に対し、job resume change notify メッセージを送信する。
.RE
.PP
jobdelete printername unixjobid
.RS 4
指定したプリンタと UNIX の jobid に対し、job delete change notify メッセージを送信する。
.RE
.sp
このメッセージはイベントが起こったと通知するだけである。 実際にイベントを起こすわけではない。
.sp
このメッセージは
\fBsmbd\fR
に対してのみ 送信できる。
.RE
.PP
samsync
.RS 4
smbd に対して、PDC の sam database と同期をとるように 命令する (BDC になるように命令)。\fBsmbd\fR
に対してのみ送信できる。
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
現在未実装。
.sp .5v
.RE
.RE
.PP
samrepl
.RS 4
sam の replication メッセージを順次送信する。
\fBsmbd\fR
に対してのみ送信できる。 手動で使用してはいけない。
.RE
.PP
dmalloc\-mark
.RS 4
dmalloc のマークをセットする。smbd と nmbd の両方に対して送信することができる。Samba の dmalloc サポートが有効になった状態でビルドされた場合にのみ使用できる。
.RE
.PP
dmalloc\-log\-changed
.RS 4
dmalloc\-mark によってマークされた時点以降で、変更のあったポインタを ダンプする。smbd と nmbd の両方に対して送信することができる。 Samba の dmalloc サポートが有効になった状態でビルドされた場合にのみ 使用できる。
.RE
.PP
shutdown
.RS 4
指定されたデーモンを落とすことができる。 smbd と nmbd の両方に対して送信することができる。
.RE
.PP
pool\-usage
.RS 4
指定されたデーモン/プロセスの talloc(pool) memory usage を、人間に読み取り可能な状態で表示する。smbd と nmbd の両方に 対して使用できる。
.RE
.PP
drvupgrade
.RS 4
特定のドライバを使用しているプリンタのクライアントに 対し、ローカルのドライバをアップデートするように強制する。 smbd に対してのみ送信することができる。
.RE
.PP
reload\-config
.RS 4
デーモンに smb\&.conf 設定ファイルの再読み込みを 強制させる。\fBsmbd\fR、\fBnmbd\fR
か
\fBwinbindd\fR
に対して送信することができる。
.RE
.SH "バージョン"
.PP
このマニュアルページは Samba 3 用である。
.SH "関連項目"
.PP
\fBnmbd\fR(8)
and
\fBsmbd\fR(8)\&.
.SH "著者"
.PP
オリジナルの Samba ソフトウェアと関連ユーティリティは、 Andrew Tridgellによって作成された。 現在 Samba は、Samba Team によって Linux カーネルの 開発と同様に、オープンソースプロジェクトとして 開発されている。
.PP
オリジナルのSambaマニュアルは、Karl Auer によって執筆された。 マニュアルのソースは Jeremy Allison によって YODL 形式に変換され、 Samba 2\&.0 リリース用に更新された。 (YODL はオープンソース・ソフトウエアの優れた作品である
ftp://ftp\&.icce\&.rug\&.nl/pub/unix/
より入手可能。) Samba 2\&.2 における DocBook形式への変換は Gerald Carter によって行なわれた。Samba 3\&.0 における DocBook XML 4\&.2 形式への変換は Alexander Bokovoy によって行われた。
.SH "日本語訳"
.PP
このマニュアルページは Samba 3\&.3\&.6 \- 3\&.4\&.11 対応のものである。
.PP
このドキュメントの Samba 3\&.2\&.4 \- 3\&.4\&.11 対応の翻訳は
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
太田俊哉 (ribbon@samba\&.gr\&.jp)
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
はせがわ ようすけ
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
山田 史朗 (shiro@miraclelinux\&.com)
.sp
.RE
によって行なわれた。
