.\"     Title: net
.\"    Author: 
.\" Generator: DocBook XSL Stylesheets v1.73.2 <http://docbook.sf.net/>
.\"      Date: 04/17/2009
.\"    Manual: システム管理ツール
.\"    Source: Samba 3.2
.\"
.TH "NET" "8" "04/17/2009" "Samba 3\.2" "システム管理ツール"
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.SH "NAME"
net - Samba およびリモート CIFS サーバの管理ツール
.SH "SYNOPSIS"
.HP 1
net {<ads|rap|rpc>} [\-h] [\-w\ workgroup] [\-W\ myworkgroup] [\-U\ user] [\-I\ ip\-address] [\-p\ port] [\-n\ myname] [\-s\ conffile] [\-S\ server] [\-l] [\-P] [\-d\ debuglevel] [\-V]
.SH "説明"
.PP
このツールは、\fBsamba\fR(7)システムの一部である。
.PP
Samba の net ユーティリティは Windows や DOS に存在する NET コマンドと同様の位置づけのものである。 先頭の引数は、コマンドを実行する際に使用するプロトコルを指定するために用いられる。 ADS は Active Directory が、RAP は従来の (Windows 9x / Windows NT 3\.x) クライアントが、 RPC は Windows NT 4\.0 および Windows 2000 によって使用されている。 この引数が省略された場合、 net コマンドはプロトコルを自動判別しようとする。 すべてのコマンドがすべてのプロトコル上で使用できるわけではない。
.SH "オプション"
.PP
\-h|\-\-help
.RS 4
Print a summary of command line options\.
.RE
.PP
\-w target\-workgroup
.RS 4
操作対象とするワークグループやドメインを指定する。 このオプションか、サーバの IP アドレスもしくは名前のいずれかは指定する必要がある。
.RE
.PP
\-W workgroup
.RS 4
クライアントのワークグループやドメインを指定する。
.RE
.PP
\-U user
.RS 4
アクセスを行なうユーザ名を指定する。
.RE
.PP
\-I ip\-address
.RS 4
操作対象のサーバの IP アドレスを指定する。 このオプションか、 操作対象のワークグループもしくは対象のサーバ名のいずれかを指定する必要がある。
.RE
.PP
\-p port
.RS 4
操作対象のサーバに接続する際に用いるポート番号 (通常 139 か 445) を指定する。 デフォルトではまず 445 を試行し、ついで 139 を試行する。
.RE
.PP
\-n <primary NetBIOS name>
.RS 4
This option allows you to override the NetBIOS name that Samba uses for itself\. This is identical to setting the
\fInetbios name\fR
parameter in the
\fIsmb\.conf\fR
file\. However, a command line setting will take precedence over settings in
\fIsmb\.conf\fR\.
.RE
.PP
\-s <configuration file>
.RS 4
The file specified contains the configuration details required by the server\. The information in this file includes server\-specific information such as what printcap file to use, as well as descriptions of all the services that the server is to provide\. See
\fIsmb\.conf\fR
for more information\. The default configuration file name is determined at compile time\.
.RE
.PP
\-S server
.RS 4
操作対象のサーバ名を指定する。 このオプションか、操作対象のワークグループもしくは IP アドレスのいずれかを指定する必要がある。
.RE
.PP
\-l
.RS 4
情報を表示する際に、各項目の詳細情報を表示する。
.RE
.PP
\-P
.RS 4
ローカルサーバのコンピュータアカウントを用いて別のサーバに対する問い合わせを行なう。
.RE
.PP
\-d|\-\-debuglevel=level
.RS 4
\fIlevel\fR
is an integer from 0 to 10\. The default value if this parameter is not specified is 0\.
.sp
The higher this value, the more detail will be logged to the log files about the activities of the server\. At level 0, only critical errors and serious warnings will be logged\. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\.
.sp
Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\.
.sp
Note that specifying this parameter here will override the
\fIlog level\fR
parameter in the
\fIsmb\.conf\fR
file\.
.RE
.SH "コマンド"
.SS "CHANGESECRETPW"
.PP
このコマンドにより、Samba のコンピュータアカウントのパスワードを外部のアプリケーションから Active Directory に格納済のものに設定させることが可能となる。 何が行なわれるかを理解しない限り、このコマンドを用いないこと。 このコマンドを用いるには、強制フラグ (\-f) を併せて設定する必要がある。 コマンドプロンプトのインタフェースは存在しない。 情報は全て、コマンドラインなどを経由して標準入力経由で引き渡され、コンピュータアカウントのパスワードとして格納される。 警告無しに以前のコンピュータアカウントのパスワードが上書きされてしまうため、このコマンドは注意して用いること。
.SS "TIME"
.PP
NET TIME
コマンドにより、リモートサーバの時刻を表示させたり、ローカルサーバの時刻をリモートサーバの時刻に同期させたりすることが可能となる。
.SS "TIME"
.PP
オプションを指定しなかった場合、
NET TIME
コマンドはリモートのサーバの時刻を表示する。
.SS "TIME SYSTEM"
.PP
リモートマシンの時刻を
/bin/date
が認識できる形式で表示する。
.SS "TIME SET"
.PP
ローカルサーバの日付と時刻を
/bin/date
コマンドを用いてリモートサーバの日付と時刻に設定させる。
.SS "TIME ZONE"
.PP
リモートマシンの時間帯を GMT からの差分で時間単位で表示する。
.SS "[RPC|ADS] JOIN [TYPE] [\-U username[%password]] [createupn=UPN] [createcomputer=OU][options]"
.PP
ドメインに参加する。サーバ上にコンピュータアカウントがすでに存在しており、 [TYPE] が MEMBER の場合、マシンの参加は自動的に行なわれる (コンピュータアカウントがサーバマネージャで作成済の場合)。 それ以外の場合は、パスワードの入力が求められ、新しいコンピュータアカウントが作成される。
.PP
[TYPE] は、ドメインに参加するコンピュータのタイプを指定するもので、 PDC, BDC, MEMBER のいずれかの値をとる。
.PP
[UPN] (ADSのみ)ドメインに参加する時のプリンシパル名属性を設定する。既定値の形式は host/netbiosname@REALMである。
.PP
[OU] (ADSのみ)指定したOU中にあらかじめコンピュータアカウントを作成する。 OU文字列はRDNなしで、\'/\'をデリミタとして、初めから最後まで読まれる。 シェルとLDAPの両方で\'\e\'がエスケープとして使われるため、その文字その物を 渡すためには、二重に書くか、4重に書く必要があり、デリミタとしては扱われない。
.SS "[RPC] OLDJOIN [options]"
.PP
ドメインに参加する。従来の方式によるドメイン参加を行なう場合は、 OLDJOIN オプションを使用すること。 参加を行なうには、事前にサーバマネージャでコンピュータアカウントを作成しておくことが必要である。
.SS "[RPC|ADS] USER"
.SS "[RPC|ADS] USER"
.PP
ユーザの一覧を出力する。
.SS "[RPC|ADS] USER DELETE target"
.PP
指定したユーザを削除する。
.SS "[RPC|ADS] USER INFO target"
.PP
指定したユーザの所属するグループ一覧を出力する。
.SS "[RPC|ADS] USER RENAME oldname newname"
.PP
指定したユーザの名前を変更する。
.SS "[RPC|ADS] USER ADD name [password] [-F user flags] [-C comment]"
.PP
指定したユーザを追加する。
.SS "[RPC|ADS] GROUP"
.SS "[RPC|ADS] GROUP [misc options] [targets]"
.PP
グループの一覧を表示する。
.SS "[RPC|ADS] GROUP DELETE name [その他のオプション]"
.PP
指定したグループを削除する。
.SS "[RPC|ADS] GROUP ADD name [-C comment]"
.PP
指定したグループを作成する。
.SS "[RAP|RPC] SHARE"
.SS "[RAP|RPC] SHARE [その他のオプション] [targets]"
.PP
指定したサーバが公開しているすべてのリソース(ネットワーク共有)の一覧を出力する。
.SS "[RAP|RPC] SHARE ADD name=serverpath [-C comment] [-M maxusers] [targets]"
.PP
サーバに共有を追加する (公開を有効にする)。Maxusers は共有に同時に接続できるユーザの数を指定する。
.SS "SHARE DELETE sharenam"
.PP
指定した共有を削除する。
.SS "[RPC|RAP] FILE"
.SS "[RPC|RAP] FILE"
.PP
リモートサーバ上でオープンされているファイルの一覧を出力する。
.SS "[RPC|RAP] FILE CLOSE fileid"
.PP
リモートサーバ上にある
\fIfileid\fR
で指定したファイルをクローズする。
.SS "[RPC|RAP] FILE INFO fileid"
.PP
指定した
\fIfileid\fR
のファイルの情報を出力する。 現在表示されるのは、以下の情報である: file\-id, username, lock, path, permission
.SS "[RAP|RPC] FILE USER user"
.PP

\fIuser\fRで指定した、オープンしているファイルを表示する。
net rap file userはSambaサーバに対して動作しない事に手注意。
.SS "SESSION"
.SS "RAP SESSION"
.PP
オプションなしの場合、 SESSION は指定したサーバ上のすべてのアクティブな SMB/CIFS セッションの一覧を表示する。
.SS "RAP SESSION DELETE|CLOSE CLIENT_NAME"
.PP
指定したセッションをクローズする。
.SS "RAP SESSION INFO CLIENT_NAME"
.PP
は指定したセッションにおいてオープンされているファイルの一覧を表示する (訳注: 実際はオープンされている共有の一覧その他の情報を表示する)。
.SS "RAP SERVER \fIDOMAIN\fR"
.PP
ドメインもしくはワークグループ内のサーバの一覧を出力する。 デフォルトの対象はローカルドメインである。
.SS "RAP DOMAIN"
.PP
現在ネットワークで表示されているドメインおよびワークグループの一覧を出力する。
.SS "RAP PRINTQ"
.SS "RAP PRINTQ INFO QUEUE_NAME"
.PP
サーバ上の指定された印刷キューおよび印刷ジョブの一覧を出力する。
\fIQUEUE_NAME\fR
が省略された場合、キューの一覧が出力される。
.SS "RAP PRINTQ DELETE JOBID"
.PP
指定された ID の印刷ジョブを削除する。
.SS "RAP VALIDATE \fIuser\fR [\fIpassword\fR]"
.PP
指定したユーザがリモートサーバにログオン可能かどうかを確認する。 コマンドラインでパスワードが指定されなかった場合は、入力を求められる。
.sp
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
Note
.PP
Currently NOT implemented\.
.SS "RAP GROUPMEMBER"
.SS "RAP GROUPMEMBER LIST GROUP"
.PP
指定したグループのメンバ一覧を出力する。
.SS "RAP GROUPMEMBER DELETE GROUP USER"
.PP
グループからメンバを削除する。
.SS "RAP GROUPMEMBER ADD GROUP USER"
.PP
グループにメンバを追加する。
.SS "RAP ADMIN \fIcommand\fR"
.PP
指定した
\fIcommand\fR
をリモートサーバ上で実行する。 OS/2 サーバに対してのみ機能する。
.sp
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
Note
.PP
Currently NOT implemented\.
.SS "RAP SERVICE"
.SS "RAP SERVICE START NAME [arguments...]"
.PP
リモートサーバ上の指定したサービスを起動する。現在実装されていない。
.sp
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
Note
.PP
Currently NOT implemented\.

.SS "RAP SERVICE STOP"
.PP
リモートサーバ上の指定したサービスを停止する。
.sp
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
Note
.PP
Currently NOT implemented\.
.SS "RAP PASSWORD \fIUSER\fR \fIOLDPASS\fR \fINEWPASS\fR"
.PP

\fIUSER\fR
のパスワードを
\fIOLDPASS\fR
から
\fINEWPASS\fR
に変更する。
.SS "LOOKUP"
.SS "LOOKUP HOST HOSTNAME [TYPE]"
.PP
指定したホスト名およびタイプ(NetBIOS サフィックス)の IP アドレスを検索する。 タイプのデフォルトは 0x20 (workstation (訳注: server の誤り)) である。
.SS "LOOKUP LDAP [DOMAIN"
.PP
指定した
\fIDOMAIN\fR
の LDAP サーバの IP アドレスを検索する。デフォルトはローカルドメインが対象となる。
.SS "LOOKUP KDC [REALM]"
.PP
指定した
\fIREALM\fR
の KDC の IP アドレスを検索する。 デフォルトはローカルなレルム(realm)が対象となる。
.SS "LOOKUP DC [DOMAIN]"
.PP
指定した
\fIDOMAIN\fR
のドメインコントローラの IP アドレスを検索する。 デフォルトはローカルドメインが対象となる。
.SS "LOOKUP MASTER DOMAIN"
.PP
指定した
\fIDOMAIN\fR
もしくはワークグループのマスタブラウザの IP アドレスを検索する。 デフォルトはローカルドメインが対象となる。
.SS "CACHE"
.PP
Samba は「gencache」という汎用のキャッシュインタフェースを用いている。 これは \'NET CACHE\' コマンドにより制御可能である。
.PP
タイムアウトに関するパラメータはすべて、以下のサフィックスをサポートしている:
.IP "" 4
s \- 秒
.IP "" 4
m \- 分
.IP "" 4
h \- 時
.IP "" 4
d \- 日
.IP "" 4
w \- 週

.SS "CACHE ADD key data time-out"
.PP
指定した key と data の組合せを time\-out の期限でキャッシュに追加する。
.SS "CACHE DEL key"
.PP
key をキャッシュから削除する。
.SS "CACHE SET key data time-out"
.PP
既存のキャッシュエントリの data を更新する。
.SS "CACHE SEARCH PATTERN"
.PP
キャッシュデータの中から指定されたパターンを検索する。
.SS "CACHE LIST"
.PP
現在キャッシュに格納されているアイテムの一覧を表示する。
.SS "CACHE FLUSH"
.PP
現在キャッシュに格納されているアイテムをすべて消去する。
.SS "GETLOCALSID [DOMAIN]"
.PP
指定されたドメインの SID を表示する。 パラメータが省略された場合、ローカルサーバが所属するドメインの SID を表示する。
.SS "SETLOCALSID S\-1\-5\-21\-x\-y\-z"
.PP
ローカルサーバが所属するドメインの SID を指定した SID に設定する。
.SS "GETDOMAINSID"
.PP
現在のローカルサーバのSIDと現在のドメインのSIDを表示する。
.PP
現在のドメインのSIDを設定する。
.SS "GROUPMAP"
.PP
Windows のグループ ID と UNIX のグループ ID との対応づけを行なう。 共通のオプションを以下に示す:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
unixgroup \- UNIX のグループ名
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
ntgroup \- Windows NT のグループ名 (SID が解決可能である必要がある。)
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
rid \- 符号なし 32 ビット整数
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
sid \- 「S\-1\-\.\.\.」形式の完全な SID
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
type \- グループのタイプ。「domain」、「local」もしくは「builtin のいずれか。
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
comment \- 任意の文字列によるグループの説明
.sp
.RE
.SS "GROUPMAP ADD"
.PP
新しいグループマップのエントリを追加する:
.sp
.RS 4
.nf
net groupmap add {rid=int|sid=string} unixgroup=string \e
      [type={domain|local}] [ntgroup=string] [comment=string]
.fi
.RE
.sp

.SS "GROUPMAP DELETE"
.PP
グループマップのエントリを削除する。 複数のエントリがマッチした場合、最初にマッチしたエントリが削除される。
.PP
net groupmap delete {ntgroup=string|sid=SID}
.SS "GROUPMAP MODIFY"
.PP
既存のグループマップのエントリを変更する。
.PP

.sp
.RS 4
.nf
net groupmap modify {ntgroup=string|sid=SID} [unixgroup=string] \e
       [comment=string] [type={domain|local}]
.fi
.RE
.sp

.SS "GROUPMAP LIST"
.PP
存在しているグループマップのエントリの一覧を表示する。
.PP
net groupmap list [verbose] [ntgroup=string] [sid=SID]
.SS "MAXRID"
.PP
ローカルサーバ上で (有効な「passdb backend」パラメータにより) 現在使用可能な RID の最大値を出力する。
.SS "RPC INFO"
.PP
リモートサーバが所属するドメインの、ドメイン名、ドメインの SID 、ユーザおよびグループ数といった情報を出力する。
.SS "[RPC|ADS] TESTJOIN"
.PP
ドメインへの参加が現在可能であるかどうかを確認する。
.SS "[RPC|ADS] CHANGETRUSTPW"
.PP
ドメイン間信頼のパスワードを強制的に変更する。
.SS "RPC TRUSTDOM"
.SS "RPC TRUSTDOM ADD DOMAIN"
.PP

\fIDOMAIN\fR
のドメイン間信頼アカウントをリモートサーバに追加する。 これは実際、アカウントフラグ
\fB\'I\'\fR
(ドメイン間信頼アカウント)を伴う、
\fIDOMAIN$\fR
と言う名のSambaアカウントである。 もしも、localhostに対してコマンドが使われるならば、
smbpasswd \-a \-i DOMAINと同じ影響を及ぼす。 両コマンドとも適切なUNIXアカウントを必要とする事に注意。
.SS "RPC TRUSTDOM DEL DOMAIM"
.PP

\fIDOMAIN\fR
のドメイン間信頼アカウントをリモートサーバから削除する。 これは、smbpasswd \-x DOMAIN$と同じである。
.SS "RPC TRUSTDOM ESTABLISH DOMAIN"
.PP
信頼するドメインとの間の信頼関係を締結する。 ドメイン間信頼アカウントが、リモートの PDC 上にすでに作成されていることが必須である。
.SS "RPC TRUSTDOM REVOKE DOMAIN"
.PP
信頼されたドメインとの間の信頼関係を破棄する。
.SS "RPC TRUSTDOM LIST"
.PP
現在のドメイン間の信頼関係を一覧表示する。
.SS "RPC RIGHTS"
.PP
このサブコマンドは、 Samba のユーザー権利の割当の表示、管理に用いられる。 現在のところ、以下の 3 つのオプションが利用できる:
\fIlist\fR、
\fIgrant\fR、
\fIrevoke\fR。 Samba のユーザー権利の実装と利用方法に関する詳細については、 Samba\-HOWTO\-Collection を参照のこと。
.SS "RPC ABORTSHUTDOWN"
.PP
リモートサーバのシャットダウンを中止する。
.SS "SHUTDOWN [\-t timeout] [\-r] [\-f] [\-C message]"
.PP
リモートサーバをシャットダウンする。
.PP
\-r
.RS 4
シャットダウン後に再起動する。
.RE
.PP
\-f
.RS 4
全てのアプリケーションを強制的に終了させる。
.RE
.PP
\-t timeout
.RS 4
システムをシャットダウンさせる前のタイムアウト時間を指定する。システムに対話的ログオンしているユーザは、この期間にシャットダウンをキャンセルすることができる。
.RE
.PP
\-C message
.RS 4
シャットダウンの通知を行なう際に、指定したメッセージを画面上に表示する。
.RE
.SS "RPC SAMDUMP"
.PP
リモートサーバの SAM データベースを表示する。 これは PDC もしくはドメインに参加したSamba BDC 上で実行する必要がある。
.SS "RPC VAMPIRE"
.PP
リモートサーバからユーザ、エイリアス、グループをローカルサーバ上にエクスポートする。 ドメインに参加したBDC 上で、PDCに対してのみ実行することが可能である。
.SS "RPC GETSID"
.PP
ドメインの SID を取得して、ローカルの
\fIsecrets\.tdb\fR
に格納する。
.SS "ADS LEAVE"
.PP
リモートホストを所属しているドメインから外す。
.SS "ADS STATUS"
.PP
Active Directory 環境において、ローカルマシンのコンピュータアカウントの状態を表示する。 表示内容は、デバッグ情報のようなものであり、開発者向けのものである。 一般のユーザは
NET ADS TESTJOIN
を使うべきである。
.SS "ADS PRINTER"
.SS "ADS PRINTER INFO [PRINTER] [SERVER]"
.PP

\fISERVER\fR
上にある
\fIPRINTER\fR
を検索する。 プリンタ名のデフォルトは「*」であり、サーバ名のデフォルトはローカルホスト名である。
.SS "ADS PRINTER PUBLISH PRINTER"
.PP
指定したプリンタを Active Directory に対して公開する。
.SS "ADS PRINTER REMOVE PRINTER"
.PP
指定したプリンタを Active Directory のディレクトリから削除する。
.SS "ADS SEARCH \fIEXPRESSION\fR \fIATTRIBUTES\.\.\.\fR"
.PP
Active Directory のサーバに対して低レベルな LDAP 検索を行ない、その結果を表示する。 EXPRESSION は標準の LDAP 検索表記で行ない、 ATTRIBUTES は結果中に表示する LDAP フィールドの一覧である。
.PP
設定例:
\fBnet ads search \'(objectCategory=group)\' sAMAccountName\fR
.SS "ADS DN \fIDN\fR \fI(attributes)\fR"
.PP
Active Directory のサーバに対して低レベルな LDAP 検索を行ない、その結果を表示する。 DN は標準の LDAP DN であり、 attributes は結果中に表示する LDAP フィールドの一覧である。
.PP
設定例:
\fBnet ads dn \'CN=administrator,CN=Users,DC=my,DC=domain\' SAMAccountName\fR
.SS "ADS WORKGROUP"
.PP
指定された Kerberos レルムのワークグループ名を表示する。
.SS "SAM CREATEBUILTINGROUP <NAME>"
.PP
BUILTINグループを(再)作成する。 このコマンドでは通常使われるBUILTINグループのみ作成出来る。以下は、現在迫っていされるグループ名である: Administrators, Users, Guests, Power Users, Account Operators, Server Operators, Print Operators, Backup Operators, Replicator, RAS Servers, Pre\-Windows 2000 compatible Access\. このコマンドはidmapの割り当てが適切に構成されているWinbinddが動いている事を要求する。グループのgidはwinbinddのレンジの範囲外に割り当てられる。
.SS "SAM CREATELOCALGROUP <NAME>"
.PP
ローカルグループを作成する(別名である)。 このコマンドはidmapの割り当てが適切に構成されているWinbinddが動いている事を要求する。グループのgidはwinbinddのレンジの範囲外に割り当てられる。
.SS "SAM DELETELOCALGROUP <NAME>"
.PP
存在するローカルグループを削除する(別名である)。
.SS "SAM MAPUNIXGROUP <NAME>"
.PP
同じ名前を持つドメイングループと、存在するUnixグループをマップし、Domainグループにする。
.SS "SAM UNMAPUNIXGROUP <NAME>"
.PP
存在するグループマップエントリを削除する。
.SS "SAM ADDMEM <GROUP> <MEMBER>"
.PP
ローカルグループへメンバを追加する。グループは名前でのみ指定でき、メンバは名前かSIDで指定出来る。
.SS "SAM LISTMEM <GROUP>"
.PP
ローカルグループメンバを表示する。グループは名前で指定しなければならない。
.SS "SAM LIST <users|groups|localgroups|builtin|workstations> [verbose]"
.PP
名前による一まとまりのアカウントを表示する。もしもverboseが指定されていたら、 ridとdescriptionも各々のアカウントに対して提供される。
.SS "SAM SHOW <NAME>"
.PP
対応するアカウントの、完全な DOMAIN\e\eNAME のSIDとタイプを表示する。
.SS "SAM SET HOMEDIR <NAME> <DIRECTORY>"
.PP
アカウントに対するホームディレクトリを設定する。
.SS "SAM SET PROFILEPATH <NAME> <PATH>"
.PP
アカウントに対するプロファイルパスを設定する。
.SS "SAM SET COMMENT <NAME> <COMMENT>"
.PP
ユーザまたはグループアカウントに対するコメントを設定する。
.PP
ユーザアカウントに対するフルネームを設定する。
.SS "SAM SET LOGONSCRIPT <NAME> <SCRIPT>"
.PP
ユーザアカウントに対するログオンスクリプトを設定する。
.SS "SAM SET HOMEDRIVE <NAME> <DRIVE>"
.PP
ユーザアカウントに対するホームドライブを設定する。
.SS "SAM SET WORKSTATIONS <NAME> <WORKSTATIONS>"
.PP
ログイン可能なユーザアカウントをワークステーションに対して設定する。
.SS "SAM SET DISABLE <NAME>"
.PP
ユーザアカウントに対して"無効"フラグを設定する。
.SS "SAM SET PWNOTREQ <NAME>"
.PP
ユーザアカウントに対して"パスワード不要"フラグを設定する。
.SS "SAM SET AUTOLOCK <NAME>"
.PP
ユーザアカウントに対して"autolock"フラグを設定する。
.SS "SAM SET PWNOEXP <NAME>"
.PP
ユーザアカウントに対して"無期限のパスワード"フラグを設定する。
.SS "SAM SET PWDMUSTCHANGENOW <NAME> [yes|no]"
.PP
ユーザアカウントに対して"パスワードの変更が必要"フラグを設定する。
.SS "SAM POLICY LIST"
.PP
有効なアカウントポリシーを表示する。
.SS "SAM POLICY SHOW <account policy>"
.PP
アカウントポリシーの値を表示する。\.
.SS "SAM POLICY SET <account policy> <value>"
.PP
アカウントポリシーに値を設定する。 有効な値は、 "forever", "never", "off", か数字である。
.SS "SAM PROVISION"
.PP
もしも、ldapsam:editposixが設定されて、winbinddが動作中の時有効である。 ldapのDIT上の、基本的なアカウント(Administrator)とグループ(Domain Users, Domain Admins, Domain Guests)とともに、ldap DITを 適切にpopulateする。
.SS "IDMAP DUMP <local tdb file name>"
.PP
指定したローカルのtdbファイル中にあるマッピングをダンプする。このコマンドは、 idmap_tdbバックエンドによって生成されたマップのダンプにのみ有用である。
.SS "IDMAP RESTORE [input file]"
.PP
指定したファイルか標準入りょcuからマッピングをリストアする。
.SS "IDMAP SECRET <DOMAIN>|ALLOC <secret>"
.PP
指定したドメインのために、secretを格納し、おおむね、idmap_ldapをバックエンドとして使うドメインのために使われる。このケースの場合、secretはldapサーバに対してバインドするユーザDNのパスワードとして使われる。
.SS "USERSHARE"
.PP
Samba 3\.0\.23 より、root 以外のユーザが「net usershare」コマンドを用いてユーザ定義共有を公開する機能が追加された。
.PP
これを行なうには、まず smb\.conf の [global] セクションに以下を追加する必要がある: usershare path = /usr/local/samba/lib/usershares ついで /usr/local/samba/lib/usershares ディレクトリを作成し、所有者を root に、所有グループをユーザ定義共有の作成を許可したい UNIX グループ、例えば「serverops」とする。 /usr/local/samba/lib/usershares のパーミッションは 01770 に設定する。 (所有者と所有グループには完全なアクセス権があり、その他にはアクセス権が全くない。さらにスティッキービットにより、ディレクトリ中のファイルについて、名前の変更や削除が行なえるのはファイルの所有者のみとなる) 最後に、smb\.conf の [global] セクションに以下のような行を追加することで、作成可能なユーザ定義共有の最大数を smbd に設定する: usershare max shares = 100 これにより、最大 100 のユーザ定義共有を設定可能となる。 これにより、「serverops」という UNIX グループのメンバは必要に応じて以下のコマンドを実行することで、ユーザ定義共有を作成することが可能となる。
.PP
ユーザ定義共有に関するコマンドを以下に示す:
.IP "" 4
net usershare add sharename path [comment] [acl] [guest_ok=[y|n]] \- ユーザ定義の共有の追加または変更
.IP "" 4
net usershare delete sharename \- ユーザ定義の共有の削除
.IP "" 4
net usershare info [\-l|\-\-long] [wildcard sharename] \- ユーザ定義の共有の情報の出力
.IP "" 4
net usershare list [\-l|\-\-long] [wildcard sharename] \- ユーザ定義の共有の一覧出力

.SS "USERSHARE ADD sharename path [comment] [acl] [guest_ok=[y|n]]"
.PP
sharename というユーザ定義共有の新規作成もしくは修正(上書き)を行なう。
.PP
「path」には、公開するディレクトリのシステム上での絶対パス名を指定する。 公開可能なディレクトリには幾つかの制約がある。 グローバルな smb\.conf のパラメータである「usershare owner only」、「usershare prefix allow list」、「usershare prefix deny list」を参照のこと。
.PP
オプションの「comment」パラメータは、クライアントから共有を参照した際に表示されるコメント文字列を指定する。
.PP
オプションの「acl」フィールドは、共有単位でどのユーザに読み取りや書き込みのアクセス許可を与えるかを指定する。 ゲストアクセスは、 smb\.conf の「usershare allow guests」パラメータを有効にしない限り行なえない。 ユーザ定義共有の ACL の指定は「user:permission」という形式で行なわれる。user はシステムで有効なユーザ名であり、permission は「F」、「R」、「D」のいずれかである。 「F」は「フルコントロール」、すなわち読み取りと書き込み権を示す。「D」は「拒否」を示し、ユーザの共有へのアクセスを許可しない。「R」は「読み取り専用」、すなわちこの共有への読み取りアクセスのみの許可を示す (ファイルへの書き込みやファイルやディレクトリの新規作成は行なえない)。
.PP
「acl」オプションが指定されなかった場合のデフォルトは「Everyone:R」である。これは、認証された全てのユーザが読み取り専用のアクセス権を有することを意味する。
.PP
オプションの「guest_ok」パラメータは、smb\.conf 中の同名のパラメータと同じ意味を持ち、該当のユーザ定義共有に対するゲストアクセスを許可する。 このパラメータは、 smb\.conf 中でグローバルパラメータの「usershare allow guests」が有効になっている時のみ設定できる。

既存のユーザ定義共有を修正するコマンドは個別に用意されておらず、
「net usershare add [sharename]」コマンドを用いて、sharename 共有を新規のオプションを指定して上書き変更することになる。
Samba の smbd デーモンは、接続のあったタイミングでユーザ定義共有の変更を検知するのため、変更は即座に反映される。ユーザ定義共有の追加、削除、変更により、smbd の再起動を行なう必要はない。
.SS "USERSHARE DELETE sharename"
.PP
指定されたユーザ定義共有を削除する。 Samba smbd デーモンは即座にこの変更を検知するが、削除された共有にその時点で接続中のユーザが切断されることはない。
.SS "USERSHARE INFO [-l|--long] [wildcard sharename]"
.PP
指定されたパターンに合致するユーザによって所有されている、もしくは全てのユーザ定義共有の情報が表示される。
.PP
net usershare info は、実行したユーザが作成したユーザ定義共有の詳細情報を表示するが、ワイルドカード情報 (「*」は1文字以上の文字にマッチし、「?」は1文字のみにマッチする) が指定されている場合は、それにマッチした共有のみを表示する。 「\-l」もしくは「\-\-long」オプションが指定されていた場合、他のユーザが作成したユーザ定義共有の情報も表示する。
.PP
各共有についての情報は以下のような形式で設定される: [foobar] path=/home/jeremy comment=testme usershare_acl=Everyone:F guest_ok=n これは、「net usershare add」コマンドで現状設定可能なユーザ定義共有の設定一覧である。
.SS "USERSHARE LIST [-l|--long] wildcard sharename"
.PP
実行したユーザが所有し、指定されたワイルドカードにマッチする、もしくは全てのユーザのユーザ定義共有の一覧を表示する。
.PP
net usershare list は、実行したユーザが作成したユーザ定義共有の一覧を表示するが、ワイルドカード情報 (「*」は1文字以上の文字にマッチし、「?」は1文字のみにマッチする) が指定されている場合は、それにマッチした共有のみを表示する。 「\-l」もしくは「\-\-long」オプションが指定されていた場合、他のユーザが作成したユーザ定義共有の情報も表示する。
.SS "CONF"
.PP
バージョン 3\.2\.0から、Sambaサーバはレジストリにデータを格納することにより設定する事が出きるようになった。この設定データは新しい"net conf"コマンドで編集できる。
.PP
この設定データの配布は The deployment of this configuration data can be activated in two levels from the\fIsmb\.conf\fRファイルから2つのレベルで有効にできる。 レジストリからの共有定義は[global]セクション中で\fIregistry shares\fRを\(lqyes\(rqにすることで有効にでき、 グローバルオプションは、複合設定の場合、[global]セクション中で\fIinclude = registry\fRを設定することで、 レジストリのみの設定の場合は、[global]セクション中で、\fIconfig backend = registry\fRを設定することで有効になる。 詳細は\fBsmb.conf\fR(5)マニュアルページを参照のこと。
.PP
conf コマンドは以下のとおり:
.IP "" 4
net conf list \- smb\.conf風の形式で完全な設定をダンプ
.IP "" 4
net conf import \- smb\.conf形式で設定をインポート
.IP "" 4
net conf listshares \- レジストリ共有のリスト
.IP "" 4
net conf drop \- レジストリから全部の設定を削除
.IP "" 4
net conf showshare \- レジストリ共有の定義を表示
.IP "" 4
net conf addshare \- 新しいレジストリ共有を作成
.IP "" 4
net conf delshare \- レジストリ共有を削除
.IP "" 4
net conf setparm \- パラメータを格納
.IP "" 4
net conf getparm \- パラメータの値を検索
.IP "" 4
net conf delparm \- パラメータを削除
.IP "" 4
net conf getincludes \- 共有定義のインクルードを表示
.IP "" 4
net conf setincludes \- 共有のためのインクルードを設定
.IP "" 4
net conf delincludes \- 共有定義からインクルードを削除

.SS "CONF LIST"
.PP
smb\.conf風の形式でレジストリ中にある設定データを標準出力に出力する。
.SS "CONF IMPORT [--test|-T] filename [section]"
.PP
このコマンドは、smb\.conf形式で、ファイルから設定情報をインポートする。もしも、 レジストリ中に存在するセクションが入力ファイル中に存在するならば、その内容は 置き換えられる。入力ファイル中に対となるものがない、レジストリ中のセクションは 何ら影響はない。もしも、それらを削除したいならば、"net conf drop" か "net conf delshare"を使うこと。 任意ではあるが、その、指定したセクションに対するimportコマンドの影響を避けるためにあるセクションを指定してもよい。テストモードはパラメータ"\-T"をコマンド行に 指定することで有効に出来る。テストモードでは、レジストリに対する変更は行われず、 設定の結果が代わりに標準出力に出力される。
.SS "CONF LISTSHARES"
.PP
レジストリ中で定義された共有名の一覧を表示する。
.SS "CONF DROP"
.PP
レジストリから完全に設定データを削除する。
.SS "CONF SHOWSHARE sharename"
.PP
指定したセクションまたは共有の定義を表示する。レジストリから、global設定オプションを検索するために、"global"を共有名として指定するのは有効である。
.SS "CONF ADDSHARE sharename path [writeable={y|N} [guest_ok={y|N} [comment]]] "
.PP
レジストリ中に新しい共有定義を作成する。 共有名とパス両方が必要である。共有名は"global"としては\fIいけない\fR
。 そのほか、とても一般的なオプション、"writeable", "guest ok" と "comment" も指定出来る。同じ結果は、一連の"net conf setparm"コマンドによって得てもよい。
.SS "CONF DELSHARE sharename"
.PP
レジストリから共有定義を削除する。
.SS "CONF SETPARM section parameter value"
.PP
パラメータをレジストリに格納する。セクションはglobalか共有名である。 セクションは、模試も存在しないならば、作成される。
.SS "CONF GETPARM section parameter"
.PP
レジストリ中のパラメータを表示する。
.SS "CONF DELPARM section parameter"
.PP
レジストリ中のパラメータを削除する。
.SS "CONF GETINCLUDES section"
.PP
(globalまたは共有の)提供されたセクションの、includeのリストを得る。
.PP
データベースとincludeディレクティブの種類により、includeは特別の扱いが必要である。パラメータ名が値の名前として、パラメータがレジストリに格納されるので、 共有ごとにパラメータのインスタンスは1つだけである。 また、テキストファイル中の指定したような順番は認められない。すべての真の パラメータに対して、これは完全に問題がないが、includeディレクティブは smb\.confテキストファイル中では、むしろメタパラメータであるので、他のパラメータ との間での場所の指定はとても重要である。これは単純なsmbconfデータもデルによって は実現できないので、共有後とに1つの順番のリストがあり、このリストはすべての 共有パラメータの後に評価される。
.PP
さらに、現在、レジストリ構成からファイルのみインクルード出来る。将来は、 他のレジストリキーから設定データをインクルード出来る予定である。
.SS "CONF SETINCLUDES section [filename]+"
.PP
(globalか共有の)提供されたセクションのためのinculudeリストを、1つまたはそれ以上の与えられたファイル名で設定する。 ファイル名は %Iのような通常のsmb\.confマクロを含んでいてもよい。
.SS "CONF DELINCLUDES section"
.PP
(globalか共有の)提供されたセクションからincludeリストを削除する。
.SS "HELP [COMMAND]"
.PP
指定されたコマンドの使用方法の情報を提供する。
.SH "バージョン"
.PP
このマニュアルページは Samba 3 用のものである。
.SH "著者"
.PP
オリジナルの Samba ソフトウェアと関連するユーティリティは、 Andrew Tridgell によって作られた。Samba は現在 Linux カーネルが 開発されているような方法でのオープンソースプロジェクトである Samba Team によって開発された。
.PP
net マニュアルページは Jelmer Vernoij によって執筆された。
.SH "日本語訳"
.PP
このマニュアルページは Samba 3\.0\.23 \- Samba 3\.0\.24 対応のものである。
.PP
このドキュメントの Samba 3\.0\.0 対応の翻訳は
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
たかはし もとのぶ (monyo@samba\.gr\.jp)
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
山田 史朗 (shiro@miraclelinux\.com)
.sp
.RE
によって行なわれた。
.PP
Samba 3\.0\.23 \- Samba 3\.0\.24 対応の翻訳は、たかはしもとのぶ (monyo@samba\.gr\.jp) によって行なわれた。
.PP
Samba 3\.2\.4\-3\.2\.10 対応の翻訳は、太田俊哉 (ribbon@samba\.gr\.jp) によって行なわれた。
