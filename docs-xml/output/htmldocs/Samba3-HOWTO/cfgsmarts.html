<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 34. 詳細設定のテクニック</title><link rel="stylesheet" href="../samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="公式のSamba 3.2.x HOWTOとリファレンスガイド"><link rel="up" href="optional.html" title="Part III. 詳細な設定方法"><link rel="prev" href="largefile.html" title="Chapter 33. 大きなディレクトリの取扱い"><link rel="next" href="migration.html" title="Part IV. マイグレーションとアップグレード"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 34. 詳細設定のテクニック</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="largefile.html">Prev</a> </td><th width="60%" align="center">Part III. 詳細な設定方法</th><td width="20%" align="right"> <a accesskey="n" href="migration.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 34. 詳細設定のテクニック"><div class="titlepage"><div><div><h2 class="title"><a name="cfgsmarts"></a>Chapter 34. 詳細設定のテクニック</h2></div><div><div class="author"><h3 class="author"><span class="firstname">John</span> <span class="othername">H.</span> <span class="surname">Terpstra</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><code class="email"><<a class="email" href="mailto:jht@samba.org">jht@samba.org</a>></code></p></div></div></div></div><div><p class="pubdate">June 30, 2005</p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="cfgsmarts.html#id2697435">実装</a></span></dt><dd><dl><dt><span class="sect2"><a href="cfgsmarts.html#id2697444">複数のサーバのホスティング</a></span></dt><dt><span class="sect2"><a href="cfgsmarts.html#id2697879">複数仮想サーバの性質(Personalities)</a></span></dt><dt><span class="sect2"><a href="cfgsmarts.html#id2698946">複数の仮想サーバホスティング</a></span></dt></dl></dd></dl></div><p><a class="indexterm" name="id2697237"></a><a class="indexterm" name="id2697244"></a>この本の最初の版のリリース以来、Samba以外の事についてネットワーク管理者の手助けとなるかもしれない設定テクニックのよりよい資料について、繰り返し要求があった。一部のユーザは、<a class="link" href="smb.conf.5.html#INCLUDE" target="_top">include = file-name</a>パラメータの使い方に関連する文書を提供した。</p><p><a class="indexterm" name="id2697276"></a><a class="indexterm" name="id2697283"></a>2004年の中頃に始まったが、1つのマシン上で複数のSambaサーバをホスティングする機能について、関心が高まってきた。1つのサーバ上複数のSambaサーバの振る舞いをホスティングする事への興味も増えてきた。</p><p><a class="indexterm" name="id2697303"></a><a class="indexterm" name="id2697310"></a>テクニカルレビューワからのフィードバックによりこの章を含める必要が出た。そのため、今まで十分に言及してこなかった質問への答えををここに記す。さらに、この章を充実させる、利用者からの追加は歓迎する。ここで提供されているものは、まったくもって、小さなとっかかりである。</p><p><a class="indexterm" name="id2697330"></a><a class="indexterm" name="id2697337"></a><a class="indexterm" name="id2697344"></a>単一のSambaサーバ上で複数のサーバをホスト出来る方法はいくつもある。複数のサーバホスティングは1つのマシン上で複数のドメインをホストする事を可能にする。そのような各マシンは独立していて、他に影響を与えずに、起動/停止ができる。</p><p><a class="indexterm" name="id2697365"></a><a class="indexterm" name="id2697372"></a><a class="indexterm" name="id2697378"></a>時には、各サーバが固有のセキュリティモードを持つ、複数のサーバをホスティングすることが好ましいことがある。例えば、一般的な匿名印刷サーバのように、単一のUNIX/Linuxホストはドメインメンバサーバ(DMS)になれる。この場合、ドメインメンバマシンとドメインユーザはDMSにアクセスでき、さらにゲストユーザでさえも、一般的な印刷サーバにアクセスできる。他の、汎用(匿名)サーバをホスティングするのに便利かもしれないシチュエーションの例としては、CDROMサーバのホスティングがある。</p><p><a class="indexterm" name="id2697411"></a><a class="indexterm" name="id2697418"></a>いくつかの環境では、固有のリソースを持つ、特定のユーザかグループのみからアクセス可能な、分離されたサーバを持つ必要が規定されている。これは、Sambaが多数の物理的なサーバを、1つのSambaサーバに置き換えられる、単純で、とても効果的な方法の1つである。</p><div class="sect1" title="実装"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2697435"></a>実装</h2></div></div></div><p></p><div class="sect2" title="複数のサーバのホスティング"><div class="titlepage"><div><div><h3 class="title"><a name="id2697444"></a>複数のサーバのホスティング</h3></div></div></div><p><a class="indexterm" name="id2697451"></a><a class="indexterm" name="id2697459"></a><a class="indexterm" name="id2697466"></a><a class="indexterm" name="id2697473"></a><a class="indexterm" name="id2697480"></a><a class="indexterm" name="id2697486"></a><a class="indexterm" name="id2697493"></a>複数のサーバホスティングの使用は、それぞれ個別の設定ファイルを持っている、複数の分離されたSambaインスタンスを動かす必要がある。この方法は、各<span class="application">nmbd</span>, <span class="application">smbd</span> と <span class="application">winbindd</span>のインスタンスは、完全に分離されたTDBファイルへの書き込みアクセスが出来なければならないという理由で、とても複雑である。<span class="application">nmbd</span>, <span class="application">smbd</span> と <span class="application">winbindd</span>が使うTDBファイルを分離させる事は、ホスティングを行う各Sambaを再コンパイルすることで、各Sambaが、固有のTDBファイルに対する既定値のディレクトリを持つか、<span class="application">nmbd</span>, <span class="application">smbd</span> と <span class="application">winbindd</span>の各インスタンスが、それらの固有の<code class="filename">smb.conf</code>設定ファイルで起動するようにしなければならない、<code class="filename">smb.conf</code>ファイルを設定することで可能となる。</p><p><a class="indexterm" name="id2697588"></a><a class="indexterm" name="id2697594"></a><a class="indexterm" name="id2697602"></a><a class="indexterm" name="id2697609"></a>各インスタンスは固有のIPアドレス(独立したIPアドレスはIPエイリアスで行える)で操作されるべきである。<span class="application">nmbd</span>, <span class="application">smbd</span> と<span class="application">winbindd</span>の各インスタンスは、その固有IPソケットのみをリッスンすべきである。これは<a class="link" href="smb.conf.5.html#SOCKETADDRESS" target="_top">socket address</a>パラメータを使うことによって、安全に出来る。Sambaサーバの各インスタンスは固有のSIDも持つべきであり、これは、サーバは互いに独立で、分離されていることを意味する。</p><p><a class="indexterm" name="id2697660"></a><a class="indexterm" name="id2697666"></a><a class="indexterm" name="id2697673"></a><a class="indexterm" name="id2697680"></a><a class="indexterm" name="id2697687"></a><a class="indexterm" name="id2697693"></a><a class="indexterm" name="id2697700"></a><a class="indexterm" name="id2697707"></a><a class="indexterm" name="id2697714"></a>複数サーバホスティングのユーザはそれほど特異ではなく、プロセス管理と起動時それぞれの場面において、注意深い設定を要求する。注意深く設定しなければならない、<code class="filename">smb.conf</code>パラメータは以下を含む:<a class="link" href="smb.conf.5.html#PRIVATEDIR" target="_top">private dir</a>, <a class="link" href="smb.conf.5.html#PIDDIRECTORY" target="_top">pid directory</a>,<a class="link" href="smb.conf.5.html#LOCKDIRECTORY" target="_top">lock directory</a>, <a class="link" href="smb.conf.5.html#INTERFACES" target="_top">interfaces</a>, <a class="link" href="smb.conf.5.html#BINDINTERFACESONLY" target="_top">bind interfaces only</a>, <a class="link" href="smb.conf.5.html#NETBIOSNAME" target="_top">netbios name</a>, <a class="link" href="smb.conf.5.html#WORKGROUP" target="_top">workgroup</a>, <a class="link" href="smb.conf.5.html#SOCKETADDRESS" target="_top">socket address</a>。</p><p><a class="indexterm" name="id2697832"></a><a class="indexterm" name="id2697839"></a><a class="indexterm" name="id2697846"></a>複数のSambaサーバを作成する事を選択した人は、Sambaソースコードを読解でき、必要に応じてそれを変更出来る能力を持つべきである。このモードの配置は、この文書の範囲を超えていると考えられる。しかし、もしも誰かがより包括的な文書を寄贈してくれるのであれば、喜んでそれをレビューし、もしもそれが適切であれば、この章のこの節を拡張するだろう。そのような文書が有効になるまで、単一ホスト上での複数Sambaサーバのホスティングは、Sambaチームによって、Samba-3ではサポートされないとみなされる。</p></div><div class="sect2" title="複数仮想サーバの性質(Personalities)"><div class="titlepage"><div><div><h3 class="title"><a name="id2697879"></a>複数仮想サーバの性質(Personalities)</h3></div></div></div><p><a class="indexterm" name="id2697887"></a><a class="indexterm" name="id2697894"></a><a class="indexterm" name="id2697901"></a>Sambaは、固有の設定を持つ、複数の仮想サーバをホスティングできる能力がある。これは、すべてのホスティングされる、個別設定に共通な<code class="filename">smb.conf</code>ファイルの設定で達成される。各(仮想)サーバの個別設定は、固有の<a class="link" href="smb.conf.5.html#NETBIOSALIAS" target="_top">netbios alias</a>でホスティングされ、おのおのは、固有の異なった<a class="link" href="smb.conf.5.html#%5BGLOBAL%5D" target="_top">[global]</a>セクションを持つ。各サーバはサービスとメタサービスのために固有のセクションを持っても良い。</p><p><a class="indexterm" name="id2697954"></a><a class="indexterm" name="id2697960"></a><a class="indexterm" name="id2697967"></a>複数の仮想サーバをホスティングするとき、おのおのには個別設定が出来、おのおのは異なったワークグループにいる。プライマリサーバのみ、ドメインメンバかドメインコントローラになれる。個別設定は、動作している<a class="link" href="smb.conf.5.html#SECURITY" target="_top">security</a>モードと、使っている<a class="link" href="smb.conf.5.html#NETBIOSALIASES" target="_top">netbios aliases</a>とそれに対して定義された<a class="link" href="smb.conf.5.html#WORKGROUP" target="_top">workgroup</a>の組み合わせによって定義される。</p><p><a class="indexterm" name="id2698023"></a><a class="indexterm" name="id2698030"></a><a class="indexterm" name="id2698038"></a><a class="indexterm" name="id2698045"></a><a class="indexterm" name="id2698052"></a><a class="indexterm" name="id2698059"></a>この設定スタイルは、NetBIOS名を使うか、NetBIOS名なしのTCPサービスのSMBを使う事が出来る。もしもNetBIOSモード(最も一般的な方法)で動かす場合、パラメータ<a class="link" href="smb.conf.5.html#SMBPORTS" target="_top">smb ports = 139</a>はプライマリの<code class="filename">smb.conf</code>ファイル中に指定すべきである。それを間違うと、SambaはTCPポート445で動作することになり、最も良い場合で問題のある動作、最悪の場合は、プライマリの<code class="filename">smb.conf</code>ファイルで指定された機能を得ることができるのみである。TCPポート139のみを使うNetBIOS over TCP/IPの使用は、<code class="literal">%L</code>マクロの使用が完全に有効になる事を意味する。もしも<a class="link" href="smb.conf.5.html#SMBPORTS" target="_top">smb ports = 139</a>が指定されていない場合(既定値では<em class="parameter"><code>445 139</code></em>)か、もしもこのパラメータの値が<em class="parameter"><code>139 445</code></em>の時は、<code class="literal">%L</code>は無効である。</p><p><a class="indexterm" name="id2698144"></a><a class="indexterm" name="id2698151"></a><a class="indexterm" name="id2698158"></a><a class="indexterm" name="id2698165"></a>各サーバの個別設定で、ポート445を使う(NetBIOSなしのSMBポート)複数のサーバをホスティングするのは可能で、この場合、(IPアドレスによって)分離されたサーバを識別するために、<code class="literal">%i</code>が使える。おのおのは固有の<a class="link" href="smb.conf.5.html#SECURITY" target="_top">security</a>モードを持つ。仮想サーバを作成するために、<a class="link" href="smb.conf.5.html#INTERFACES" target="_top">interfaces</a>と<a class="link" href="smb.conf.5.html#BINDINTERFACESONLY" target="_top">bind interfaces only</a>を<a class="link" href="smb.conf.5.html#NETBIOSNAME" target="_top">netbios name</a>に追加する必要があるかもしれない。この方法は、TCPポート139のみを使うNetBIOS名を使うよりもより複雑であると考えられる。</p><p><a class="indexterm" name="id2698240"></a>スタンドアロンでユーザモードのセキュリティで動くSambaと置き換え対象の、読み取り専用Windows 95ファイルサーバからなる例題環境を考えてみよう。新しいPCでWindows 95マシンを置き換える代わりに、Sambaサーバ上でホスティングされる読み取り専用匿名ファイルサーバとしてこのサーバを追加することが可能である。以下はそれに必要ないくつかのパラメータである:</p><p>Sambaサーバの名前は<code class="literal">ELASTIC</code>で、そのワークグループ名は<code class="literal">ROBINSNEST</code>である。CDROMサーバの名前は<code class="literal">CDSERVER</code>で、そのワークグループ名は<code class="literal">ARTSDEPT</code>である。出来うる実装は以下の通り:</p><p><a class="indexterm" name="id2698291"></a><a class="indexterm" name="id2698298"></a><a class="indexterm" name="id2698304"></a><a class="indexterm" name="id2698311"></a>マスタサーバに対する<code class="filename">smb.conf</code>ファイルは<a class="link" href="cfgsmarts.html#elastic" title="Example 34.1. Elasticのsmb.confファイル">Elasticのsmb.confファイル</a>である。このファイルは<code class="filename">/etc/samba</code>中に置かれる。<span class="application">nmbd</span> と <span class="application">smbd</span> デーモンのみが必要である。サーバを起動すると、Windowsのネットワークコンピュータ中の、ワークグループ<code class="literal">ROBINSNEST</code>配下に<code class="literal">ELASTIC</code>が現れる。もしも、このサーバにアクセスするWindowsクライアントがまたワークグループ<code class="literal">ROBINSNEST</code>中にいて、より信頼性の高いブラウジングを行わさせるのに、これは便利である。</p><div class="example"><a name="elastic"></a><p class="title"><b>Example 34.1. Elasticのsmb.confファイル</b></p><div class="example-contents"><table border="0" summary="Simple list" class="simplelist"><tr><td># Globalパラメータ</td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[global]</code></em></td></tr><tr><td><a class="indexterm" name="id2698408"></a><em class="parameter"><code>workgroup = ROBINSNEST</code></em></td></tr><tr><td><a class="indexterm" name="id2698420"></a><em class="parameter"><code>netbios name = ELASTIC</code></em></td></tr><tr><td><a class="indexterm" name="id2698432"></a><em class="parameter"><code>netbios aliases = CDSERVER</code></em></td></tr><tr><td><a class="indexterm" name="id2698444"></a><em class="parameter"><code>smb ports = 139</code></em></td></tr><tr><td><a class="indexterm" name="id2698456"></a><em class="parameter"><code>printcap name = cups</code></em></td></tr><tr><td><a class="indexterm" name="id2698467"></a><em class="parameter"><code>disable spoolss = Yes</code></em></td></tr><tr><td><a class="indexterm" name="id2698479"></a><em class="parameter"><code>show add printer wizard = No</code></em></td></tr><tr><td><a class="indexterm" name="id2698491"></a><em class="parameter"><code>printing = cups</code></em></td></tr><tr><td><a class="indexterm" name="id2698503"></a><em class="parameter"><code>include = /etc/samba/smb-%L.conf</code></em></td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[homes]</code></em></td></tr><tr><td><a class="indexterm" name="id2698524"></a><em class="parameter"><code>comment = Home Directories</code></em></td></tr><tr><td><a class="indexterm" name="id2698536"></a><em class="parameter"><code>valid users = %S</code></em></td></tr><tr><td><a class="indexterm" name="id2698547"></a><em class="parameter"><code>read only = No</code></em></td></tr><tr><td><a class="indexterm" name="id2698559"></a><em class="parameter"><code>browseable = No</code></em></td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[office]</code></em></td></tr><tr><td><a class="indexterm" name="id2698579"></a><em class="parameter"><code>comment = Data</code></em></td></tr><tr><td><a class="indexterm" name="id2698591"></a><em class="parameter"><code>path = /data</code></em></td></tr><tr><td><a class="indexterm" name="id2698602"></a><em class="parameter"><code>read only = No</code></em></td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[printers]</code></em></td></tr><tr><td><a class="indexterm" name="id2698623"></a><em class="parameter"><code>comment = All Printers</code></em></td></tr><tr><td><a class="indexterm" name="id2698635"></a><em class="parameter"><code>path = /var/spool/samba</code></em></td></tr><tr><td><a class="indexterm" name="id2698646"></a><em class="parameter"><code>create mask = 0600</code></em></td></tr><tr><td><a class="indexterm" name="id2698658"></a><em class="parameter"><code>guest ok = Yes</code></em></td></tr><tr><td><a class="indexterm" name="id2698670"></a><em class="parameter"><code>printable = Yes</code></em></td></tr><tr><td><a class="indexterm" name="id2698681"></a><em class="parameter"><code>use client driver = Yes</code></em></td></tr><tr><td><a class="indexterm" name="id2698693"></a><em class="parameter"><code>browseable = No</code></em></td></tr></table></div></div><br class="example-break"><p><a class="indexterm" name="id2698708"></a>CDROMサーバの設定ファイルは<a class="link" href="cfgsmarts.html#cdserver" title="Example 34.2. CDROMサーバのsmb-cdserver.confファイル">CDROMサーバのsmb-cdserver.confファイル</a>である。このファイルは<code class="filename">smb-cdserver.conf</code>という名前で、<code class="filename">/etc/samba</code>ディレクトリに置かれる。ワークグループ<code class="literal">ARTSDEPT</code>中にいるマシンはサーバを自由にブラウズできる。</p><div class="example"><a name="cdserver"></a><p class="title"><b>Example 34.2. CDROMサーバのsmb-cdserver.confファイル</b></p><div class="example-contents"><table border="0" summary="Simple list" class="simplelist"><tr><td># Globalパラメータ</td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[global]</code></em></td></tr><tr><td><a class="indexterm" name="id2698778"></a><em class="parameter"><code>workgroup = ARTSDEPT</code></em></td></tr><tr><td><a class="indexterm" name="id2698790"></a><em class="parameter"><code>netbios name = CDSERVER</code></em></td></tr><tr><td><a class="indexterm" name="id2698801"></a><em class="parameter"><code>map to guest = Bad User</code></em></td></tr><tr><td><a class="indexterm" name="id2698813"></a><em class="parameter"><code>guest ok = Yes</code></em></td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[carousel]</code></em></td></tr><tr><td><a class="indexterm" name="id2698834"></a><em class="parameter"><code>comment = CDROM Share</code></em></td></tr><tr><td><a class="indexterm" name="id2698846"></a><em class="parameter"><code>path = /export/cddata</code></em></td></tr><tr><td><a class="indexterm" name="id2698857"></a><em class="parameter"><code>read only = Yes</code></em></td></tr><tr><td><a class="indexterm" name="id2698869"></a><em class="parameter"><code>guest ok = Yes</code></em></td></tr></table></div></div><br class="example-break"><p><a class="indexterm" name="id2698884"></a><a class="indexterm" name="id2698891"></a><a class="indexterm" name="id2698898"></a><a class="indexterm" name="id2698905"></a>2つのサーバは異なったりソースを持ち、分離されたワークグループ内にいる。サーバ<code class="literal">ELASTIC</code>は、そのホストサーバ上に適切なアカウントを持つユーザからのみアクセスできる。すべてのユーザは、<code class="filename">/export/cddata</code>ディレクトリ中に格納されるCDROMデータにアクセスできる。ファイルシステムのアクセス許可は、<code class="literal">その他</code>ユーザがディレクトリとその内容に対して読み取り専用アクセスを設定すべきである。ファイルはrootが所有できる(nobodyアカウント以外の任意のユーザでも)。</p></div><div class="sect2" title="複数の仮想サーバホスティング"><div class="titlepage"><div><div><h3 class="title"><a name="id2698946"></a>複数の仮想サーバホスティング</h3></div></div></div><p><a class="indexterm" name="id2698955"></a><a class="indexterm" name="id2698962"></a><a class="indexterm" name="id2698969"></a>この例では、要求されていることは、<code class="literal">MIDEARTH</code>というドメインに対するプライマリドメインコントローラに対するものである。PDCは<code class="literal">MERLIN</code>である。その他のマシンとして<code class="literal">SAURON</code>が必要とされている。各マシンはそれぞれ固有の共有のみ持つ。両マシンは同じドメイン/ワークグループに属している。</p><p><a class="indexterm" name="id2699005"></a><a class="indexterm" name="id2699012"></a><a class="indexterm" name="id2699019"></a>マスタの<code class="filename">smb.conf</code>ファイルは<a class="link" href="cfgsmarts.html#mastersmbc" title="Example 34.3. マスタのsmb.conf ファイルのグローバルセクション">マスタのsmb.conf ファイルのグローバルセクション</a>である。各サーバの共有情報を指定する2つのファイルは、<a class="link" href="cfgsmarts.html#merlinsmbc" title="Example 34.4. smb-merlin.confファイルの共有セクション">smb-merlin.confファイルの共有セクション</a>と<a class="link" href="cfgsmarts.html#sauronsmbc" title="Example 34.5. smb-sauron.confファイルの共有セクション">smb-sauron.confファイルの共有セクション</a>である。3つのファイルはすべて<code class="filename">/etc/samba</code>ディレクトリに置かれる。</p><div class="example"><a name="mastersmbc"></a><p class="title"><b>Example 34.3. マスタのsmb.conf ファイルのグローバルセクション</b></p><div class="example-contents"><table border="0" summary="Simple list" class="simplelist"><tr><td># グローバルパラメータ</td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[global]</code></em></td></tr><tr><td><a class="indexterm" name="id2699100"></a><em class="parameter"><code>workgroup = MIDEARTH</code></em></td></tr><tr><td><a class="indexterm" name="id2699112"></a><em class="parameter"><code>netbios name = MERLIN</code></em></td></tr><tr><td><a class="indexterm" name="id2699124"></a><em class="parameter"><code>netbios aliases = SAURON</code></em></td></tr><tr><td><a class="indexterm" name="id2699136"></a><em class="parameter"><code>passdb backend = tdbsam</code></em></td></tr><tr><td><a class="indexterm" name="id2699148"></a><em class="parameter"><code>smb ports = 139</code></em></td></tr><tr><td><a class="indexterm" name="id2699159"></a><em class="parameter"><code>syslog = 0</code></em></td></tr><tr><td><a class="indexterm" name="id2699171"></a><em class="parameter"><code>printcap name = CUPS</code></em></td></tr><tr><td><a class="indexterm" name="id2699182"></a><em class="parameter"><code>show add printer wizard = No</code></em></td></tr><tr><td><a class="indexterm" name="id2699195"></a><em class="parameter"><code>add user script = /usr/sbin/useradd -m '%u'</code></em></td></tr><tr><td><a class="indexterm" name="id2699207"></a><em class="parameter"><code>delete user script = /usr/sbin/userdel -r '%u'</code></em></td></tr><tr><td><a class="indexterm" name="id2699219"></a><em class="parameter"><code>add group script = /usr/sbin/groupadd '%g'</code></em></td></tr><tr><td><a class="indexterm" name="id2699231"></a><em class="parameter"><code>delete group script = /usr/sbin/groupdel '%g'</code></em></td></tr><tr><td><a class="indexterm" name="id2699243"></a><em class="parameter"><code>add user to group script = /usr/sbin/usermod -G '%g' '%u'</code></em></td></tr><tr><td><a class="indexterm" name="id2699256"></a><em class="parameter"><code>add machine script = /usr/sbin/useradd -s /bin/false -d /var/lib/nobody '%u'</code></em></td></tr><tr><td><a class="indexterm" name="id2699269"></a><em class="parameter"><code>logon script = scripts\login.bat</code></em></td></tr><tr><td><a class="indexterm" name="id2699281"></a><em class="parameter"><code>logon path =  </code></em></td></tr><tr><td><a class="indexterm" name="id2699292"></a><em class="parameter"><code>logon drive = X:</code></em></td></tr><tr><td><a class="indexterm" name="id2699304"></a><em class="parameter"><code>domain logons = Yes</code></em></td></tr><tr><td><a class="indexterm" name="id2699316"></a><em class="parameter"><code>preferred master = Yes</code></em></td></tr><tr><td><a class="indexterm" name="id2699328"></a><em class="parameter"><code>wins support = Yes</code></em></td></tr><tr><td><a class="indexterm" name="id2699339"></a><em class="parameter"><code>printing = CUPS</code></em></td></tr><tr><td><a class="indexterm" name="id2699351"></a><em class="parameter"><code>include = /etc/samba/smb-%L.conf</code></em></td></tr></table></div></div><br class="example-break"><div class="example"><a name="merlinsmbc"></a><p class="title"><b>Example 34.4. smb-merlin.confファイルの共有セクション</b></p><div class="example-contents"><table border="0" summary="Simple list" class="simplelist"><tr><td># グローバルパラメータ</td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[global]</code></em></td></tr><tr><td><a class="indexterm" name="id2699393"></a><em class="parameter"><code>workgroup = MIDEARTH</code></em></td></tr><tr><td><a class="indexterm" name="id2699405"></a><em class="parameter"><code>netbios name = MERLIN</code></em></td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[homes]</code></em></td></tr><tr><td><a class="indexterm" name="id2699426"></a><em class="parameter"><code>comment = Home Directories</code></em></td></tr><tr><td><a class="indexterm" name="id2699438"></a><em class="parameter"><code>valid users = %S</code></em></td></tr><tr><td><a class="indexterm" name="id2699449"></a><em class="parameter"><code>read only = No</code></em></td></tr><tr><td><a class="indexterm" name="id2699461"></a><em class="parameter"><code>browseable = No</code></em></td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[office]</code></em></td></tr><tr><td><a class="indexterm" name="id2699481"></a><em class="parameter"><code>comment = Data</code></em></td></tr><tr><td><a class="indexterm" name="id2699493"></a><em class="parameter"><code>path = /data</code></em></td></tr><tr><td><a class="indexterm" name="id2699505"></a><em class="parameter"><code>read only = No</code></em></td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[netlogon]</code></em></td></tr><tr><td><a class="indexterm" name="id2699525"></a><em class="parameter"><code>comment = NETLOGON</code></em></td></tr><tr><td><a class="indexterm" name="id2699537"></a><em class="parameter"><code>path = /var/lib/samba/netlogon</code></em></td></tr><tr><td><a class="indexterm" name="id2699549"></a><em class="parameter"><code>read only = Yes</code></em></td></tr><tr><td><a class="indexterm" name="id2699560"></a><em class="parameter"><code>browseable = No</code></em></td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[printers]</code></em></td></tr><tr><td><a class="indexterm" name="id2699581"></a><em class="parameter"><code>comment = All Printers</code></em></td></tr><tr><td><a class="indexterm" name="id2699592"></a><em class="parameter"><code>path = /var/spool/samba</code></em></td></tr><tr><td><a class="indexterm" name="id2699604"></a><em class="parameter"><code>printable = Yes</code></em></td></tr><tr><td><a class="indexterm" name="id2699616"></a><em class="parameter"><code>use client driver = Yes</code></em></td></tr><tr><td><a class="indexterm" name="id2699628"></a><em class="parameter"><code>browseable = No</code></em></td></tr></table></div></div><br class="example-break"><div class="example"><a name="sauronsmbc"></a><p class="title"><b>Example 34.5. smb-sauron.confファイルの共有セクション</b></p><div class="example-contents"><table border="0" summary="Simple list" class="simplelist"><tr><td># グローバルパラメータ</td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[global]</code></em></td></tr><tr><td><a class="indexterm" name="id2699670"></a><em class="parameter"><code>workgroup = MIDEARTH</code></em></td></tr><tr><td><a class="indexterm" name="id2699682"></a><em class="parameter"><code>netbios name = SAURON</code></em></td></tr><tr><td> </td></tr><tr><td><em class="parameter"><code>[www]</code></em></td></tr><tr><td><a class="indexterm" name="id2699702"></a><em class="parameter"><code>comment = Web Pages</code></em></td></tr><tr><td><a class="indexterm" name="id2699714"></a><em class="parameter"><code>path = /srv/www/htdocs</code></em></td></tr><tr><td><a class="indexterm" name="id2699726"></a><em class="parameter"><code>read only = No</code></em></td></tr></table></div></div><br class="example-break"></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="largefile.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="optional.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="migration.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 33. 大きなディレクトリの取扱い </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Part IV. マイグレーションとアップグレード</td></tr></table></div></body></html>