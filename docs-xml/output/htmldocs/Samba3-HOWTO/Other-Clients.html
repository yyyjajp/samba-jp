<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 44. Samba と他の CIFS クライアント</title><link rel="stylesheet" href="../samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="公式のSamba 3.2.x HOWTOとリファレンスガイド"><link rel="up" href="Appendix.html" title="Part VI. Reference Section"><link rel="prev" href="Portability.html" title="Chapter 43. 移植性"><link rel="next" href="speed.html" title="Chapter 45. Sambaパフォーマンスチューニング"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 44. Samba と他の CIFS クライアント</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="Portability.html">Prev</a> </td><th width="60%" align="center">Part VI. Reference Section</th><td width="20%" align="right"> <a accesskey="n" href="speed.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 44. Samba と他の CIFS クライアント"><div class="titlepage"><div><div><h2 class="title"><a name="Other-Clients"></a>Chapter 44. Samba と他の CIFS クライアント</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Jelmer</span> <span class="othername">R.</span> <span class="surname">Vernooij</span></h3><div class="affiliation"><span class="orgname">The Samba Team<br></span><div class="address"><p><code class="email"><<a class="email" href="mailto:jelmer@samba.org">jelmer@samba.org</a>></code></p></div></div></div></div><div><div class="author"><h3 class="author"><span class="firstname">John</span> <span class="othername">H.</span> <span class="surname">Terpstra</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><code class="email"><<a class="email" href="mailto:jht@samba.org">jht@samba.org</a>></code></p></div></div></div></div><div><div class="author"><h3 class="author"><span class="firstname">Dan</span> <span class="surname">Shearer</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><code class="email"><<a class="email" href="mailto:dan@samba.org">dan@samba.org</a>></code></p></div></div></div></div><div><div class="author"><h3 class="author"><span class="firstname">Jim</span> <span class="surname">McDonough</span></h3><span class="contrib">OS/2</span> <div class="affiliation"><span class="orgname">IBM<br></span><div class="address"><p><code class="email"><<a class="email" href="mailto:jmcd@us.ibm.com">jmcd@us.ibm.com</a>></code></p></div></div></div></div><div><p class="pubdate">5 Mar 2001</p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="Other-Clients.html#id2714950">Macintoshクライアント</a></span></dt><dt><span class="sect1"><a href="Other-Clients.html#id2715052">OS2 Client</a></span></dt><dd><dl><dt><span class="sect2"><a href="Other-Clients.html#id2715058">OS/2 Warp Connect または OS/2 Warp 4の設定</a></span></dt><dt><span class="sect2"><a href="Other-Clients.html#id2715189">他のOS/2バージョンでの設定</a></span></dt><dt><span class="sect2"><a href="Other-Clients.html#id2715249">OS/2クライアント用のプリンタドライバのダウンロード</a></span></dt></dl></dd><dt><span class="sect1"><a href="Other-Clients.html#id2715362">Windows for Workgroups</a></span></dt><dd><dl><dt><span class="sect2"><a href="Other-Clients.html#id2715368">Microsoftからの最新版 TCP/IPスタック</a></span></dt><dt><span class="sect2"><a href="Other-Clients.html#id2715457">パスワード変更後に.pwlファイルの削除</a></span></dt><dt><span class="sect2"><a href="Other-Clients.html#id2715496">Windows for Workgroupsにおけるパスワードの取り扱い方法の設定</a></span></dt><dt><span class="sect2"><a href="Other-Clients.html#id2715560">パスワードにおける大文字小文字の区別</a></span></dt><dt><span class="sect2"><a href="Other-Clients.html#id2715597">既定値のプロトコルとしてTCP/IPの使用</a></span></dt><dt><span class="sect2"><a href="Other-Clients.html#speedimpr">処理速度の改善</a></span></dt></dl></dd><dt><span class="sect1"><a href="Other-Clients.html#id2715670">Windows 95/98</a></span></dt><dd><dl><dt><span class="sect2"><a href="Other-Clients.html#id2715754">処理速度の改善</a></span></dt></dl></dd><dt><span class="sect1"><a href="Other-Clients.html#id2715778">Windows 2000 サービスパック 2</a></span></dt><dt><span class="sect1"><a href="Other-Clients.html#id2716007">Windows NT 3.1</a></span></dt></dl></div><p>この章では、クライアント固有の情報について記述している。</p><div class="sect1" title="Macintoshクライアント"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2714950"></a>Macintoshクライアント</h2></div></div></div><p><a class="indexterm" name="id2714959"></a>もちろん対応している。<a class="ulink" href="http://www.thursby.com/" target="_top">Thursby</a>は、<a class="ulink" href="http://www.thursby.com/products/dave.html" target="_top">DAVE</a>というCIFS client/serverを提供している。これはWindows 95、Windows NT/200x/XPとSambaに対して、互換性についてテストされている。これを書いている時点で、DAVEはバージョン 5.1である。この製品についての情報はThursbyのWebサイトを参照してほしい。</p><p> <a class="indexterm" name="id2714993"></a><a class="indexterm" name="id2715000"></a>ある種のUNIXといくつかの商用のものに対する、2つのAppleTalkの自由な実装を含む代替品がある。これらの製品はMacintocth上で追加のサポートなしに、Macintoshユーザにネイティブなファイルサービスと印刷サービスを動かすことが出来る。2つの自由な実装は、<a class="ulink" href="http://www.umich.edu/~rsug/netatalk/" target="_top">Netatalk</a>と<a class="ulink" href="http://www.cs.mu.oz.au/appletalk/atalk.html" target="_top">CAP</a>である。SambaがMicrosoft Windows ユーザに対してサービスを提供するのに対し、それらのパッケージははMacのユーザにサービスを提供する。これらのパッケージ、SambaとLinux(と他のUNIXベースのシステム)についての詳細は、<a class="ulink" href="http://www.eats.com/linux_mac_win.html" target="_top">http://www.eats.com/linux_mac_win.html.</a>を参照のこと。</p><p>Macintoshの新しいバージョン (Mac OS X) はSambaが含まれる</p></div><div class="sect1" title="OS2 Client"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2715052"></a>OS2 Client</h2></div></div></div><div class="sect2" title="OS/2 Warp Connect または OS/2 Warp 4の設定"><div class="titlepage"><div><div><h3 class="title"><a name="id2715058"></a>OS/2 Warp Connect または OS/2 Warp 4の設定</h3></div></div></div><p>基本的に以下の3つのコンポーネントが必要である:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The File and Print Client (IBM peer)</p></li><li class="listitem"><p>TCP/IP (Internet support) </p></li><li class="listitem"><p>The <span class="quote">“<span class="quote">NetBIOS over TCP/IP</span>”</span> driver (TCPBEUI)</p></li></ul></div><p>Warpマニュアル中で説明されているblankシステム上に、ベースOSと共に		最初の2つを一緒にインストールする。もしもWarpがすでにインストールされて		いるが、ネットワークサポートを使いたいならば、<span class="quote">“<span class="quote">System Setup</span>”</span>		フォルダ中の<span class="quote">“<span class="quote">Selective Install for Networking</span>”</span>オブジェクトを		使うこと。</p><p>マニュアルに書いていない、オンラインのドキュメントにもほとんど		書いていない、<span class="quote">“<span class="quote">NetBIOS over TCP/IP</span>”</span>を追加する。		<code class="literal">MPTS.EXE</code>を開始し、<span class="guiicon">OK</span>をクリックし、		<span class="guimenu">Configure LAPS</span>をクリックし、		<span class="guilabel">Protocols</span>中の		<span class="guimenu">IBM OS/2 NETBIOS OVER TCP/IP</span>をクリックする。		この行は次に<span class="guilabel">Current Configuration</span>に移動する。		この行を選択し、<span class="guimenuitem">Change number</span>をクリックし、		値を0から1に増やす。この設定を保存する。</p><p>もしも、Sambaサーバがローカルサブネット上にない場合、		<span class="guimenu">Names List</span>にそれらのサーバのIP名とアドレスを		追加するか、WINSサーバ(IBMとRFCの用語ではNetBIOS Nameserver)を指定する		事も可能である。Warp Connectでは、Warp 4と同じレベルにするために、		<code class="constant">IBM Peer</code>に対するアップデートをダウンロードする		必要があるかもしれない。IBM OS/2 Warp Webページを参照のこと。</p></div><div class="sect2" title="他のOS/2バージョンでの設定"><div class="titlepage"><div><div><h3 class="title"><a name="id2715189"></a>他のOS/2バージョンでの設定</h3></div></div></div><p>この節では、OS/2 Warp 3(Connectでない)、OS/2 1.2、1.3、		  あるいは2.xの設定について記述する。</p><p>		<a class="ulink" href="ftp://ftp.microsoft.com/BusSys/Clients/LANMAN.OS2/" target="_top">                ftp://ftp.microsoft.com/BusSys/Clients/LANMAN.OS2/</a>にある、		OS/2用の、自由に使えるMicrosoft LAN Manager 2.2cクライアントを使うことが		できる。nutshellで、OS/2 ブートパーティションのrootディレクトリ中にある		<code class="filename">\OS2VER</code>ファイルを編集し、クライアントインストールの		前に、以下の行を追加する:</p><pre class="programlisting">		20=setup.exe		20=netwksta.sys		20=netvdd.sys		</pre><p>また、バグだらけなので同梱されているNE2000ドライバを使ってはならない。		その代わりに、		<a class="ulink" href="ftp://ftp.cdrom.com/pub/os2/network/ndis/" target="_top">                ftp://ftp.cdrom.com/pub/os2/network/ndis/</a>からNE2000かNS2000		ドライバをダウンロードする。		</p></div><div class="sect2" title="OS/2クライアント用のプリンタドライバのダウンロード"><div class="titlepage"><div><div><h3 class="title"><a name="id2715249"></a>OS/2クライアント用のプリンタドライバのダウンロード</h3></div></div></div><p>誰でもが書き込み可能な、<em class="parameter"><code>[PRINTDRV]</code></em>という		共有を作成する。そこに使用しているOS/2ドライバファイルをコピーする。		<code class="filename">.EA_</code>ファイルは引き続き分離しなければならないので、		オリジナルのインストールファイルを使う必要があり、OS/2システムからの		インストールされたドライバをコピーしてはいけない。</p><p>そのプリンタに対し、NTドライバを最初にインストールする。次に、		使用している<code class="filename">smb.conf</code>に、パラメータ		<a class="link" href="smb.conf.5.html#OS2DRIVERMAP" target="_top">os2 driver map</a>		を追加する。次に、<em class="replaceable"><code>filename</code></em>で指定されるファイル中に、		以下のようにNTドライバ名をOS/2ドライバ名にマップするように記述する:</p><p><em class="parameter"><code><em class="replaceable"><code>nt driver name</code></em> = <em class="replaceable"><code>os2 driver name</code></em>.<em class="replaceable"><code>device name</code></em></code></em>, e.g.,</p><p><em class="parameter"><code>		HP LaserJet 5L = LASERJET.HP LaserJet 5L</code></em></p><p>このファイル中にマップされた複数のドライバを定義できる。</p><p>もしも、OS/2ドライバ名のみを指定し、デバイス名を指定しない場合、		ドライバを最初にダウンロードするときには、実際にファイルをダウンロード		するが、OS/2クライアントは、ドライバが有効でないと表示する。2回目に		ダウンロードするときには動く。これは、マッピングにデバイス名を追加する		ことにより簡単に解決し、その後、最初のダウンロード要求で動くようになる。		</p></div></div><div class="sect1" title="Windows for Workgroups"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2715362"></a>Windows for Workgroups</h2></div></div></div><div class="sect2" title="Microsoftからの最新版 TCP/IPスタック"><div class="titlepage"><div><div><h3 class="title"><a name="id2715368"></a>Microsoftからの最新版 TCP/IPスタック</h3></div></div></div><p>もしもWindows for Workgroupsを使うのであれば、Microsoftから最新のTCP/IPスタックを使う。古いTCP/IPスタックにはたくさんのバグがある。</p><p> MicrosoftはそのTCP/IP 32ビットVxDドライバの増分更新を公開している。最新のリリースは、ftp.microsoft.comの<code class="filename">/Softlib/MSLFILES/TCP32B.EXE</code>にある。そこには修正された問題について説明してあるupdate.txtがある。そこには更新された<code class="filename">WINSOCK.DLL</code>, <code class="filename">TELNET.EXE</code>, <code class="filename">WSOCK.386</code>,<code class="filename">VNBT.386</code>, <code class="filename">WSTCP.386</code>, <code class="filename">TRACERT.EXE</code>,<code class="filename">NETSTAT.EXE</code>,<code class="filename">NBTSTAT.EXE</code>ファイルがある。</p><p>このパッチについての詳細情報は、<a class="ulink" href="http://support.microsoft.com/kb/q99891/" target="_top">Knowledge Base article 99891</a>にある。</p></div><div class="sect2" title="パスワード変更後に.pwlファイルの削除"><div class="titlepage"><div><div><h3 class="title"><a name="id2715457"></a>パスワード変更後に.pwlファイルの削除</h3></div></div></div><p>Windows for Workgroupsは、パスワード管理の出来が悪い。UNIXマシンかPCのどちらかでパスワードを変更した時、最も安全にするにはWindowsディレクトリ中の.pwlファイルを削除することである。PCはそのファイルが見つからないと警告を出すが、間もなく、新しいパスワードが入力できるようになる。</p><p> もしもこれをしないと、新しいものを入れても、Windows for Workgroupsは古いパスワードを記憶してそれを使うようになるかもしれない。</p><p> しばしばWindows for Workgroupsはダイアログボックス中で入力したパスワードを完全に無視する。</p></div><div class="sect2" title="Windows for Workgroupsにおけるパスワードの取り扱い方法の設定"><div class="titlepage"><div><div><h3 class="title"><a name="id2715496"></a>Windows for Workgroupsにおけるパスワードの取り扱い方法の設定</h3></div></div></div><p><a class="indexterm" name="id2715506"></a>WFS 3.11ディスクセットの最後のディスク(8枚目)に、<code class="filename">admincfg.exe</code>というプログラムがある。これをインストールするためには、<strong class="userinput"><code>EXPAND A:\ADMINCFG.EX_ C:\WINDOWS\ADMINCFG.EXE</code></strong>と入力する。次に、<span class="application">Program Manager</span>の<span class="guimenu">New</span>経由でアイコンを追加する。このプログラムは、どのようにWFWがパスワードを扱うか、パスワードのキャッシュを無効にするなどを、<a class="link" href="smb.conf.5.html#SECURITY" target="_top">security = user</a>用に制御する。</p></div><div class="sect2" title="パスワードにおける大文字小文字の区別"><div class="titlepage"><div><div><h3 class="title"><a name="id2715560"></a>パスワードにおける大文字小文字の区別</h3></div></div></div><p>Windows for Workgroupsはサーバに送る前にパスワードをすべて大文字にする。しかし、UNIXのパスワードは大文字小文字を区別する。チェックするときにどの文字をSambaが大文字として試すべきかを指定するための、<a class="link" href="smb.conf.5.html#PASSWORDLEVEL" target="_top">password level</a>上の<code class="filename">smb.conf</code>情報をチェックすること。</p></div><div class="sect2" title="既定値のプロトコルとしてTCP/IPの使用"><div class="titlepage"><div><div><h3 class="title"><a name="id2715597"></a>既定値のプロトコルとしてTCP/IPの使用</h3></div></div></div><p>印刷キューの通知をサポートするために、Windows for Workgroups下でTCP/IPを既定値のプロトコルとして使う事が必要である。もしもNetBEUIを既定値のままにすると、あるシステム上では印刷キューの通知がうまくいかない。これはおそらくWindows for Workgroupsのバグであろう。</p></div><div class="sect2" title="処理速度の改善"><div class="titlepage"><div><div><h3 class="title"><a name="speedimpr"></a>処理速度の改善</h3></div></div></div><p>ある人によると、Windows for Workgroupsの中にある<code class="filename">SYSTEM.INI</code>ファイルの<em class="parameter"><code>[MSTCP]</code></em>セクション中に<em class="parameter"><code>DefaultRcvWindow</code></em>の設定を3072にすると、速度が大幅に改善したと報告している。</p><p>実際にDefaultRcvWindowについて実験してみたら、より大きな値(16384かそれ以上)の値を使うとより処理速度が改善した。他の人は、3072より大きな値は、かえって大幅にスピードが落ちると報告している。ある人の報告では、3072から8192間での間で、30の倍数の時にスピードが落ちるというものもあった。</p></div></div><div class="sect1" title="Windows 95/98"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2715670"></a>Windows 95/98</h2></div></div></div><p>Windows 95 OEM SR2を使う場合、以下のアップデートはSambaを使う時に推奨される。<a class="link" href="Other-Clients.html#speedimpr" title="処理速度の改善">処理速度の改善</a>中で説明した変更は、アップデートをインストールした後に影響するだろう。</p><p> ここで説明しているものよりもたくさんのアップデートがある。Windows 95の特定のバージョン用に現在用意されているアップデートについて、MicrosoftのWebサイトを参照すること。</p><table border="0" summary="Simple list" class="simplelist"><tr><td>Kernel Update: KRNLUPD.EXE</td></tr><tr><td>Ping Fix: PINGUPD.EXE</td></tr><tr><td>RPC Update: RPCRTUPD.EXE</td></tr><tr><td>TCP/IP Update: VIPUPD.EXE</td></tr><tr><td>Redirector Update: VRDRUPD.EXE</td></tr></table><p>また、もしも<span class="application">MS Outlook</span>を使っている場合、<code class="literal">OLEUPD.EXE</code>の修正をインストールする事が望ましい。この修正は、Outlookを終了する時に長い時間かかっていることを改善するかもしれず、ネットワークコンピュータサービスにアクセスする時に目に見える改善がわかるかもしれない。</p><div class="sect2" title="処理速度の改善"><div class="titlepage"><div><div><h3 class="title"><a name="id2715754"></a>処理速度の改善</h3></div></div></div><p>Windows 95 TCP/IPレジストリの設定を修正するとより良いパフォーマンスが得られる。インターネットから入手した<code class="literal">MTUSPEED.exe</code>というプログラムを使っている。自由に使えるこの手のタイプのユーティリティは数多くある。</p></div></div><div class="sect1" title="Windows 2000 サービスパック 2"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2715778"></a>Windows 2000 サービスパック 2</h2></div></div></div><p> Windows 2000 SP2には数多くの不満な点があり、その1つは、Windowsドメイン中でWindows 2000 SP2クライアントに対してユーザプロファイルをホスティングするために、Sambaサーバを使う時にのみ現れる。これは、Sambaがドメインのメンバであることを仮定するが、もしもそうでない場合にたぶんおそらく現れるだろう。</p><p> Windows 2000 SP2クライアントに正しくプロファイルを提供するために(PDCとして動作していない場合)、Sambaはローミングプロファイルを格納するファイル共有のために、<a class="link" href="smb.conf.5.html#NTACLSUPPORT" target="_top">nt acl support = no</a>を設定しなければならない。もしもこれが行われていない場合、Windows 2000 SP2クライアントはプロファイルにアクセス出来ないと、警告を出し(Access Denied)、その複数のコピーをディスク上に作成する(DOMAIN.user.001,DOMAIN.user.002など)。このオプションについては、<code class="filename">smb.conf</code>のマニュアルページを参照のこと。また、<a class="link" href="smb.conf.5.html#NTACLSUPPORT" target="_top">nt acl support</a>パラメータが、Samba 2.2.2より前のリリースでは、正式にはグローバルパラメータであった事にも注意。</p><p> <a class="link" href="Other-Clients.html#minimalprofile" title="Example 44.1. 最低限のプロファイル共有">以下の例</a>は、最低限のプロファイル共有を提供する。</p><div class="example"><a name="minimalprofile"></a><p class="title"><b>Example 44.1. 最低限のプロファイル共有</b></p><div class="example-contents"><table border="0" summary="Simple list" class="simplelist"><tr><td> </td></tr><tr><td><em class="parameter"><code>[profile]</code></em></td></tr><tr><td><a class="indexterm" name="id2715893"></a><em class="parameter"><code>path = /export/profile</code></em></td></tr><tr><td><a class="indexterm" name="id2715904"></a><em class="parameter"><code>create mask = 0600</code></em></td></tr><tr><td><a class="indexterm" name="id2715916"></a><em class="parameter"><code>directory mask = 0700</code></em></td></tr><tr><td><a class="indexterm" name="id2715928"></a><em class="parameter"><code>nt acl support = no</code></em></td></tr><tr><td><a class="indexterm" name="id2715939"></a><em class="parameter"><code>read only = no</code></em></td></tr></table></div></div><br class="example-break"><p>このバグの原因は、Windows 200x SP2クライアントが、SambaサーバのSIDを含むプロファイルのためのセキュリティディスクリプタをコピーする事によるものである。クライアントは、Samba\userのSIDを比較し、DOMAIN\userに割り当てられたものと違うと理解する。そのため、<span class="errorname">access denied</span>メッセージが表示される。</p><p><a class="link" href="smb.conf.5.html#NTACLSUPPORT" target="_top">nt acl support</a>が無効になっている場合、SambaはWindows 200xクライアントに、プロファイルに対する既定値のACLを設定させる、QuerySecurityDescriptor trans2呼び出しのレスポンスを送信する。この既定値のACLは以下を含む:</p><p><span class="emphasis"><em>DOMAIN\user 	<span class="quote">“<span class="quote">フルコントロール</span>”</span></em></span>></p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>このバグはドメインユーザ用に、Sambaホスト上でアカウントを作成するために、Winbindを使う時には起こらない。</p></div></div><div class="sect1" title="Windows NT 3.1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2716007"></a>Windows NT 3.1</h2></div></div></div><p>もしも、Windows NT 3.1ワークステーションでルータ越しに通信をする時に問題が起きたならば、<a class="ulink" href="http://support.microsoft.com/default.aspx?scid=kb;Q103765" target="_top">this\ Microsoft Knowledge Base article:</a>を読むこと。</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="Portability.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="Appendix.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="speed.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 43. 移植性 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 45. Sambaパフォーマンスチューニング</td></tr></table></div></body></html>