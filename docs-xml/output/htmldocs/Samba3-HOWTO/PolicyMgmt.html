<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 26. システムとアカウントポリシー</title><link rel="stylesheet" href="../samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="公式のSamba 3.2.x HOWTOとリファレンスガイド"><link rel="up" href="optional.html" title="Part III. 詳細な設定方法"><link rel="prev" href="AdvancedNetworkManagement.html" title="Chapter 25. 詳細なネットワーク管理"><link rel="next" href="ProfileMgmt.html" title="Chapter 27. デスクトッププロファイルの管理"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 26. システムとアカウントポリシー</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="AdvancedNetworkManagement.html">Prev</a> </td><th width="60%" align="center">Part III. 詳細な設定方法</th><td width="20%" align="right"> <a accesskey="n" href="ProfileMgmt.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 26. システムとアカウントポリシー"><div class="titlepage"><div><div><h2 class="title"><a name="PolicyMgmt"></a>Chapter 26. システムとアカウントポリシー</h2></div><div><div class="author"><h3 class="author"><span class="firstname">John</span> <span class="othername">H.</span> <span class="surname">Terpstra</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><code class="email"><<a class="email" href="mailto:jht@samba.org">jht@samba.org</a>></code></p></div></div></div></div><div><p class="pubdate">April 3 2003</p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="PolicyMgmt.html#id2679533">機能と利便性</a></span></dt><dt><span class="sect1"><a href="PolicyMgmt.html#id2679670">システムポリシーの作成と運用</a></span></dt><dd><dl><dt><span class="sect2"><a href="PolicyMgmt.html#id2679903">Windows 9x/ME ポリシー</a></span></dt><dt><span class="sect2"><a href="PolicyMgmt.html#id2680068">Windows NT4形式のポリシーファイル</a></span></dt><dt><span class="sect2"><a href="PolicyMgmt.html#id2680329">Microsoft Windows 200x/XP Professionalのポリシー</a></span></dt></dl></dd><dt><span class="sect1"><a href="PolicyMgmt.html#id2680895">アカウント/ユーザポリシーの管理</a></span></dt><dt><span class="sect1"><a href="PolicyMgmt.html#id2681166">管理ツール</a></span></dt><dd><dl><dt><span class="sect2"><a href="PolicyMgmt.html#id2681185">SambaのEditregツールセット</a></span></dt><dt><span class="sect2"><a href="PolicyMgmt.html#id2681280">Windows NT4/200x</a></span></dt><dt><span class="sect2"><a href="PolicyMgmt.html#id2681327">Samba PDC</a></span></dt></dl></dd><dt><span class="sect1"><a href="PolicyMgmt.html#id2681400">システムスタートアップとログオン処理の概要</a></span></dt><dt><span class="sect1"><a href="PolicyMgmt.html#id2681601">よくあるエラー</a></span></dt><dd><dl><dt><span class="sect2"><a href="PolicyMgmt.html#id2681617">ポリシーが動かない</a></span></dt></dl></dd></dl></div><p><a class="indexterm" name="id2679515"></a>この章では、Sambaメーリングリストの投稿者による、個人的な経験と知識に由来する知識の現状について要約する。投稿された情報を再構築する前に、すべての効果に、与えられた情報を検証することが行われた。この検証を通じては、追加の情報はカバーされていないので、それも提供している。</p><div class="sect1" title="機能と利便性"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2679533"></a>機能と利便性</h2></div></div></div><p><a class="indexterm" name="id2679541"></a><a class="indexterm" name="id2679548"></a><a class="indexterm" name="id2679554"></a>Microsoft Windows NT 3.5が発表された時、ホットな新しい話題は、ユーザとグループに対するグループポリシーの実装であった。次にMicrosoft Windows NT4が来て、いくつかのサイトがこの機能を適用し始めた。どうやって知ったかって?数多くの<span class="quote">“<span class="quote">ドジな</span>”</span>(あるいは間違った)管理者はそれを行い、解決のために助けを求めたからである。</p><p><a class="indexterm" name="id2679582"></a><a class="indexterm" name="id2679590"></a><a class="indexterm" name="id2679599"></a><a class="indexterm" name="id2679606"></a><a class="indexterm" name="id2679612"></a>Windows  2000とActive Directoryがリリースを待っている間、管理者はグループポリシーはすばらしいというメッセージを聞かされ続けた。グループポリシーにより管理コストの低減が可能となり、確かに利用者にとってありがたい点もある。しかし、Windows 200xのActive Directory と GPO によるユーザとコンピュータ管理機能の活用は遅々として進まなかった。これは、2000年から2001年にかけてのSambaメーリングリストにおける過去ログにおいて、GPOに関連した投稿や、GPOをSambaの環境でどのように複製するのかといった投稿がほとんどなかったことからも明らかであった。</p><p><a class="indexterm" name="id2679651"></a>トラフィック量から判断すると、2002年中盤以降は、GPO は多くのサイトでデプロイメント(運用)の一部として普通に用いられるようになった。本章では、ユーザのデスクトップとネットワーク上のクライアントワークステーションの自動制御を可能とするために用いることが可能な、テクニックと方法についておさらいする(記載する)。</p></div><div class="sect1" title="システムポリシーの作成と運用"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2679670"></a>システムポリシーの作成と運用</h2></div></div></div><p><a class="indexterm" name="id2679678"></a><a class="indexterm" name="id2679685"></a><a class="indexterm" name="id2679692"></a><a class="indexterm" name="id2679699"></a>Microsoft Windowsプラットフォーム配下、特にMicrosoft NT4とMicrosoft Windows 95のリリースに従ったものは、ドメインコントローラのNETLOGON共有中に配置できるタイプのファイルを作成することが可能である。クライアントがネットワークにログオンすると、このファイルは読み取られ、その内容で、クライアントマシンのレジストリの変更を開始する。このファイルはユーザ、ユーザのグループかマシンに影響するレジストリを変更させることを許可する。</p><p><a class="indexterm" name="id2679720"></a><a class="indexterm" name="id2679727"></a><a class="indexterm" name="id2679734"></a>Microsoft Windows 9x/Meようには、このファイルは<code class="filename">Config.POL</code>としなければならず、ポリシーエディタとしてよく知られている<code class="filename">poledit.exe</code>というツールを使って作成できる。ポリシーエディタはWindows 98インストール用CD-ROMで提供されているが、Microsoft Windows Meでは提供されなくなった。Microsoft Windowsネットワーク管理者からのコメントによると、これはMicrosoft Windows Me リソースキットに含まれるようになったとのこと。</p><p><a class="indexterm" name="id2679772"></a>Microsoft Windows NT4サーバ製品には、<span class="guimenu">スタート -> プログラム -> 管理ツール</span>配下に<span class="emphasis"><em>システムポリシーエディタ</em></span>が含まれている。Microsoft Windows NT4とその後のクライアント用に、このファイルは<code class="filename">NTConfig.POL</code>という名前にしなければならない。</p><p><a class="indexterm" name="id2679805"></a>Microsoft Windows 2000からは、Microsoft管理コンソールすなわちMMCが新たに導入された。このツールは、ネットワークアクセスとセキュリティ管理方法に対して、永遠に止めることのないマイクロソフト社の歩みの中から生まれた新しい潮流である。マイクロソフト社の新製品や新技術が登場するたびに、以前の常識が覆され、複雑化したツールと方法が新たに生み出されるように見える。マイクロソフト社の立場からすると、MMCは進歩である。しかし、機能の進歩には大きな代償が伴っているのだ。</p><p><a class="indexterm" name="id2679838"></a><a class="indexterm" name="id2679845"></a><a class="indexterm" name="id2679852"></a><a class="indexterm" name="id2679859"></a>ネットワークとシステムポリシーの設定に着手する前に、<a class="ulink" href="http://www.microsoft.com/ntserver/techresources/management/prof_policies.asp" target="_top">Implementing Profiles and Policies in Windows NT 4.0</a>という、MicrosoftのWebサイトで提供されている文書を読むことを強く推奨する(訳注:現存しない)。これらは、四で理解すべきである、古いものに対する大量の追加文書である。<span class="quote">“<span class="quote">グループポリシー</span>”</span>をMicrosoftのWebサイト上で探してみること。</p><p>以下で説明するものは、いくつかの有用な注意事項に関する短い議論である。ここで提供される情報は不完全であることを警告する。</p><div class="sect2" title="Windows 9x/ME ポリシー"><div class="titlepage"><div><div><h3 class="title"><a name="id2679903"></a>Windows 9x/ME ポリシー</h3></div></div></div><p><a class="indexterm" name="id2679911"></a><a class="indexterm" name="id2679919"></a>	Windows 9x/Meは以下でWindows 98のグループポリシーエディタを使ってグループ	プロファイルを作成する必要があるとする。これはオリジナルの完全なWindows 98	インストールCD-ROM配下の<code class="filename">tools\reskit\netadmin\poledit</code>	ディレクトリ中にある。プログラムの追加と削除機能を使ってこれをインストールし、	次に、<span class="guiicon">Have Disk</span>をクリックする。	</p><p><a class="indexterm" name="id2679954"></a><a class="indexterm" name="id2679961"></a>	ユーザポリシーまたは<code class="filename">マイドキュメント</code>などの位置を指定する	ポリシーファイルを作成するために、グループポリシーエディタを使う。次に、	<em class="parameter"><code>[NETLOGON]</code></em>共有のrootに配置する必要がある、	<code class="filename">Config.POL</code>というファイルにこれらの設定をセーブする。	もしもWindows98がSambaドメインにログオンするように設定されていたならば、これは	自動的にこのファイルを読み、ログオンしようとするマシンの、Windows 9x/Me	レジストリを更新する。	</p><p>	さらなる詳細はWindows98リソースキットの文書中で説明されている。	</p><p><a class="indexterm" name="id2680010"></a>	もしも、正しい手順を踏まない場合、時々Windows 9x/Meはレジストリの正当性を検査し、	各Windows 9x/Meマシンに格納されているレジストリのバックアップコピーから、その	設定をリストアする。そのため、時々、オリジナルの設定に戻ってしまうと言うことに	気がつくだろう。	</p><p><a class="indexterm" name="id2680030"></a><a class="indexterm" name="id2680037"></a>	グループポリシーを適用するために、Windows 9x/Me用のグループポリシーハンドラを	インストールする。Windows 98 CD-ROMの	<code class="filename">\tools\reskit\netadmin\poledit</code>を参照。	<code class="filename">grouppol.inf</code>をダブルクリックして、Windows 9x/Meにグループ	ポリシーをインストールする。不幸にも、これはグループポリシーを使うWindows 98/Me	マシンすべてで行う必要がある。	</p></div><div class="sect2" title="Windows NT4形式のポリシーファイル"><div class="titlepage"><div><div><h3 class="title"><a name="id2680068"></a>Windows NT4形式のポリシーファイル</h3></div></div></div><p><a class="indexterm" name="id2680077"></a><a class="indexterm" name="id2680084"></a><a class="indexterm" name="id2680091"></a><a class="indexterm" name="id2680098"></a>	<code class="filename">ntconfig.pol</code>を作成あるいは編集するために、NT4サーバには	同梱されているが、NTワークステーションには含まれていない、	<code class="literal">poledit.exe</code>というNTサーバポリシーエディタを使う必要がある。	NT4ワークステーションにもポリシーエディタはあるが、ドメインポリシーを作成する	のには適していない。さらに、Windows 95のポリシーエディタはNT4ワークステーション	あるいはサーバにインストールできるが、NTクライアントではこれは動作しない。	しかし、NTサーバからのファイルはNT4ワークステーション上でも問題なく動く。	</p><p><a class="indexterm" name="id2680140"></a><a class="indexterm" name="id2680147"></a><a class="indexterm" name="id2680154"></a><a class="indexterm" name="id2680161"></a>	<code class="filename">poledit.exe</code>, <code class="filename">common.adm</code>と	<code class="filename">winnt.adm</code>を必要とする。2つの<code class="filename">*.adm</code>	ファイルを<code class="filename">c:\winnt\inf</code>に配置するのは、プログラムが他の場所を	指定されない限り既定値で探しに行く場所であるので、都合がよい。このディレクトリは	通常<span class="quote">“<span class="quote">hidden</span>”</span>である。	</p><p><a class="indexterm" name="id2680208"></a><a class="indexterm" name="id2680216"></a><a class="indexterm" name="id2680222"></a><a class="indexterm" name="id2680229"></a>	Windows NTポリシーエディタは、Windows NT4.0のサービスパック3(とそれ以降)にも	同梱されている。<code class="literal">servicepackname /x</code>を使ってファイルを	解凍する。たとえばサービスパック6aでは<code class="literal">Nt4sp6ai.exe /x</code>	である。ポリシーエディタ<code class="literal">poledit.exe</code>と関連するテンプレート	ファイル (*.adm)が解凍される。office97用のテンプレートファイルとポリシーエディタの	コピーをダウンロードすることも可能である。他の場所としては、Microsoftから	ダウンロードできるZero Administration Kitがあげられる。	</p><div class="sect3" title="腐ったレジストリ"><div class="titlepage"><div><div><h4 class="title"><a name="id2680276"></a>腐ったレジストリ</h4></div></div></div><p><a class="indexterm" name="id2680284"></a><a class="indexterm" name="id2680291"></a>		NT4形式ベースのポリシーの変更で、大量の設定は自動的にユーザのログオフでは		戻されない。<code class="filename">NTConfig.POL</code>ファイル中にある設定は		クライアントマシンのレジストリに適用され、細かな項目がたくさんある		HKEY_LOCAL_MACHINEキーへの適用は、明示的に戻されない限りそのままになる。		これは入れ墨として知られている。これはその下部に対して重大な影響を及ぼす		事が可能となり、管理者は後々そのマシンのを管理する能力を失わないように、		とても注意しなければならない。			</p></div></div><div class="sect2" title="Microsoft Windows 200x/XP Professionalのポリシー"><div class="titlepage"><div><div><h3 class="title"><a name="id2680329"></a>Microsoft Windows 200x/XP Professionalのポリシー</h3></div></div></div><p><a class="indexterm" name="id2680338"></a>	Windows NTpシステムポリシーは、NT4形式のドメイン中のメンバである、ユーザ、	グループとコンピュータ(クライアントワークステーション)に指定するレジストリ	パラメータの設定が出来る。このようなポリシーファイルはMicrosoft Windows 200x/XP	でも動作する。	</p><p>	Microsoft Windows 2000では、最近新たにNT4形式のポリシーと比べて上位互換の機能を	提供する、形式のグループポリシーを導入した。もちろん、ポリシーを作るツールは	異なり、それを実装するメカニズムはもっと改良されている。	</p><p>	<a class="indexterm" name="id2680372"></a><a class="indexterm" name="id2680379"></a>	古いNT4形式のレジストリベースポリシーは、Microsoft Windows 2000/XP GPO中では	<span class="emphasis"><em>管理用テンプレート(Administrative Templates)</em></span>として	知られている。前者は種々のセキュリティ設定の設定機能、インターネット	エクスプローラの設定の強制、ユーザデスクトップ(スタートメニュー中に現れる	メニュー項目に設定されるのと同じような<code class="filename">マイドキュメント</code>	ファイルの配置を含む)の変更と外観の切り替え(redirect)を含む。	追加の新しい機能は、特定のWindowsアプリケーションソフトを特定のユーザ/グループに	有効化する事を行うことである。	</p><p><a class="indexterm" name="id2680417"></a><a class="indexterm" name="id2680424"></a><a class="indexterm" name="id2680431"></a>	思い出してほしいが、NT4のポリシーファイルは<code class="filename">NTConfig.POL</code>	という名前で、ドメインコントローラ上のNETLOGON共有のルートに格納される。Windows NT4	ユーザはユーザ名とパスワードを入力し、ログオンを行うドメイン名を選択する。ログオン	プロセス処理の間、クライアントマシンは、認証サーバ上のNETLOGON共有から	<code class="filename">NTConfig.POL</code>を読み、このファイル中にある設定に従い、ローカルの	レジストリ値を変更する。	</p><p><a class="indexterm" name="id2680467"></a><a class="indexterm" name="id2680474"></a><a class="indexterm" name="id2680481"></a><a class="indexterm" name="id2680488"></a><a class="indexterm" name="id2680494"></a><a class="indexterm" name="id2680501"></a><a class="indexterm" name="id2680511"></a><a class="indexterm" name="id2680521"></a>	Windows 200x GPOは機能がたくさんある。これらは、NETLOGON共有には格納されないが、	一部はActive Directoryそれ自身にWindows200x ポリシーファイルとして格納され、	残りはSYSVOLフォルダと呼ばれる共有(かつ複製される)ボリューム中に格納される。	このフォルダはすべてのActive Directoryドメインコントローラ上に存在する。	Active Directoryそれ自身に格納される部分は、グループポリシーコンテナ(GPC)と	呼ばれ、SYSVOLと呼ばれる複製された共有中に格納されるものは、グループポリシー	テンプレート(GPT)として知られる。	</p><p><a class="indexterm" name="id2680555"></a>	NT4クライアントでは、ポリシーファイルは読み取られるが、各ユーザがネットワークに	ログオンする時のみ実行される。Microsoft Windows 200xポリシーは、もっと	複雑である。GPOはクライアントマシン起動時(マシン固有の部分)で処理、	適用され、ユーザがネットワークにログオンする時、ユーザ個別の部分が適用される。	Microsoft Windows 200x形式のポリシー管理では、各マシンあるいはユーザは、	限りなく多くの、同時に適用可能な(かつ、適用される)ポリシーセット(GPO)の適用を	受けるかもしれない。NT4形式のポリシーファイルでは、これと同様の能力をもつものは	存在しない。	</p><div class="sect3" title="Windows 200x/XPポリシーの管理"><div class="titlepage"><div><div><h4 class="title"><a name="id2680584"></a>Windows 200x/XPポリシーの管理</h4></div></div></div><p>		<a class="indexterm" name="id2680593"></a>		<a class="indexterm" name="id2680600"></a><a class="indexterm" name="id2680607"></a><a class="indexterm" name="id2680614"></a><a class="indexterm" name="id2680620"></a>		<span class="application">システムポリシーエディタ</span>というツールを使う代わりに、		通常はPoledit(バイナリファイルは<code class="literal">poledit.exe</code>)を使い、		以下のように、		<span class="application">Microsoftマネジメントコンソール</span><acronym class="acronym">(MMC)</acronym>		スナップインを使って、<acronym class="acronym">GPOs</acronym>の作成と管理を行う:		</p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>			Windows 200x/XPメニューから			<span class="guimenu">スタート->プログラム->管理ツール</span>とたどり、			<span class="guimenuitem">Active Directoryユーザとコンピュータ</span>			というMMCスナップインを選択する。			</p></li><li class="step" title="Step 2"><p><a class="indexterm" name="id2680689"></a>			管理したいドメインまたはorganizational unit (OU)を選択し、次に、			そのオブジェクトのコンテキストメニューを開くために右クリックし、			<span class="guibutton">プロパティ</span>を選択する。			</p></li><li class="step" title="Step 3"><p>			<span class="guilabel">グループポリシー</span>タブ上で左クリックし、次に、			新規タブ上で左クリックする。作成したい新しいポリシーの名前を			入力する。			</p></li><li class="step" title="Step 4"><p>			<span class="guilabel">編集</span>タブで左クリックし、GPOを作成するために			必要なステップを開始する。			</p></li></ol></div><p>		</p><p>		すべてのポリシー設定オプションはポリシー管理テンプレートを使用する		ことによって制御される。NT4と同様Windows 200xでも、これらのファイルは		拡張子として.admを使う。しかしながら、.admファイルはNT4とWindows 200x		間で相互交換可能ではないことに注意。後者は拡張された定義を行えるような		たくさんの新しい機能を導入している。どのように.admファイルをプログラム		するかについて説明することは、この文書の範囲外である。それについては、		使用しているMicrosoft Windowsの、特定のバージョンに対する		Microsoft Windowsリソースキットを参照のこと。		</p><p>		</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><a class="indexterm" name="id2680776"></a><a class="indexterm" name="id2680783"></a><a class="indexterm" name="id2680790"></a>		Microsoft Windows 2000リソースキットには、<code class="literal">gpolmig.exe</code>		というツールが入っている。このツールはNT4の<code class="filename">NTConfig.POL</code>		ファイルをWindows 200x形式のGPOに変換するのに使える。どのようにこの強力な		ツールを使うかについては十分に注意すること。特定の使用に関する情報については、		リソースキットのマニュアルを参照してほしい。		</p></div><p>		</p></div><div class="sect3" title="固有のシステムポリシーテンプレート"><div class="titlepage"><div><div><h4 class="title"><a name="id2680827"></a>固有のシステムポリシーテンプレート</h4></div></div></div><p>		過去一年にわたって、Windows システムポリシーのための固有のテンプレートの		作成に関するいくつかの議論があった。Sambaメーリングリスト上での最近の		通知は言及に値する。		</p><p>		Mike Petersenは彼が作成したテンプレートファイルの有効性を通知した。この		固有のシステムポリシーエディタテンプレートは、SambaのようなSMBサーバから		Microsoft Windows ワークステーションを問題なく制御することができる。		このテンプレートは、いくつかのネットワーク上でテストされたが、		もしも、それらのポリシーについて何らかの問題を見つけたか、追加のポリシーに		関する何らかの案があったとしたら、mgpeter@pcc-services.comまでメールを		送って教えてほしい。このテンプレートはWindows XP用の数多くのポリシーを		含み、業務用の環境ではもっとよく動くようになっている。		</p><p>		さらなる情報については、		<a class="ulink" href="http://www.pcc-services.com/custom_poledit.html" target="_top">Petersen</a>		Computer Consulting Webサイトを参照してほしい。テンプレートファイルへの		ダウンロードリンクがある。		</p></div></div></div><div class="sect1" title="アカウント/ユーザポリシーの管理"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2680895"></a>アカウント/ユーザポリシーの管理</h2></div></div></div><p><a class="indexterm" name="id2680904"></a><a class="indexterm" name="id2680910"></a><a class="indexterm" name="id2680918"></a>ポリシーは、特定のユーザの設定か、ユーザのグループの設定を定義できる。結果のポリシーファイルには、ポリシーファイルを使う、すべてのユーザ、グループとコンピュータ用のレジストリ設定が含まれる。各ユーザ、グループあるいはコンピュータ用にポリシーファイルを分けることは不要である。</p><p><a class="indexterm" name="id2680938"></a>もしも、認証されたドメインコントローラから自動的にダウンロードされるポリシーファイルを作成したら、<code class="filename">NTConfig.POL</code>と名前を付けるべきである。システム管理者にはポリシーファイルの改名オプションがあり、Windows NTベースのワークステーションを変更することで、マニュアルパス経由でポリシーファイルのするためにコンピュータを制御する。手動でレジストリを変更するか、システムポリシーエディタを塚'ってこれを行うことが出来る。これは、各マシンがその固有のポリシーファイルを持つようなローカルパスでも問題ないが、もしも、すべてのマシンに対して変更が必要であれば、各ワークステーションに対して個別に行わなければならない。</p><p><a class="indexterm" name="id2680979"></a><a class="indexterm" name="id2680986"></a>Windows NT4/200x/XPマシンがネットワークにログオンするとき、クライアントは、<code class="filename">NTConfig.POL</code>ファイルが存在するかどうかを、認証するドメインコントローラ上のNETLOGON共有中で捜す。もしも存在するならば、それをダウンロードし、解析し、レジストリのユーザ部分に適用する。</p><p><a class="indexterm" name="id2681010"></a><a class="indexterm" name="id2681017"></a><a class="indexterm" name="id2681023"></a><a class="indexterm" name="id2681030"></a>Microsoft Windows Active DirectoryドメインにログオンするMicrosoft Windows 200x/XPクライアントはActive Directoryそれ自身に定義され格納されるGPOを使って、さらにポリシーの設定を要求するかもしれない。ADのGPOを使う最も重要な利点は、レジストリを<span class="emphasis"><em>汚染する</em></span>効果がない言うことである。これは<code class="filename">NTConfig.POL</code>(NT4)形式のポリシー更新の使用と比較して考慮すべき利点である。</p><p><a class="indexterm" name="id2681066"></a><a class="indexterm" name="id2681073"></a>さらに追加で、ユーザプロファイルと結合して動作する方法で、システムあるいはグループポリシー経由で、設定あるいは強制されるかもしれないアクセス制御の追加においてMicrosoft Windows NT4/200x/XP下のユーザ管理環境は、ユーザ単位のアカウント制限が手cきょうされるのと同様に、ドメイン単位でもできる。よく使われる共通の制限は以下のものがある:</p><p><a class="indexterm" name="id2681093"></a></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>ログオン時間</p></li><li class="listitem"><p>パスワードのエージング</p></li><li class="listitem"><p>特定のマシンからのログオンのみ許可</p></li><li class="listitem"><p>アカウントタイプ(ローカルまたはグローバル)</p></li><li class="listitem"><p>ユーザの権限</p></li></ul></div><p></p><p><a class="indexterm" name="id2681132"></a><a class="indexterm" name="id2681139"></a>Samba-3.0.20は、まだMicrosoft Windows NT4/200x/XPで共通なすべてのアカウント制御を実装していない。Microsoft Windows NTp用のドメインユーザマネージャを使って多くの制御を設定する間、パスワード満了機能のみが現在使える。現時点で残りの制御の大半は、実際の制御を提供するように、完了されるかもしれないダミーのルーチンである。NT4ドメインユーザマネージャを使うか<code class="filename">NTConfig.POL</code>中でパラメータが設定できることから、誤解してはいけない。</p></div><div class="sect1" title="管理ツール"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2681166"></a>管理ツール</h2></div></div></div><p>グループポリシーを作成するか管理しようと思っている人は誰でも、いくつかのツールについて慣れておく必要がある。以下の節では、余りメンテナンスをしないユーザ環境を作成するための手助けとなる、主要なツールについて説明する。</p><div class="sect2" title="SambaのEditregツールセット"><div class="titlepage"><div><div><h3 class="title"><a name="id2681185"></a>SambaのEditregツールセット</h3></div></div></div><p>	<a class="indexterm" name="id2681194"></a>	<a class="indexterm" name="id2681201"></a>	<a class="indexterm" name="id2681208"></a>	<code class="literal">editreg</code>と呼ばれる新しいツールが開発中である。このツールは、	ユーザとグループプロファイル中に格納される(<code class="filename">NTUser.DAT</code>と	呼ばれる)レジストリファイルを編集するのに使える。<code class="filename">NTConfig.POL</code>	ファイルは<code class="filename">NTUser.DAT</code>ファイルと同じ構造を持ち、このツールを	使って編集できる。<code class="literal">editreg</code>は、<code class="filename">NTConfig.POL</code>	ファイルをテキスト形式でセーブすることが出来るように意図し、拡張された機能を含む	新しい<code class="filename">NTConfig.POL</code>ファイルを構築する事を出来るように作成されて	いる。この機能を実現するのは困難であることは分かっているので、もしもこの機能が	実現しなくとも驚かないでほしい。公に使える機能は、このツールの正式版がリリースされた	時に公開される。	</p></div><div class="sect2" title="Windows NT4/200x"><div class="titlepage"><div><div><h3 class="title"><a name="id2681280"></a>Windows NT4/200x</h3></div></div></div><p><a class="indexterm" name="id2681288"></a><a class="indexterm" name="id2681294"></a><a class="indexterm" name="id2681302"></a>	Microsoft Windows環境からこれらのタイプの制御を設定するために使えるかもしれない	ツールは、NT4ドメインユーザマネージャ、NT4システムおよびグループポリシーエディタ、	およびレジストリエディタ(regedit32.exe)である。Microsoft Windows 200x/XP配下では	これは、MMCに対して適切な<span class="quote">“<span class="quote">スナップイン</span>”</span>、レジストリエディタ、および、	もしかするとNT4システムとグループポリシーエディタを使って行える。	</p></div><div class="sect2" title="Samba PDC"><div class="titlepage"><div><div><h3 class="title"><a name="id2681327"></a>Samba PDC</h3></div></div></div><p><a class="indexterm" name="id2681335"></a><a class="indexterm" name="id2681342"></a><a class="indexterm" name="id2681349"></a><a class="indexterm" name="id2681355"></a>	Sambaドメインコントローラでは、ユーザアカウントとポリシー情報の管理のための	以下の新しいツールが含まれている:	With a Samba domain controller, the new tools for managing user account and policy information include:	<code class="literal">smbpasswd</code>, <code class="literal">pdbedit</code>, <code class="literal">net</code>, と <code class="literal">rpcclient</code>。	管理者はこれらのツールのマニュアルページを読み、使用法に慣れるべきである。	</p></div></div><div class="sect1" title="システムスタートアップとログオン処理の概要"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2681400"></a>システムスタートアップとログオン処理の概要</h2></div></div></div><p>以下は、システムの処理の順番と、システムの再起動とユーザログオンの一部として処理される、処理の順番を説明する試みである:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><a class="indexterm" name="id2681425"></a><a class="indexterm" name="id2681436"></a>	ネットワークが起動し、次にリモートプロシジャーコールシステムサービス(RPCSS)と	multiple universal naming convention provider (MUP)が起動する。	</p></li><li class="listitem"><p><a class="indexterm" name="id2681456"></a><a class="indexterm" name="id2681463"></a>	Active Directory を使う場合、GPOの整列された一覧がダウンロードされて適用される。	リストは以下のGPOを含んでいても余韻</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>ディレクトリ中のマシンの配置を適用(Apply to the location of machines in a directory)。</p></li><li class="listitem"><p>設定が変更されたときのみ適用(Apply only when settings have changed)。</p></li><li class="listitem"><p>適用範囲の設定に依存:local,site,domain,organizational unitなど。</p></li></ul></div><p>	どのデスクトップユーザインタフェースも、上記が処理されるまで提供されない。	</p></li><li class="listitem"><p>	スタートアップスクリプトの実行(既定値ではhiddenとsynchronous)。	</p></li><li class="listitem"><p>	ログオンを行うためのキーボード操作(Ctrl-Alt-Del)。	</p></li><li class="listitem"><p>	ユーザの認証情報が検証され、ユーザプロファイルがロードされる(ポリシー設定に依存)。	</p></li><li class="listitem"><p>	ユーザGPOの整列された一覧を入手する。一覧の内容は、以下の点で何が含まれているかに依存する:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>ユーザがドメインのメンバか、結果、特別なポリシーの適用を受けるか?</p></li><li class="listitem"><p>Loopback enablement, and the state of the loopback policy (併合または置換)。</p></li><li class="listitem"><p>Active Directoryそれ自身の位置</p></li><li class="listitem"><p>GPOの一覧が変更されたか?もしも変更されていないならば、処理は不要である。</p></li></ul></div><p>	</p></li><li class="listitem"><p>	Active Directoryからのユーザポリシーが適用される。注意:いくつか種類がある。	</p></li><li class="listitem"><p>	ログオンスクリプトが動く。Windows 200xとActive Directoryから新規に、ログオン	スクリプトはGPOをベースにして得られるかもしれない(hiddenとsynchronouslyに実行)。	NT4形式のログオンスクリプトは通常のウィンドウで動作する。	</p></li><li class="listitem"><p>	GPOから決定されたユーザインタフェースが提供される。注意:Sambaドメイン中では	(NT4ドメインのように)、マシン(システム)ポリシーは起動時に適用される。	ユーザポリシーはログオン時に適用される。	</p></li></ol></div></div><div class="sect1" title="よくあるエラー"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2681601"></a>よくあるエラー</h2></div></div></div><p>ポリシーに関連する問題は、診断するのがとても難しく、さらに修正するのがもっと難しい可能性がある。以下の項目は、基本的な問題のみを示している。</p><div class="sect2" title="ポリシーが動かない"><div class="titlepage"><div><div><h3 class="title"><a name="id2681617"></a>ポリシーが動かない</h3></div></div></div><p><span class="quote">“<span class="quote"><code class="filename">Config.POL</code>ファイルを作成し、<span class="emphasis"><em>NETLOGON</em></span>共有に置いた。が、Windows XP Proマシンでは、それが見えていないような感じで、何ら違いがなかった。Windows 98では正しく動作したが、Windows XP Proにアップグレードしてからはもはや動かなくなった。何かヒントはないか?</span>”</span></p><p>ポリシーファイルはWindows 9x/MeとMicrosoft Windows NT4/200x/XPベースのプラットフォームの間では互換性がない。<code class="filename">NTConfig.POL</code>というファイルをNT4のグループポリシーエディタで作成する必要があり、そうすると、Microsoft Windows XP Proクライアント用の正しい形式になる。</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="AdvancedNetworkManagement.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="optional.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ProfileMgmt.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 25. 詳細なネットワーク管理 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 27. デスクトッププロファイルの管理</td></tr></table></div></body></html>