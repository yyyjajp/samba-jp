<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 36. NT4 PDC からSamba-3 PDCへの移行</title><link rel="stylesheet" href="../samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="公式のSamba 3.2.x HOWTOとリファレンスガイド"><link rel="up" href="migration.html" title="Part IV. マイグレーションとアップグレード"><link rel="prev" href="upgrading-to-3.0.html" title="Chapter 35. Sambaのアップデートとアップグレード"><link rel="next" href="SWAT.html" title="Chapter 37. SWAT: Samba Web 管理ツール"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 36. NT4 PDC からSamba-3 PDCへの移行</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="upgrading-to-3.0.html">Prev</a> </td><th width="60%" align="center">Part IV. マイグレーションとアップグレード</th><td width="20%" align="right"> <a accesskey="n" href="SWAT.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 36. NT4 PDC からSamba-3 PDCへの移行"><div class="titlepage"><div><div><h2 class="title"><a name="NT4Migration"></a>Chapter 36. NT4 PDC からSamba-3 PDCへの移行</h2></div><div><div class="author"><h3 class="author"><span class="firstname">John</span> <span class="othername">H.</span> <span class="surname">Terpstra</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><code class="email"><<a class="email" href="mailto:jht@samba.org">jht@samba.org</a>></code></p></div></div></div></div><div><p class="pubdate">April 3, 2003</p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="NT4Migration.html#id2702941">計画と開始方法</a></span></dt><dd><dl><dt><span class="sect2"><a href="NT4Migration.html#id2702998">目的</a></span></dt><dt><span class="sect2"><a href="NT4Migration.html#id2704125">移行プロセスの手順</a></span></dt></dl></dd><dt><span class="sect1"><a href="NT4Migration.html#id2704375">移行オプション</a></span></dt><dd><dl><dt><span class="sect2"><a href="NT4Migration.html#id2704469">うまくいくための計画</a></span></dt><dt><span class="sect2"><a href="NT4Migration.html#id2704721">Samba-3実装の選択</a></span></dt></dl></dd></dl></div><p><a class="indexterm" name="id2702920"></a><a class="indexterm" name="id2702927"></a>これは、NT4ドメイン制御からSamba-3ベースのドメイン制御に移行する事を手助けするための、大まかなガイドである。</p><div class="sect1" title="計画と開始方法"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2702941"></a>計画と開始方法</h2></div></div></div><p><a class="indexterm" name="id2702949"></a>ITの世界では、しばしば、すべての問題は、貧弱な計画のために発生すると言われている。この言葉の結果として、予期され、計画される問題はすべてではない。さらに言うと、計画が良いと、ほとんどの、致命的なタイプの状況を予想できると言うことである。In the IT world there is often a saying that all problems are encountered because ofpoor planning. The corollary to this saying is that not all problems can be anticipatedand planned for. Then again, good planning will anticipate most show-stopper-type situations.</p><p><a class="indexterm" name="id2702980"></a>Microsoft Windows NT4ドメイン制御からSamba-3ドメイン制御環境への移行を考えている場合、詳細な移行プランを作成すべきである。そこで、ここでは、移行を進めるために手助けとなる、いくつかの点について説明する。</p><div class="sect2" title="目的"><div class="titlepage"><div><div><h3 class="title"><a name="id2702998"></a>目的</h3></div></div></div><p><a class="indexterm" name="id2703006"></a>多くの組織における重要な目的は、可能な限り副作用がないように、Microsoft Windows NT4からSamba-3ドメイン制御に移行を行うことである。移行手順において体験する挑戦の1つは、新しい環境でも状態がそのまま残っているという、説得力のある状態の提供であろう。オープンソース技術を導入する人は、最初にトラブルの徴候があったときに、Microsoftベースのプラットフォームソリューションに戻せ、という圧力を体験するだろう。</p><p><a class="indexterm" name="id2703026"></a>Samba-3が制御しているネットワークに移行を試みる前に、可能な限り、周りすべてから、変更に対する、承認を得る努力を行うようにする。<span class="emphasis"><em>なぜ</em></span>組織において変更が重要であるかを正確に理解しておくこと。変更を行う動機付けの例としては以下がある:</p><a class="indexterm" name="id2703047"></a><a class="indexterm" name="id2703054"></a><a class="indexterm" name="id2703060"></a><a class="indexterm" name="id2703067"></a><a class="indexterm" name="id2703074"></a><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>ネットワーク管理の容易性向上。</p></li><li class="listitem"><p>ユーザレベルでのよりすぐれた機能の提供。</p></li><li class="listitem"><p>ネットワーク運用コストの低減。</p></li><li class="listitem"><p>MicrosoftによるNT4サポート終了によって引き起こされるexposureの低減。</p></li><li class="listitem"><p>Avoid MS License 6 implications.</p></li><li class="listitem"><p>組織がMicrosoftに依存する事の低減。</p></li></ul></div><p><a class="indexterm" name="id2703120"></a><a class="indexterm" name="id2703127"></a><a class="indexterm" name="id2703134"></a><a class="indexterm" name="id2703141"></a><a class="indexterm" name="id2703148"></a><a class="indexterm" name="id2703154"></a>Samba-3はMicrosoft Windows NT4ではないことを、誰でもが知っておくようにすること。Samba-3はMicrosoft Windows NT4とも、それに対して利点を提供する事とも異なる、代替ソリューションを提供する。Samba-3は、Microsoft NT4からMicrosoft Windows 2000とその後継(Active Directoryサービスを使う/使わないのどちらでも)への移行における、本質的な価値として紹介している多くの機能を持っていないことを認識すること。</p><p>Samba-3が提供できていないはどのようなものがあるだろうか?</p><a class="indexterm" name="id2703179"></a><a class="indexterm" name="id2703186"></a><a class="indexterm" name="id2703194"></a><a class="indexterm" name="id2703201"></a><a class="indexterm" name="id2703208"></a><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Active Directoryサーバ</p></li><li class="listitem"><p>グループポリシーオブジェクト(Active Directory中の)。</p></li><li class="listitem"><p>マシンポリシーオブジェクト。</p></li><li class="listitem"><p>Active Directory中のログオンスクリプト</p></li><li class="listitem"><p>Active Directory中のソフトウェアアプリケーションとアクセス制御。</p></li></ul></div><p>Samba-3の機能で提供していないものと、使用しているサイトでとても大きな関心があるかもしれないものは以下の通り:</p><a class="indexterm" name="id2703256"></a><a class="indexterm" name="id2703263"></a><a class="indexterm" name="id2703270"></a><a class="indexterm" name="id2703277"></a><a class="indexterm" name="id2703284"></a><a class="indexterm" name="id2703291"></a><a class="indexterm" name="id2703298"></a><a class="indexterm" name="id2703305"></a><a class="indexterm" name="id2703312"></a><a class="indexterm" name="id2703318"></a><a class="indexterm" name="id2703325"></a><a class="indexterm" name="id2703332"></a><a class="indexterm" name="id2703339"></a><a class="indexterm" name="id2703346"></a><a class="indexterm" name="id2703353"></a><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>より少ない所有コスト。</p></li><li class="listitem"><p>Global availability of support with no strings attached.</p></li><li class="listitem"><p>UNIX/Linuxシステム単位で1つ以上のSMB/CIFSサーバを動作できる)。</p></li><li class="listitem"><p>その場その場でのログオンスクリプトの作成。</p></li><li class="listitem"><p>その場その場でのポリシーファイルの作成。</p></li><li class="listitem"><p>より優れた安定性、信頼性、パフォーマンスと可用性。</p></li><li class="listitem"><p>SSH接続経由よる操作性。</p></li><li class="listitem"><p>バックエンド認証技術を自由に選べる(tdbsam,ldapsam)。</p></li><li class="listitem"><p>完全なシングルサインオン技術の実装機能。</p></li><li class="listitem"><p>絶対的に小さい広域ネットワークのバンド幅を要求するための分散認証技術機能。</p></li></ul></div><p><a class="indexterm" name="id2703422"></a>Microsoft Windows NT4からSamba-3へのネットワーク移行の前に、すべての必要な要素を考慮する。変更についてユーザを教育し、そうすることでユーザに受け入れられるようになり、必要な仕事の障害にならないようにすべきである。以下の節では、移行を成功させるための要素について説明している。</p><div class="sect3" title="ドメインレイアウト"><div class="titlepage"><div><div><h4 class="title"><a name="id2703441"></a>ドメインレイアウト</h4></div></div></div><p><a class="indexterm" name="id2703449"></a><a class="indexterm" name="id2703456"></a><a class="indexterm" name="id2703464"></a><a class="indexterm" name="id2703471"></a><a class="indexterm" name="id2703478"></a><a class="indexterm" name="id2703485"></a><a class="indexterm" name="id2703493"></a><a class="indexterm" name="id2703500"></a><a class="indexterm" name="id2703506"></a><a class="indexterm" name="id2703513"></a><a class="indexterm" name="id2703520"></a><a class="indexterm" name="id2703527"></a><a class="indexterm" name="id2703534"></a><a class="indexterm" name="id2703542"></a><a class="indexterm" name="id2703548"></a><a class="indexterm" name="id2703556"></a>Samba-3はドメインコントローラ、バックアップドメインコントローラ(おそらく、最も広くセカンダリコントローラと呼ばれる)、ドメインメンバ、あるいはスタンドアロンサーバとして設定できる。Windowsネットワークセキュリティドメインコンテキストは、実装の前に、sized(?)と、よく調査を行うべきである。バックアップドメインコントローラ(BDC)と同様、プライマリドメインコントローラ(PDC)を配置するため、特別な注意を払う必要がある。Samba-3がMicrosoftの技術とは違う1つの方法は、もしもLDAP認証バックエンドを使うことを選択した場合、同じデータベースをいくつかの異なったドメインで使うことが出来るということである。複雑な組織において、それは、同時に多数のドメインをサポートできる、分散可能な(1つのマスタサーバと複数のスレーブサーバ)単一のLDAPデータベースにできる。Samba-3 can be configured as a domain controller, a backup domain controller (probably best calleda secondary controller), a domain member, or a standalone server. The Windows network securitydomain context should be sized and scoped before implementation. Particular attention needs to bepaid to the location of the Primary Domain Controller (PDC) as well as backup controllers (BDCs).One way in which Samba-3 differs from Microsoft technology is that if one chooses to use an LDAPauthentication backend, then the same database can be used by several different domains. In acomplex organization, there can be a single LDAP database, which itself can be distributed (havea master server and multiple slave servers) that can simultaneously serve multiple domains.</p><p><a class="indexterm" name="id2703629"></a>デザインの観点から、1台のサーバあたりのユーザ数はドメインあたりのサーバの数と同様、サーバの能力とネットワークのバンド幅を考慮に入れて、スケーリングすべきである。</p><p><a class="indexterm" name="id2703647"></a><a class="indexterm" name="id2703655"></a><a class="indexterm" name="id2703662"></a><a class="indexterm" name="id2703669"></a><a class="indexterm" name="id2703676"></a><a class="indexterm" name="id2703682"></a>物理的なネットワークセグメントはいくつかのドメインを収容しているかもしれない。おのおのは、複数のネットワークセグメントにまたがっているかもしれない。ドメインがルーテイングされたセグメントにまたがっている場合、ネットワークの設計とレイアウトのパフォーマンス評価をテストし考慮する。複数のルーティングされたネットワークセグメントをサポートするように設計された、中央に位置するドメインコントローラは、パフォーマンスが悪いという問題を引き起こすかもしれない。リモートセグメントとPDC間のレスポンスタイム(pingのタイミング)を調べること。もしもそれが長い(100msよりも大きい)場合、ローカルでの認証を提供するために、リモートセグメント上にBDCを配置し、制御サーバにアクセスする。</p></div><div class="sect3" title="サーバの共有とディレクトリのレイアウト"><div class="titlepage"><div><div><h4 class="title"><a name="id2703722"></a>サーバの共有とディレクトリのレイアウト</h4></div></div></div><p><a class="indexterm" name="id2703731"></a><a class="indexterm" name="id2703738"></a>足を付けずには破ることの出来ない、効果的なネットワーク設計のための基本原則がある。最も重要なルールは:よく制御されたネットワークおのおのにおいて、単純さを確保すること。基盤のすべての部分は、管理可能にしなければならない。それをより複雑にすると、システムをセキュアに保つことと機能を確保することの要求は増大するだろう。</p><p><a class="indexterm" name="id2703758"></a><a class="indexterm" name="id2703765"></a><a class="indexterm" name="id2703772"></a><a class="indexterm" name="id2703779"></a><a class="indexterm" name="id2703786"></a><a class="indexterm" name="id2703793"></a>どのようにデータを共有しなければならないかという性質について、心にとめておくこと。物理ディスクスペースレイアウトは注意深く考えられるべきである。いくつかのデータはバックアップが必要である。ディスクレイアウトを単純にすると、バックアップの必要性を記録するのはより容易になるだろう。どのメディアが必要を満たすかについて見極めること。テープ、CD-ROMあるいはDVD-ROMや他のオフラインストレージシステムを考慮する。最小限のメンテナンスを計画し、実現の用意をする。設計の中に危険な点を残さないこと。とりわけ、バックアップすることを忘れてはならない。バックアップし、テストし、すべてのバックアップを検証する。ディザスタリカバリプランを作成し、それが動くかを検証する。</p><p><a class="indexterm" name="id2703834"></a><a class="indexterm" name="id2703841"></a><a class="indexterm" name="id2703848"></a>データアクセス制御の必要性を付与するために、ユーザはグループ化されるべきである。ファイルとディレクトリアクセスは、グループパーミッション経由で最もよく制御でき、グループ制御のディレクトリ上に<span class="quote">“<span class="quote">スティッキービット</span>”</span>を使うと、Sambaの共有ユーザからのファイルアクセス時の不満を十分に防止するかもしれない。</p><p><a class="indexterm" name="id2703874"></a><a class="indexterm" name="id2703881"></a><a class="indexterm" name="id2703888"></a><a class="indexterm" name="id2703895"></a>未経験のネットワーク管理者は、しばしば、ファイル、ディレクトリ、共有に対して、共有内の定義と同じようにアクセス制御を設定するための、手が込んだ技術を適用しようとする。設計と実装は単純にすること、そして、広範囲に設計を文書化すること。他の誰かが作成した文書を監査するようにすること。後継者が理解できないような、複雑な文書を作らないこと。覚えておいてほしいのは、複雑な設計と、実装を使うジョブのセキュリティは、新参の管理者が結び目のほぐし方を学ぶように、利用者に対して、運用障害と運用停止をもたらすかもしれない。アクセス制御は簡単かつ効果的にして、obtuse complexityによって中断されることの無いようにする。Inexperienced  network administrators often attempt elaborate techniques to set accesscontrols on files, directories, shares, as well as in share definitions.Keep your design and implementation simple and document your design extensively. Have othersaudit your documentation. Do not create a complex mess that your successor will not understand.Remember, job security through complex design and implementation may cause loss of operationsand downtime to users as the new administrator learns to untangle your knots. Keep accesscontrols simple and effective, and make sure that users will never be interrupted by obtusecomplexity.</p></div><div class="sect3" title="ログオンスクリプト"><div class="titlepage"><div><div><h4 class="title"><a name="id2703935"></a>ログオンスクリプト</h4></div></div></div><p><a class="indexterm" name="id2703943"></a>ログオンスクリプトは、すべてのユーザが必要に応じて共有とプリンタへの接続を得る事を保証する事を手助けするものである。</p><p>ログオンスクリプトは、動的に作成でき、動作させるすべてのコマンドは、そのユーザが持つ権限と権利が指定される。優先する制御の設定は、グループメンバシップを使って設定すべきであり、グループ情報は、カスタムログオンスクリプトを作成するために使われ、それは、<em class="parameter"><code>NETLOGON</code></em>共有に対する<a class="link" href="smb.conf.5.html#ROOTPREEXEC" target="_top">root preexec</a>パラメータを使う。</p><p><a class="indexterm" name="id2703992"></a>いくつかのサイトでは、制御されたユーザ環境を確立するために、<code class="literal">kixstart</code>のようなツールを使っている。この場合、ログオンスクリプトプロセス制御のために、Google検索を行ってもよい。実際、ログインスクリプト経由で、ユーザが介入することなしに、プリンタを追加する方法について記述しているMicrosoft Knowledge Baseの記事KB189105の使用法を調査してもよい。</p></div><div class="sect3" title="プロファイルの移行/作成"><div class="titlepage"><div><div><h4 class="title"><a name="id2704020"></a>プロファイルの移行/作成</h4></div></div></div><p>ユーザとグループのプロファイルは、デスクトッププロファイル管理という節で説明されているツールを使って移行できる。</p><p><a class="indexterm" name="id2704037"></a><a class="indexterm" name="id2704044"></a>プロファイルはSamba-3ツール<code class="literal">profiles</code>を使って管理しても良い。このツールは、Samba-3ドメインのSIDに変更される、<code class="filename">NTuser.DAT</code>プロファイルファイル中に格納されるMicrosoft Windows NT形式のセキュリティ識別子(SID)を扱える。</p></div><div class="sect3" title="ユーザとグループアカウント"><div class="titlepage"><div><div><h4 class="title"><a name="id2704070"></a>ユーザとグループアカウント</h4></div></div></div><p><a class="indexterm" name="id2704077"></a><a class="indexterm" name="id2704084"></a><a class="indexterm" name="id2704091"></a><a class="indexterm" name="id2704098"></a>Microsoft Windows NT4ドメインからSamba-3に、すべてのアカウント設定を移行することは可能である。ユーザとグループアカウントを移行する前に、Microsoft Windows NT4ドメインに存在しているグループをSamba-3中に作成することと、それを適切なUNIX/Linuxグループにマップすることを<span class="emphasis"><em>強く推奨する</em></span>。以下の単純な助言に従い、すべてのユーザとグループの属性は、無事に移行すべきである。</p></div></div><div class="sect2" title="移行プロセスの手順"><div class="titlepage"><div><div><h3 class="title"><a name="id2704125"></a>移行プロセスの手順</h3></div></div></div><p>おおよその移行プロセスは以下の通りである。</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>	移行対象の、ユーザ、グループ、ポリシーとプロファイルを持つNT4 PDCがあるとする。	</p></li><li class="listitem"><p><a class="indexterm" name="id2704150"></a><a class="indexterm" name="id2704157"></a><a class="indexterm" name="id2704164"></a>	Samba-3はnetlogon共有、プロフィル共有やその他を持つドメインコントローラとして	設定してある。<code class="filename">smb.conf</code>ファイルをBDCとして機能するように、	<em class="parameter"><code>domain master = No</code></em> と設定する。	</p></li></ul></div><div class="procedure" title="Procedure 36.1. アカウント移行プロセス"><a name="id2704191"></a><p class="title"><b>Procedure 36.1. アカウント移行プロセス</b></p><a class="indexterm" name="id2704281"></a><ol class="procedure" type="1"><li class="step" title="Step 1"><p>	<a class="indexterm" name="id2704203"></a>	NT4 サーバマネージャを使い、Sambaサーバを古いNT4ドメイン中でBDCに設定する。	<span class="emphasis"><em>Samba must not be running.</em></span>	</p></li><li class="step" title="Step 2"><p>	<a class="indexterm" name="id2704223"></a>	<strong class="userinput"><code>net rpc join -S <em class="replaceable"><code>NT4PDC</code></em> -w <em class="replaceable"><code>DOMNAME</code></em> -U	Administrator%<em class="replaceable"><code>passwd</code></em></code></strong>	</p></li><li class="step" title="Step 3"><p><a class="indexterm" name="id2704257"></a>	<strong class="userinput"><code>net rpc vampire -S <em class="replaceable"><code>NT4PDC</code></em> -U 	administrator%<em class="replaceable"><code>passwd</code></em></code></strong>	</p></li><li class="step" title="Step 4"><p><strong class="userinput"><code>pdbedit -L</code></strong></p><p>注意: ユーザは移行できただろうか?</p></li><li class="step" title="Step 5"><p>	<a class="indexterm" name="id2704309"></a>	<a class="indexterm" name="id2704318"></a>	次に、各UNIXグループをNTグループに割り当てる:	<code class="filename">initGroups.sh</code>として下記のテキストをコピーし、スクリプトに	  しておくと便利である。)	</p><pre class="programlisting">#!/bin/bash#### Keep this as a shell script for future re-use			# First assign well known domain global groupsnet groupmap add ntgroup="Domain Admins" unixgroup=root rid=512 type=dnet groupmap add ntgroup="Domain Users"  unixgroup=users rid=513 type=dnet groupmap add ntgroup="Domain Guests" unixgroup=nobody rid=514 type=d# Now for our added domain global groupsnet groupmap add ntgroup="Designers" unixgroup=designers type=dnet groupmap add ntgroup="Engineers" unixgroup=engineers type=dnet groupmap add ntgroup="QA Team"   unixgroup=qateam    type=d</pre><p>	</p></li><li class="step" title="Step 6"><p><strong class="userinput"><code>net groupmap list</code></strong></p><p>すべてのグループが認識されたかを確認する。	</p></li></ol></div><p>すべてのプロファイルの移行と、すべてのポリシファイルの移行。</p></div></div><div class="sect1" title="移行オプション"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2704375"></a>移行オプション</h2></div></div></div><p>Microsoft Windows NT4ドメイン制御からSambaベースのソリューションへの移行を行いたいサイトは、一般的に3つの基本的なカテゴリに適合する。<a class="link" href="NT4Migration.html#majtypes" title="Table 36.1. 3つの主要なサイトのタイプ">以下のテーブル</a>は、その例を表示する。</p><div class="table"><a name="majtypes"></a><p class="title"><b>Table 36.1. 3つの主要なサイトのタイプ</b></p><div class="table-contents"><table summary="3つの主要なサイトのタイプ" border="1"><colgroup><col align="left"><col align="justify"></colgroup><thead><tr><th align="left">ユーザ数</th><th align="justify">説明</th></tr></thead><tbody><tr><td align="left">< 50</td><td align="justify"><p>特段の手間暇を掛けずに単純な移行をしたい。</p></td></tr><tr><td align="left">50 - 250</td><td align="justify"><p>新しい機能を追加したい。いくつかの、組織内の複雑制を管理することが出来る。</p></td></tr><tr><td align="left">> 250</td><td align="justify"><p>ソリューション/実装は規模に対応しなければならない。	      複雑な要求がある。組織間の調整。ほとんどの領域での専門的な知識。</p></td></tr></tbody></table></div></div><br class="table-break"><div class="sect2" title="うまくいくための計画"><div class="titlepage"><div><div><h3 class="title"><a name="id2704469"></a>うまくいくための計画</h3></div></div></div><p>Microsoft Windows NT4からSamba-3へ移行したいサイトには、3つの基本的な選択肢がある。</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>	単純な移行 (丸ごと取り替え)。	</p></li><li class="listitem"><p>	アップグレードする移行(統合の一種でありえる)。	</p></li><li class="listitem"><p>	完全な再設計 (完全に新しいソリューション)。	</p></li></ul></div><p>終了間際の問題を最小にするには:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>	十分な時間の確保。	</p></li><li class="listitem"><p>	パニックを防ぐ。	</p></li><li class="listitem"><p>	すべての仮定のテスト。	</p></li><li class="listitem"><p>	ワークステーションの展開を含む、完全に提供されるプログラムのテスト。	</p></li></ul></div><p><a class="link" href="NT4Migration.html#natconchoices" title="Table 36.2. 移行方式による相違点の詳細">以下のテーブル</a>は、与えられた、予想される移行のタイプの移行の選択肢を一覧表示する。</p><div class="table"><a name="natconchoices"></a><p class="title"><b>Table 36.2. 移行方式による相違点の詳細</b></p><div class="table-contents"><table summary="移行方式による相違点の詳細" border="1"><colgroup><col align="justify"><col align="justify"><col align="justify"></colgroup><thead><tr><th align="justify">単純移行</th><th align="justify">アップグレード</th><th align="justify">再設計</th></tr></thead><tbody><tr><td align="justify"><p>最低限のOS固有機能の使用</p></td><td align="justify"><p>NT4の機能を新しいホストOSの機能に変更</p></td><td align="justify"><p>NT4の機能を改善し、管理能力を強化</p></td></tr><tr><td align="justify"><p>NT4からSamba-3にすべてのアカウントを移行</p></td><td align="justify"><p>コピーと改善</p></td><td align="justify"><p>認証システム(データベースの配置とアクセス)</p></td></tr><tr><td align="justify"><p>最低限の操作上の変更</p></td><td align="justify"><p>漸進的な改良</p></td><td align="justify"><p>デスクトップ管理手法</p></td></tr><tr><td align="justify"><p>最小限の移行時間</p></td><td align="justify"><p>ユーザへのインパクトを最小化</p></td><td align="justify"><p>デスクトップ/ユーザの制御を改善</p></td></tr><tr><td align="justify"><p>運用停止を伴う移行作業</p></td><td align="justify"><p>最大限の機能を利用</p></td><td align="justify"><p><span class="emphasis"><em>管理性、拡張性、保全性、可用性に対する必要性の識別</em></span></p></td></tr><tr><td align="justify"><p>Samba-3の統合は、ユーザが有効な時に移行し、次に、制御を変更(スワップアウト)Integrate Samba-3, then migrate while users are active, then change of control (swap out)</p></td><td align="justify"><p>管理操作が少ないことを有効に利用</p></td><td align="justify"><p></p></td></tr></tbody></table></div></div><br class="table-break"></div><div class="sect2" title="Samba-3実装の選択"><div class="titlepage"><div><div><h3 class="title"><a name="id2704721"></a>Samba-3実装の選択</h3></div></div></div><div class="variablelist"><dl><dt><span class="term">認証データベース/バックエンド</span></dt><dd><p>		Samba-3は外部の認証バックエンドを使える:		</p><p>		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Winbind (他のSambaかNT4/200xサーバ)。</p></li><li class="listitem"><p>外部サーバはActive DirectoryかNT4ドメインを使える。</p></li><li class="listitem"><p>ホームディレクトリの自動作成を行うために、pam_mkhomedir.soが使える。</p></li><li class="listitem"><p>Samba-3はローカル認証バックエンドとして: <em class="parameter"><code>smbpasswd</code></em>,				<em class="parameter"><code>tdbsam</code></em>, <em class="parameter"><code>ldapsam</code></em>が使える。			</p></li></ul></div></dd><dt><span class="term">アクセス制御が出来る場所</span></dt><dd><p>		Sambaは以下の場所でアクセス制御を設定できる:		</p><a class="indexterm" name="id2704801"></a><a class="indexterm" name="id2704808"></a><a class="indexterm" name="id2704816"></a><a class="indexterm" name="id2704822"></a><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>共有それ自身では共有ACLを使う。</p></li><li class="listitem"><p>ファイルシステム上ではファイルとディレクトリ上でUNIXのパーミッションを使う。</p><p>注意:POLIX ACLは、ファイルシステム中でも有効に出来る。</p></li><li class="listitem"><p>Sambaの共有パラメータも使えるが苦肉の策以外、推奨しない。</p></li></ul></div></dd><dt><span class="term">ポリシー(移行または新しいものの作成)</span></dt><dd><p><a class="indexterm" name="id2704874"></a><a class="indexterm" name="id2704880"></a>		レジストリの変更時には、十分に用心すること;正しいツールを使い、恒久的に		変更点が保存される、NT4形式の<code class="filename">NTConfig.POL</code>ファイルを		経由して変更が行われることに注意。<a class="indexterm" name="id2704899"></a><a class="indexterm" name="id2704907"></a><a class="indexterm" name="id2704914"></a>		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>グループポリシーエディタを使用(NT4)</p></li><li class="listitem"><p>入れ墨効果(tattoo effect)に注意。</p></li></ul></div></dd><dt><span class="term">ユーザとグループプロファイル</span></dt><dd><p><a class="indexterm" name="id2704946"></a><a class="indexterm" name="id2704952"></a>		プラットフォーム固有の場合では、ローカルから、ローミングプロファイル変更するために、		プラットフォームのツールを使う。SIDを変更するために新しいプロファイルツールが		使える(<code class="filename">NTUser.DAT</code>)。		</p></dd><dt><span class="term">ログオンスクリプト</span></dt><dd><p>		それがどのように動くかは分かっている。		</p></dd><dt><span class="term">ユーザとグループの、UNIX/Linuxへのマッピング</span></dt><dd><p>		<a class="indexterm" name="id2705000"></a>		ユーザとグループマッピングコードは新しくなった。Samba-2.2.xからSamba-3に		移行することになれているネットワーク管理者は、多くの問題を体験した。		新しいパスワードバックエンドの動作と、新しいグループマッピング機能について		記述している章を注意深く学習すること。		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><em class="parameter"><code>username map</code></em>機能が必要になるかもしれない。</p></li><li class="listitem"><p><code class="literal">net groupmap</code>でNT4グループをUNIXグループにつなぐ。</p></li><li class="listitem"><p>					ユーザ設定を設定/変更するために<code class="literal">pdbedit</code>を使う。					</p><p>					LDAPバックエンドに移行するとき、初期LDAPデータベースをLDIFにダンプ、					編集し、次にLDAPに再ロードするのは容易である。					</p></li></ul></div></dd><dt><span class="term">OS固有のスクリプト/プログラムが必要になるかもしれない</span></dt><dd><p>		すべてのOSはそれ固有の習慣がある。設計者の体験と、予期されない副作用があるかもしれない		事をベースにする技術的な議論の結果がある。Windowsネットワーク管理者が引っかかる制限には		以下のものがある:		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>ユーザの追加/削除: OSによる名前のサイズ制限に注意				(Linuxは8文字まで, NT4は254文字まで)。</p></li><li class="listitem"><p>マシンの追加/削除: ドメインメンバのみに適用される				(注意:マシン名は16文字までに制限される)。</p></li><li class="listitem"><p>NT4グループからUNIXグループへ接続するために<code class="literal">net groupmap</code>を使用。</p></li><li class="listitem"><p>グループの追加/削除:OSによるサイズと特性の制限に注意。				Linuxは16文字まで、空白不可、大文字不可(<code class="literal">groupadd</code>)。</p></li></ul></div></dd><dt><span class="term">移行ツール</span></dt><dd><p>				<a class="indexterm" name="id2705136"></a>				ドメイン制御(NT4形式)プロファイル、ポリシー、アクセス制御、セキュリティ				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Samba: <code class="literal">net, rpcclient, smbpasswd, pdbedit, profiles</code></p></li><li class="listitem"><p>Windows: <code class="literal">NT4 ドメインユーザマネージャ, サーバマネージャ(NEXUS)</code></p></li></ul></div></dd></dl></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="upgrading-to-3.0.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="migration.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="SWAT.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 35. Sambaのアップデートとアップグレード </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 37. SWAT: Samba Web 管理ツール</td></tr></table></div></body></html>