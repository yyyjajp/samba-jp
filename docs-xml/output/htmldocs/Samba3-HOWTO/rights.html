<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 15. User Rights and Privileges</title><link rel="stylesheet" href="../samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="公式のSamba 3.2.x HOWTOとリファレンスガイド"><link rel="up" href="optional.html" title="Part III. 詳細な設定方法"><link rel="prev" href="idmapper.html" title="Chapter 14. 識別情報のマッピング(IDMAP)"><link rel="next" href="AccessControls.html" title="Chapter 16. ファイル、ディレクトリと共有のアクセス制御"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 15. User Rights and Privileges</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="idmapper.html">Prev</a> </td><th width="60%" align="center">Part III. 詳細な設定方法</th><td width="20%" align="right"> <a accesskey="n" href="AccessControls.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 15. User Rights and Privileges"><div class="titlepage"><div><div><h2 class="title"><a name="rights"></a>Chapter 15. User Rights and Privileges</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Gerald</span> <span class="othername">(Jerry)</span> <span class="surname">Carter</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><code class="email"><<a class="email" href="mailto:jerry@samba.org">jerry@samba.org</a>></code></p></div></div></div></div><div><div class="author"><h3 class="author"><span class="firstname">John</span> <span class="othername">H.</span> <span class="surname">Terpstra</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><code class="email"><<a class="email" href="mailto:jht@samba.org">jht@samba.org</a>></code></p></div></div></div></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="rights.html#id2621748">権利の管理能力</a></span></dt><dd><dl><dt><span class="sect2"><a href="rights.html#id2622032"><span class="quote">“<span class="quote">net rpc rights</span>”</span>ユーティリティの使用</a></span></dt><dt><span class="sect2"><a href="rights.html#id2622424">権限の説明</a></span></dt><dt><span class="sect2"><a href="rights.html#id2622759">Windows2000ドメインコントローラでサポートされている権限</a></span></dt></dl></dd><dt><span class="sect1"><a href="rights.html#id2623256">管理者のドメインSID</a></span></dt><dt><span class="sect1"><a href="rights.html#id2623459">よくあるエラー</a></span></dt><dd><dl><dt><span class="sect2"><a href="rights.html#id2623465">Windowsクライアントの管理が出来る権利と権限は何か?</a></span></dt></dl></dd></dl></div><p><a class="indexterm" name="id2621415"></a><a class="indexterm" name="id2621422"></a><a class="indexterm" name="id2621430"></a><a class="indexterm" name="id2621437"></a>Sambaがドメインを制御しているネットワーク中で、Windowsのユーザ、グループとマシンアカウントを管理するには、Microsoft Windowsネットワーク環境とUNIX OS環境の間でインタフェースを取る必要がある。Windows セキュリティドメインにマシンを追加するための権利(許可)は、Windows NT4ドメインとActive Directoryドメインの両方で、非管理者ユーザに割り当て(設定)することができる。</p><p><a class="indexterm" name="id2621457"></a><a class="indexterm" name="id2621464"></a><a class="indexterm" name="id2621471"></a><a class="indexterm" name="id2621478"></a>ドメインへWindows NT4/2kX/XPProましんを追加するには、追加されるマシンごとにマシンアカウントを作成する必要がある。マシンアカウントは、ユーザのログオンを許可するために信頼できるマシンを検証するために使うのに必要である。</p><p><a class="indexterm" name="id2621499"></a><a class="indexterm" name="id2621506"></a><a class="indexterm" name="id2621513"></a><a class="indexterm" name="id2621520"></a><a class="indexterm" name="id2621526"></a><a class="indexterm" name="id2621533"></a>マシンアカウントはユーザアカウントに類似していて、そのため、SambaをホスティングしているUNIXマシンでの実装では(すなわちSambaが動いているマシン)、ユーザアカウントの特別なタイプとして作成する必要がある。マシンアカウントは、通常のユーザアカウントと比べて、アカウント名(ログインID)が<code class="literal">$</code>記号で終わっているところが異なる。更に、このタイプのアカウントは、システムユーザとしてUNIX環境に決してログイン出来ないことと、ログインシェルが<code class="literal">/bin/false</code>に設定されていることと、ホームディレクトリが<code class="literal">/dev/null</code>に設定されていることも違う。マシンアカウントは起動時にドメインメンバのマシンであることを検証するためのみに使われる。このセキュリティ対応は、ネットワークの完全性を破る中間者攻撃をブロックするために設計されている。</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><a class="indexterm" name="id2621587"></a><a class="indexterm" name="id2621594"></a><a class="indexterm" name="id2621602"></a><a class="indexterm" name="id2621609"></a><a class="indexterm" name="id2621616"></a>マシン(コンピュータ)アカウントは、ドメインメンバサーバとワークステーションのためのセキュリティ証明書(credentials)を格納するために、Windows NT OSファミリで使われる。ドメインメンバの起動時、ドメインコントローラと証明書の交換を含む検証プロセスを行う。もしもドメインコントローラが保持している証明書を使っての認証に失敗した場合、マシンはドメインユーザからのアクセスが出来なくなる。コンピュータアカウントは、Microsoft Windowsのセキュアな認証方法において必須のものである。</p></div><p><a class="indexterm" name="id2621649"></a><a class="indexterm" name="id2621656"></a><a class="indexterm" name="id2621664"></a><a class="indexterm" name="id2621670"></a>UNIXシステムアカウントの作成は、<code class="constant">root</code>アカウントと言う方が通りがよい、システム管理者の伝統的な唯一の権利であった。UNIX環境では、同じUIDを持つ複数のユーザを作ることが可能である。UID=0のUNIXユーザはだれでも<code class="constant">root</code>アカウントユーザと本質的に同じである。</p><p><a class="indexterm" name="id2621694"></a><a class="indexterm" name="id2621701"></a><a class="indexterm" name="id2621709"></a><a class="indexterm" name="id2621716"></a>すべてのバージョンのSambaは、UNIX環境で、ユーザ、グループとマシンアカウントを管理するためのCIFS機能呼び出しを許可するシステムインタフェーススクリプトを呼び出す。3.0.10を含むそれまでのすべてのバージョンのSambaは、それらのインタフェーススクリプトを実行するために、明確にUNIXの<code class="constant">root</code>アカウントにマップされるWindows管理者アカウントを使用することを要求する。こうする必要性は、無理もない話だが、特に、UNIXホストシステムで<code class="constant">root</code>レベルのアクセスを行ってはならない人が特権を得てしまう事について、Samba管理者の間では評判が悪い。</p><div class="sect1" title="権利の管理能力"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2621748"></a>権利の管理能力</h2></div></div></div><p><a class="indexterm" name="id2621756"></a><a class="indexterm" name="id2621763"></a><a class="indexterm" name="id2621770"></a><a class="indexterm" name="id2621777"></a>Samba 3.0.11から、Windowsの権限モデルのサポートが導入された。このモデルは、特定の権利をユーザかグループSIDに割り当てるというものである。この機能を有効にするため、<code class="filename">smb.conf</code>ファイル中の<em class="parameter"><code>global</code></em>セクション中で、<a class="link" href="smb.conf.5.html#ENABLEPRIVILEGES" target="_top">enable privileges = yes</a>を定義しなければならない。</p><p><a class="indexterm" name="id2621822"></a><a class="indexterm" name="id2621828"></a><a class="indexterm" name="id2621835"></a>現在、Samba-3でサポートされている権利は<a class="link" href="rights.html#rp-privs" title="Table 15.1. 現在有効な権限の一覧">“現在有効な権限の一覧”</a>に一覧がある。この章の残りでは、Sambaサーバ上でどのように権限を管理し使うかについて説明する。</p><a class="indexterm" name="id2621853"></a><a class="indexterm" name="id2621860"></a><a class="indexterm" name="id2621867"></a><a class="indexterm" name="id2621874"></a><a class="indexterm" name="id2621881"></a><a class="indexterm" name="id2621888"></a><div class="table"><a name="rp-privs"></a><p class="title"><b>Table 15.1. 現在有効な権限の一覧</b></p><div class="table-contents"><table summary="現在有効な権限の一覧" border="1"><colgroup><col align="right"><col align="left"></colgroup><thead><tr><th align="left">権限</th><th align="left">説明</th></tr></thead><tbody><tr><td align="right"><p>SeMachineAccountPrivilege</p></td><td align="left"><p>マシンをドメインに追加する</p></td></tr><tr><td align="right"><p>SePrintOperatorPrivilege</p></td><td align="left"><p>プリンタの管理</p></td></tr><tr><td align="right"><p>SeAddUsersPrivilege</p></td><td align="left"><p>ドメインへのユーザとグループの追加</p></td></tr><tr><td align="right"><p>SeRemoteShutdownPrivilege</p></td><td align="left"><p>リモートシステムの強制シャットダウン</p></td></tr><tr><td align="right"><p>SeDiskOperatorPrivilege</p></td><td align="left"><p>ディスク共有の管理</p></td></tr><tr><td align="right"><p>SeTakeOwnershipPrivilege</p></td><td align="left"><p>ファイルか他のオブジェクトに対する所有権の取得</p></td></tr></tbody></table></div></div><br class="table-break"><div class="sect2" title="“net rpc rights”ユーティリティの使用"><div class="titlepage"><div><div><h3 class="title"><a name="id2622032"></a><span class="quote">“<span class="quote">net rpc rights</span>”</span>ユーティリティの使用</h3></div></div></div><p><a class="indexterm" name="id2622042"></a><a class="indexterm" name="id2622049"></a><a class="indexterm" name="id2622056"></a><a class="indexterm" name="id2622064"></a><a class="indexterm" name="id2622071"></a>Sambaサーバ上でユーザとグループに権利を割り当てる管理には2つの主要な手段がある。<code class="literal">止め引用のNT4ユーザマネージャ</code>はSambaドメインコントローラに接続するためにWindows NT4、2000かXP Professionalのドメインメンバクライアントのどれからでも使うことが出来、権限の割り当てを表示したり修正できる。しかし、このアプリケーションは、Windows 2000かそれ以降のクライアント上で動かす時にはバグがある。そのため、管理操作の実行を行うために必要なコマンドラインユーティリティを提供している。</p><p>Samba-3.0.11以降の<code class="literal">net rpc rights</code>ユーティリティは新しい3つのサブコマンドを提供している:</p><div class="variablelist"><dl><dt><span class="term">list [name|accounts]</span></dt><dd><p><a class="indexterm" name="id2622128"></a><a class="indexterm" name="id2622140"></a><a class="indexterm" name="id2622146"></a><a class="indexterm" name="id2622154"></a>		引数なしで起動した場合、<code class="literal">net rpc list</code>は単純にサーバ		上の有効な権利の一覧を表示する。特定のユーザまたはグループを指定した		場合、ツールは指定されたアカウントに割り当てられている現在の権限を		表示する。<code class="constant">accounts</code>という特別な文字列を付けて起動		した場合、<code class="literal">net rpc rights list</code>はサーバ上のすべての		特権アカウントの一覧とそれに割り当てられた権利を表示する。		</p></dd><dt><span class="term">grant <user> <right [right ...]></span></dt><dd><p><a class="indexterm" name="id2622196"></a><a class="indexterm" name="id2622203"></a><a class="indexterm" name="id2622210"></a><a class="indexterm" name="id2622217"></a>		引数なしで起動すると、この機能は指定されたユーザかグループに一連の		権利を割り当てるのに使う。例えば、Sambaドメインコントローラ上の		Domain Admins groupのメンバに、ドメインにクライアントマシンを追加する		能力を許可するためには、以下のように実行する:</p><pre class="screen"><code class="prompt">root# </code> net -S server -U domadmin rpc rights grant \	 'DOMAIN\Domain Admins' SeMachineAccountPrivilege</pre><p>		以下のような指定も同じ結果となる:<a class="indexterm" name="id2622249"></a></p><pre class="screen"><code class="prompt">root# </code> net rpc rights grant 'DOMAIN\Domain Admins' \     SeMachineAccountPrivilege -S server -U domadmin</pre><p>		空白で区切った権利の一覧を指定することで、複数の権限を割り当てることも		可能である。パラメータ'Domain\Domain Admins'はシステムシェルによって		バックスラッシュと空白が解釈されてしまうのを防ぐために、シングルクォート		かダブルクォートで囲まなければならない。		</p></dd><dt><span class="term">revoke <user> <right [right ...]></span></dt><dd><p>		このコマンドは<code class="literal">net rpc rights grant</code>と形式が似ている。		これは、ユーザとグループから割り当てられた権利(か権利の一覧)を削除する。		</p></dd></dl></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><a class="indexterm" name="id2622311"></a><a class="indexterm" name="id2622318"></a><a class="indexterm" name="id2622324"></a>、アカウントに割り当てられる権限の設定か削除を可能にするため、Domain Admins グループメンバとして接続する必要がある。この能力はDomain Adminsグループに固有で変更できない。Domain Adminsのメンバに割り当てられた能力以外、既定値の権利と権限はない。これは、すべての管理者の権利と権限(それらに割り当てられた能力以外)は、Domain Adminsグループでも明示的に割り当てられなければならないということを意味する。</p></div><p><a class="indexterm" name="id2622345"></a><a class="indexterm" name="id2622352"></a><a class="indexterm" name="id2622359"></a><a class="indexterm" name="id2622366"></a>いったんsmbdが、ユーザが必要な権利を持っていると確認した場合、特定の操作はrootとして実行されるので、初期状態では、どのユーザに対しても、何らの権利は割り当てられない。例えば、Windowsドメインにクライアントを参加させる時、<em class="parameter"><code>add machine script</code></em>はほとんどの場合、スーパーユーザの権利で動作させる必要がある。この理由のため、アカウントに対して権限を割り当てるのはとても注意すべきである。</p><p><a class="indexterm" name="id2622398"></a><a class="indexterm" name="id2622405"></a><a class="indexterm" name="id2622412"></a>root ユーザ(UID=0)としてのアクセスは、すべての権限チェックをバイパスする。</p></div><div class="sect2" title="権限の説明"><div class="titlepage"><div><div><h3 class="title"><a name="id2622424"></a>権限の説明</h3></div></div></div><p><a class="indexterm" name="id2622432"></a><a class="indexterm" name="id2622439"></a><a class="indexterm" name="id2622446"></a>Samba-3.0.11で実装された権限は以下の通りである。ありそうではあるが、可能であれば、この後のSambaのリリースで権限が追加実装されるかもしれない。また、現在実装されているが、使われていないものは、管理項目として将来のリリースで削除されるかもしれないので、それらの機能を使った時の成功/失敗はSambaメーリングリスト上で報告することは重要である。</p><div class="variablelist"><dl><dt><span class="term">SeAddUsersPrivilege</span></dt><dd><p><a class="indexterm" name="id2622475"></a><a class="indexterm" name="id2622482"></a><a class="indexterm" name="id2622489"></a>		この権利は、<code class="literal">net rpc user add</code>か、		<code class="literal">NT4 User Manager for Domains</code>のような		ツール経由で新しいユーザまたはグループアカウントを作成		するか否かをsmbdがユーザに許可することを決める。		</p></dd><dt><span class="term">SeDiskOperatorPrivilege</span></dt><dd><p><a class="indexterm" name="id2622522"></a><a class="indexterm" name="id2622529"></a><a class="indexterm" name="id2622536"></a>		この権利を所有するアカウントは、 <code class="filename">smb.conf</code>ファイル中で定義した		共有を<code class="literal">追加/削除/変更</code>するコマンドをrootとして		実行出来る。このようなユーザはSambaサーバ上のファイル共有に関連		づけられているACLを変更も出来る。		</p></dd><dt><span class="term">SeMachineAccountPrivilege</span></dt><dd><p><a class="indexterm" name="id2622570"></a><a class="indexterm" name="id2622577"></a><a class="indexterm" name="id2622585"></a>		この権利は、ユーザがSambaが制御しているドメインにクライアント		マシンを参加させることが出来るか否かを制御する。		</p></dd><dt><span class="term">SePrintOperatorPrivilege</span></dt><dd><p><a class="indexterm" name="id2622608"></a><a class="indexterm" name="id2622615"></a><a class="indexterm" name="id2622622"></a><a class="indexterm" name="id2622629"></a><a class="indexterm" name="id2622636"></a>		この権限は<code class="filename">smb.conf</code>ファイル中の<a class="link" href="smb.conf.5.html#PRINTERADMIN" target="_top">printer admin</a>		オプションと、それがグローバルな権利であるという(プリンタ単位毎ではない)		ことを除いて同じように動作する(セクション5の<code class="filename">smb.conf</code>マニュアルページ		参照)。結局smb.confのオプションは無効となり、プリンタへの管理者権限は		このオプションと、<code class="filename">ntprinters.tdb</code>ファイル中にある		プリンタオブジェクトに対するセキュリティ記述子によって排他的に制御される。		</p></dd><dt><span class="term">SeRemoteShutdownPrivilege</span></dt><dd><p><a class="indexterm" name="id2622695"></a><a class="indexterm" name="id2622702"></a><a class="indexterm" name="id2622710"></a>		Sambaはサーバのシャットダウンと再起動のためと、直前に出されたシャット		ダウンコマンドを中止するためののフックを提供する。この操作は通常OS		によってrootユーザにのみ制限されているので、上記のフックのどれかを使う		ことができるアカウントはこの権利を持っていなければならない。		</p></dd><dt><span class="term">SeTakeOwnershipPrivilege</span></dt><dd><p><a class="indexterm" name="id2622737"></a><a class="indexterm" name="id2622744"></a>		この権利はファイルとディレクトリの所有権を得る事を許可する。		</p></dd></dl></div></div><div class="sect2" title="Windows2000ドメインコントローラでサポートされている権限"><div class="titlepage"><div><div><h3 class="title"><a name="id2622759"></a>Windows2000ドメインコントローラでサポートされている権限</h3></div></div></div><p>    参照のために、Windows NT4 PDCで表示される権限は以下の通り:<a class="indexterm" name="id2622772"></a><a class="indexterm" name="id2622779"></a><a class="indexterm" name="id2622786"></a><a class="indexterm" name="id2622793"></a><a class="indexterm" name="id2622800"></a><a class="indexterm" name="id2622807"></a><a class="indexterm" name="id2622814"></a><a class="indexterm" name="id2622821"></a><a class="indexterm" name="id2622828"></a><a class="indexterm" name="id2622835"></a><a class="indexterm" name="id2622842"></a><a class="indexterm" name="id2622850"></a><a class="indexterm" name="id2622857"></a><a class="indexterm" name="id2622864"></a><a class="indexterm" name="id2622871"></a><a class="indexterm" name="id2622878"></a><a class="indexterm" name="id2622885"></a><a class="indexterm" name="id2622892"></a><a class="indexterm" name="id2622899"></a><a class="indexterm" name="id2622906"></a><a class="indexterm" name="id2622913"></a><a class="indexterm" name="id2622920"></a><a class="indexterm" name="id2622927"></a></p><pre class="screen">         SeCreateTokenPrivilege  Create a token object  SeAssignPrimaryTokenPrivilege  Replace a process level token          SeLockMemoryPrivilege  Lock pages in memory       SeIncreaseQuotaPrivilege  Increase quotas      SeMachineAccountPrivilege  Add workstations to domain                 SeTcbPrivilege  Act as part of the operating system            SeSecurityPrivilege  Manage auditing and security log       SeTakeOwnershipPrivilege  Take ownership of files or other objects          SeLoadDriverPrivilege  Load and unload device drivers       SeSystemProfilePrivilege  Profile system performance          SeSystemtimePrivilege  Change the system timeSeProfileSingleProcessPrivilege  Profile single processSeIncreaseBasePriorityPrivilege  Increase scheduling priority      SeCreatePagefilePrivilege  Create a pagefile     SeCreatePermanentPrivilege  Create permanent shared objects              SeBackupPrivilege  Back up files and directories             SeRestorePrivilege  Restore files and directories            SeShutdownPrivilege  Shut down the system               SeDebugPrivilege  Debug programs               SeAuditPrivilege  Generate security audits   SeSystemEnvironmentPrivilege  Modify firmware environment values        SeChangeNotifyPrivilege  Bypass traverse checking      SeRemoteShutdownPrivilege  Force shutdown from a remote system</pre><p>	また、Windows 200x/XP ドメインコントローラとワークステーションでサポートされている権限は以下の通り:<a class="indexterm" name="id2622968"></a><a class="indexterm" name="id2622974"></a><a class="indexterm" name="id2622981"></a><a class="indexterm" name="id2622988"></a><a class="indexterm" name="id2622995"></a><a class="indexterm" name="id2623002"></a><a class="indexterm" name="id2623009"></a><a class="indexterm" name="id2623016"></a><a class="indexterm" name="id2623023"></a><a class="indexterm" name="id2623030"></a><a class="indexterm" name="id2623038"></a><a class="indexterm" name="id2623045"></a><a class="indexterm" name="id2623052"></a><a class="indexterm" name="id2623059"></a><a class="indexterm" name="id2623066"></a><a class="indexterm" name="id2623073"></a><a class="indexterm" name="id2623080"></a><a class="indexterm" name="id2623087"></a><a class="indexterm" name="id2623094"></a><a class="indexterm" name="id2623101"></a><a class="indexterm" name="id2623108"></a><a class="indexterm" name="id2623115"></a><a class="indexterm" name="id2623122"></a><a class="indexterm" name="id2623129"></a><a class="indexterm" name="id2623136"></a><a class="indexterm" name="id2623143"></a><a class="indexterm" name="id2623150"></a><a class="indexterm" name="id2623157"></a><a class="indexterm" name="id2623164"></a></p><pre class="screen">         SeCreateTokenPrivilege  Create a token object  SeAssignPrimaryTokenPrivilege  Replace a process level token          SeLockMemoryPrivilege  Lock pages in memory       SeIncreaseQuotaPrivilege  Increase quotas      SeMachineAccountPrivilege  Add workstations to domain                 SeTcbPrivilege  Act as part of the operating system            SeSecurityPrivilege  Manage auditing and security log       SeTakeOwnershipPrivilege  Take ownership of files or other objects          SeLoadDriverPrivilege  Load and unload device drivers       SeSystemProfilePrivilege  Profile system performance          SeSystemtimePrivilege  Change the system timeSeProfileSingleProcessPrivilege  Profile single processSeIncreaseBasePriorityPrivilege  Increase scheduling priority      SeCreatePagefilePrivilege  Create a pagefile     SeCreatePermanentPrivilege  Create permanent shared objects              SeBackupPrivilege  Back up files and directories             SeRestorePrivilege  Restore files and directories            SeShutdownPrivilege  Shut down the system               SeDebugPrivilege  Debug programs               SeAuditPrivilege  Generate security audits   SeSystemEnvironmentPrivilege  Modify firmware environment values        SeChangeNotifyPrivilege  Bypass traverse checking      SeRemoteShutdownPrivilege  Force shutdown from a remote system              SeUndockPrivilege  Remove computer from docking station           SeSyncAgentPrivilege  Synchronize directory service data    SeEnableDelegationPrivilege  Enable computer and user accounts to                                 be trusted for delegation        SeManageVolumePrivilege  Perform volume maintenance tasks         SeImpersonatePrivilege  Impersonate a client after authentication        SeCreateGlobalPrivilege  Create global objects</pre><p><a class="indexterm" name="id2623239"></a>    SambaチームはUNIX/Linux環境で論理的に問題が無く、有用な権限のみを実装している。    Windows 200X/XPにおける権限の多くはUNIX中のものに直接相当するものは無い。    </p></div></div><div class="sect1" title="管理者のドメインSID"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2623256"></a>管理者のドメインSID</h2></div></div></div><p><a class="indexterm" name="id2623264"></a><a class="indexterm" name="id2623272"></a><a class="indexterm" name="id2623279"></a><a class="indexterm" name="id2623286"></a><a class="indexterm" name="id2623292"></a>すべてのWindows NT4とそれ以降のサーバはdomain Administratorアカウントを必要とすることに注意。Sambaバージョン3.0.11以降は、割り当てられた権利と権限(<a class="link" href="rights.html" title="Chapter 15. User Rights and Privileges">ユーザの権利と権限</a>を参照)経由で管理者の任務を実行することを許可する。サーバのpassdbバックエンド中のアカウントは、よく知られている既定値の管理者アカウントのRIDに設定できる。Sambaドメインコントローラ上のドメインSIDを得るためには、以下のコマンドを実行する:</p><pre class="screen"><code class="prompt">root# </code> net getlocalsidSID for domain FOO is: S-1-5-21-4294955119-3368514841-2087710299</pre><p><a class="indexterm" name="id2623337"></a>以下のように、<code class="literal">pdbedit</code>を使ってアカウントにドメイン管理者のRIDを割り当てても良い:<a class="indexterm" name="id2623352"></a></p><pre class="screen"><code class="prompt">root# </code> pdbedit -U S-1-5-21-4294955119-3368514841-2087710299-500 -u root -r</pre><p></p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><a class="indexterm" name="id2623376"></a><a class="indexterm" name="id2623383"></a><a class="indexterm" name="id2623390"></a><a class="indexterm" name="id2623397"></a>500というRIDの値は、よく知られた既定値のAdministratorアカウントの標準値である。これは、Windowsマシン上かドメイン上のAdministratorアカウントが持つ権利と権限を割り当てるRIDである。UNIX/Linux環境下では、同等なものはUID=0(rootアカウント)である。</p></div><p><a class="indexterm" name="id2623418"></a><a class="indexterm" name="id2623425"></a><a class="indexterm" name="id2623433"></a><a class="indexterm" name="id2623440"></a>Sambaバージョン 3.0.11以降のリリースでは、WindowsのユーザかWindowsのグループアカウントのために設定された権利と権限と同等のものを提供するAdministratorアカウントなしで動作させることが可能である。</p></div><div class="sect1" title="よくあるエラー"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2623459"></a>よくあるエラー</h2></div></div></div><div class="sect2" title="Windowsクライアントの管理が出来る権利と権限は何か?"><div class="titlepage"><div><div><h3 class="title"><a name="id2623465"></a>Windowsクライアントの管理が出来る権利と権限は何か?</h3></div></div></div><p><a class="indexterm" name="id2623475"></a><a class="indexterm" name="id2623482"></a><a class="indexterm" name="id2623489"></a><a class="indexterm" name="id2623496"></a>	Windows NT4(とそれ以降)のクライアントがドメインに参加したとき、ドメイン全体での	<code class="literal">Domain Admins</code>グループはクライアント上のローカルな	<code class="literal">Administrators</code>グループのメンバシップに追加される。ドメイン	グローバルの<code class="literal">Domain Admins</code>グループのメンバであるユーザは誰でも	Windowsクライアント上で管理者の権利と権限を持つ。	</p><p><a class="indexterm" name="id2623533"></a><a class="indexterm" name="id2623540"></a><a class="indexterm" name="id2623547"></a><a class="indexterm" name="id2623554"></a><a class="indexterm" name="id2623561"></a>	これは、ユーザがドメインサーバ上でも管理者の権利と権限を持ってしまうために、	必ずしもすべての場合において良い解決方法とは言えない。Windowsクライアント上の	<code class="literal">Power Users</code>グループはワークステーションのみのローカルな	管理者権限を持つ。任意のグローバルユーザかドメイングローバルグループは、	ローカルワークステーションの<code class="literal">Power Users</code>グループのメンバに	追加できる。	</p><p><a class="indexterm" name="id2623596"></a><a class="indexterm" name="id2623603"></a><a class="indexterm" name="id2623611"></a><a class="indexterm" name="id2623618"></a>	<a class="link" href="NetCommand.html#nestedgrpmgmgt" title="ネストされたグループのサポート">ネストされたグループのサポート</a>に、Windows	ワークステーション上でのローカルグループにドメインユーザとグループを追加する	方法の例がある。Sambaサーバから<code class="literal">net</code>を使うことで、この作業が	行える。	</p><p><a class="indexterm" name="id2623647"></a><a class="indexterm" name="id2623654"></a><a class="indexterm" name="id2623661"></a>	これを行う別の方法は、Windowsワークステーションに<code class="literal">Administrator</code>	としてログオンし、<code class="literal">cmd</code>シェルを開き、以下を実行する:</p><pre class="screen"><code class="prompt">C:\> </code> net localgroup administrators /add <strong class="userinput"><code>domain_name\entity</code></strong></pre><p>	ここで、<code class="literal">entity</code>は、ドメインユーザかドメイングループのアカウント名である。	</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="idmapper.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="optional.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="AccessControls.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 14. 識別情報のマッピング(IDMAP) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 16. ファイル、ディレクトリと共有のアクセス制御</td></tr></table></div></body></html>