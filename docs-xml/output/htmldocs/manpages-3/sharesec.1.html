<?xml version="1.0" encoding="UTF-8"?>
<html><head><title>sharesec</title><link rel="stylesheet" href="../samba.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="sharesec"><a name="sharesec.1"/><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>sharesec — 共有のACLに対する設定と取得</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="literal">sharesec</code> {sharename} [-r, --remove=ACL] [-m, --modify=ACL] [-a, --add=ACL] [-R, --replace=ACLs] [-D, --delete] [-v, --view] [-M, --machine-sid] [-F, --force] [-d, --debuglevel=DEBUGLEVEL] [-s, --configfile=CONFIGFILE] [-l, --log-basename=LOGFILEBASE] [-V, --version] [-?, --help] [--usage]</p></div></div><div class="refsect1" title="説明"><a name="id2489353"/><h2>説明</h2><p>このツールは<a class="citerefentry" href="samba.7.html"><span class="citerefentry"><span class="refentrytitle">samba</span>(7)</span></a>システムの一部である。</p><p><code class="literal">sharesec</code>プログラムは、SMBファイル共有上の共有のパーミッションを
	操作するプログラムである。</p></div><div class="refsect1" title="オプション"><a name="id2489382"/><h2>オプション</h2><p>以下のオプションは<code class="literal">sharesec</code>プログラムで有効である。ACLのフォーマットは、
	ACL FORMATセクションで説明されている。</p><div class="variablelist"><dl><dt><span class="term">-a|--add=ACL</span></dt><dd><p>指定されたACLリストにACEを追加する。
		</p></dd><dt><span class="term">-D|--delete</span></dt><dd><p>すべてのセキュリティディスクリプタを削除する。
		</p></dd><dt><span class="term">-F|--force</span></dt><dd><p>強制的にACLを格納する。
		</p></dd><dt><span class="term">-m|--modify=ACL</span></dt><dd><p>存在するACEを変更する。
		</p></dd><dt><span class="term">-M|--machine-sid</span></dt><dd><p>マシンのSIDを初期化する。
		</p></dd><dt><span class="term">-r|--remove=ACL</span></dt><dd><p>ACEを削除する。
		</p></dd><dt><span class="term">-R|--replace=ACLS</span></dt><dd><p>
		存在する共有パーミッションACLを上書きする。
		</p></dd><dt><span class="term">-h|--help</span></dt><dd><p>コマンドラインオプションの要約を表示する。
</p></dd><dt><span class="term">-d|--debuglevel=level</span></dt><dd><p><em class="replaceable"><code>level</code></em> は0から10までの整数値である。
既定値の値は、パラメータが設定されていなければ0である。</p><p>この値を大きくするほど、サーバの動作に関するより詳細な情報が
ログファイルに記録される。レベル 0 では、致命的なエラーと重大な警告
のみが記録される。レベル 1 は日々の運用に適しており、少量の稼働状況
に関する情報を生成する。</p><p>1 より上のレベルは大量のログが生成されるので、問題解決の時にのみ
使用すべきである。 3 より上のレベルは開発者だけが利用するように設計されて
おり、莫大な量のログデータが生成される。そのほとんどは非常に謎めいた内容
となっている</p><p>このパラメータの指定は、<code class="filename">smb.conf</code>ファイル中の、 <a class="link" href="smb.conf.5.html#" target="_top"/> パラメータの
指定よりも優先する。</p></dd><dt><span class="term">-V</span></dt><dd><p>プログラムのバージョン番号を表示する。
</p></dd><dt><span class="term">-s &lt;configuration file&gt;</span></dt><dd><p>サーバーが必要とする詳細な設定を含む設定ファイルを
指定する。このファイルには、サーバーが提供するサービスに関する記述や、
どの printcap ファイルを利用するかといった情報が含まれている。詳細は
<code class="filename">smb.conf</code> を参照のこと。設定ファイルの名前の既定値は、コンパイル時
に決定される。
</p></dd><dt><span class="term">-l|--log-basename=logdirectory</span></dt><dd><p>ログ/デバッグファイルのファイル名。拡張子として
<code class="constant">".progname"</code> が追加される(例えば log.smbclient,
log.smbd,など)。ログファイルはクライアントによって削除されることはない。 
</p></dd></dl></div></div><div class="refsect1" title="ACL FORMAT"><a name="id2489626"/><h2>ACL FORMAT</h2><p>ACLのフォーマットは、1つまたはそれ以上の、カンマ又は改行で分離された、ACL
	エントリである。1つのACLエントリは以下のうちのどれかである:</p><pre class="programlisting">
	REVISION:&lt;revision number&gt;
	OWNER:&lt;sid or name&gt;
	GROUP:&lt;sid or name&gt;
	ACL:&lt;sid or name&gt;:&lt;type&gt;/&lt;flags&gt;/&lt;mask&gt;
	</pre><p>
	ACLのリビジョンはセキュリティディスクリプタの　内部Windows NT ACL リビジョン
	を指定する。もしも指定されなければ既定値として1が取られる。1以外の値を使うこと
	は、奇妙な振る舞いを引き起こすかもしれない。</p><p>
	owner と group は、それぞれオブジェクトのためのownerとgroup SIDを指定する。
	もしもSIDがS-1-x-y-z形式で指定されれば、それが使われ、それ以外では、
	名前で指定されたと見なされ、対象のファイル又はディレクトリが存在するサーバ
	上でSIDに解決される。</p><p>
	ACLは、そのSIDに対するパーミッションを指定する。このSIDはS-1-x-y-z
	形式で指定されるが、そのファイル又はディレクトリが存在するサーバ上で
	名前解決が出来る場合には、名前で指定できる。type,flagsとmask値は、そのSIDに
	対して許可されるアクセス権の種類を決める。</p><p>
	typeはALLOWEDまたはDENIEDを、SIDに対するアクセスの許可/拒否として使う
	ことができる。flagの値は共有のACLに対しては通常ゼロである。
	</p><p>
	maskはSIDに対して許可されるアクセス権を表現する値である。これは、10進又は
	16進の値として与えられるか、同じ名前の、Windows NTにおけるアクセス許可の
	指定時に使用される、以下のテキスト文字列のどれか1つを使うことも出来る。
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="emphasis"><em>R</em></span> - 読み取りを許可</p></li><li class="listitem"><p><span class="emphasis"><em>W</em></span> - 書き込みを許可</p></li><li class="listitem"><p><span class="emphasis"><em>X</em></span> - オブジェクトの実行を許可</p></li><li class="listitem"><p><span class="emphasis"><em>D</em></span> - オブジェクトの削除</p></li><li class="listitem"><p><span class="emphasis"><em>P</em></span> - パーミッションの変更</p></li><li class="listitem"><p><span class="emphasis"><em>O</em></span> - 所有権の取得</p></li></ul></div><p>以下の組み合わせパーミッションも指定することができる:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="emphasis"><em>READ</em></span> -  'RX' と同等
		permissions</p></li><li class="listitem"><p><span class="emphasis"><em>CHANGE</em></span> - 'RXWD' パーミッションと同等
		</p></li><li class="listitem"><p><span class="emphasis"><em>FULL</em></span> - 'RWXDPO' パーミッションと同等</p></li></ul></div></div><div class="refsect1" title="終了ステータス"><a name="id2487573"/><h2>終了ステータス</h2><p>The <code class="literal">sharesec</code>プログラムは、操作が実行された時の成功、またはそれ以外の状態に
	応じて終了ステータスをセットする。終了ステータスは以下の値のうちのどれかである。</p><p>もしも操作が成功すれば、sharesecは終了ステータスを0にして戻る。もしも、
	<code class="literal">sharesec</code>が指定されたサーバに接続できないか、ACLの設定
	又は取得時にエラーが生じたならば、終了ステータスは1で戻る。もしもコマンド行
	引数の解釈時にエラーがあれば終了ステータスは2で戻る。</p></div><div class="refsect1" title="実行例"><a name="id2487608"/><h2>実行例</h2><p>SIDに対してフルアクセスを追加
	<em class="parameter"><code>S-1-5-21-1866488690-1365729215-3963860297-17724</code></em> on
	<em class="parameter"><code>share</code></em>:
	</p><pre class="programlisting">
	host:~ # sharesec share -a S-1-5-21-1866488690-1365729215-3963860297-17724:ALLOWED/0/FULL
	</pre><p><em class="parameter"><code>share</code></em>に対するすべてのACEを表示:
	</p><pre class="programlisting">
	host:~ # sharesec share -v
	REVISION:1
	OWNER:(NULL SID)
	GROUP:(NULL SID)
	ACL:S-1-1-0:ALLOWED/0/0x101f01ff
	ACL:S-1-5-21-1866488690-1365729215-3963860297-17724:ALLOWED/0/FULL
	</pre></div><div class="refsect1" title="バージョン"><a name="id2487657"/><h2>バージョン</h2><p>このマニュアルページは Samba バージョン 3用である。</p></div><div class="refsect1" title="著者"><a name="id2487668"/><h2>著者</h2><p>オリジナルの Samba ソフトウェアと関連するユーティリティは、Andrew
	Tridgell によって作成された。現在 Samba は Samba Team によって、Linux
	カーネルの開発と同様のオープンソースプロジェクトとして開発が行なわれている。
	</p></div><div class="refsect1" title="日本語訳"><a name="id2487684"/><h2>日本語訳</h2><p>このマニュアルページは Samba 3.3.6 - 3.5.6 対応のものである。</p><p>このドキュメントの Samba 3.3.6 - 3.5.6 対応の翻訳は
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>太田俊哉 (ribbon@samba.gr.jp)</p></li></ul></div><p>	
        によって行なわれた。</p></div></div></body></html>
