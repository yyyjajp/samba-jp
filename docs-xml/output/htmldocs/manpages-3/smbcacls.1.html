<?xml version="1.0" encoding="UTF-8"?>
<html><head><title>smbcacls</title><link rel="stylesheet" href="../samba.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="smbcacls"><a name="smbcacls.1"/><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>smbcacls — Windows NT 上のファイルやディレクトリの ACL の取得や設定</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="literal">smbcacls</code> {//server/share} {filename} [-D acls] [-M acls] [-a acls] [-S acls] [-C name] [-G name] [--numeric] [-t] [-U username] [-h] [-d]</p></div></div><div class="refsect1" title="説明"><a name="id2490574"/><h2>説明</h2><p>このツールは <a class="citerefentry" href="samba.7.html"><span class="citerefentry"><span class="refentrytitle">samba</span>(7)</span></a>システムの一部である。</p><p><code class="literal">smbcacls</code> は、SMB ファイル共有内の ACL
	(Access Control Lists) を操作するプログラムである。</p></div><div class="refsect1" title="オプション"><a name="id2490604"/><h2>オプション</h2><p><code class="literal">smbcacls</code> コマンドでは以下のオプションが
	利用可能である。ACL の形式は、ACL FORMAT セクションで記述する。</p><div class="variablelist"><dl><dt><span class="term">-a acls</span></dt><dd><p>ACL リストで指定された ACL を追加する。既存の ACL
		は変更されない。</p></dd><dt><span class="term">-M acls</span></dt><dd><p>コマンドラインで指定された ACL の mask 値
		(パーミッション) を変更する。ACL リストに指定された ACL が存在しない場合、その ACL 毎にエラーが出力される。
		</p></dd><dt><span class="term">-D acls</span></dt><dd><p>コマンドラインで指定された ACL を削除する。ACL
		ACL リストに指定された ACL が存在しない場合、その ACL 毎にエラーが
		出力される。</p></dd><dt><span class="term">-S acls</span></dt><dd><p>このコマンドは、コマンドラインで指定された ACL
		のみをファイルに設定する。その他の全ての ACL は削除される。
		呼び出しを成功させるためには、指定する ACL に最低限リビジョン、タイプ、
		所有者とグループが含まれている必要がある。</p></dd><dt><span class="term">-U username</span></dt><dd><p>指定されたサービスに接続する際に利用するユーザ名を
		指定する。ユーザ名が "username" の形式で与えられた場合、<a class="citerefentry" href="smb.conf.5.html"><span class="citerefentry"><span class="refentrytitle">smb.conf</span>(5)</span></a> で指定されたワークグループが用いられ、ユーザには
		パスワード入力を求めるプロンプトが表示される。"username%password"
		もしくは "DOMAIN\username%password" を指定した場合、パスワードや
		ワークグループ名は指定されたものが用いられる。</p></dd><dt><span class="term">-C name</span></dt><dd><p>
		<em class="parameter"><code>-C</code></em> オプションを利用することで、
		ファイルやディレクトリの所有者を name で指定したアカウントに変更することが可能である。
		name は S-1-x-y-z 形式の sid で指定するか、
		最初の引数で指定したサーバが認識可能な名前で指定する。</p><p>このコマンドは -M OWNER:name の短縮形になる。
		</p></dd><dt><span class="term">-G name</span></dt><dd><p>ファイルやディレクトリのグループ所有者は、<em class="parameter"><code>
		-G</code></em> オプションを利用することで指定した name
		に変更することが可能である。名前は S-1-x-y-z 形式の sid で指定するか、
		先頭の引数で指定したサーバが認識可能な name で指定する。</p><p>このコマンドは -M OWNER:name の短縮形になる。</p></dd><dt><span class="term">--numeric</span></dt><dd><p>このオプションは、全ての ACL 情報を数値形式で
		表示させる。デフォルトでは、SID は名前に、ACE の type と mask は、
		可読性のある文字列形式に変換される。 </p></dd><dt><span class="term">-t</span></dt><dd><p>
		実際に処理は行わず、指定した引数の正当性を検証する。
		</p></dd><dt><span class="term">-h|--help</span></dt><dd><p>Print a summary of command line options.
</p></dd><dt><span class="term">-d|--debuglevel=level</span></dt><dd><p><em class="replaceable"><code>level</code></em> is an integer 
from 0 to 10. The default value if this parameter is 
not specified is 0.</p><p>The higher this value, the more detail will be 
logged to the log files about the activities of the 
server. At level 0, only critical errors and serious 
warnings will be logged. Level 1 is a reasonable level for
day-to-day running - it generates a small amount of 
information about operations carried out.</p><p>Levels above 1 will generate considerable 
amounts of log data, and should only be used when 
investigating a problem. Levels above 3 are designed for 
use only by developers and generate HUGE amounts of log
data, most of which is extremely cryptic.</p><p>Note that specifying this parameter here will 
override the <a class="link" href="smb.conf.5.html#" target="_top"/> parameter
in the <code class="filename">smb.conf</code> file.</p></dd><dt><span class="term">-V|--version</span></dt><dd><p>Prints the program version number.
</p></dd><dt><span class="term">-s|--configfile &lt;configuration file&gt;</span></dt><dd><p>The file specified contains the 
configuration details required by the server.  The 
information in this file includes server-specific
information such as what printcap file to use, as well 
as descriptions of all the services that the server is 
to provide. See <code class="filename">smb.conf</code> for more information.
The default configuration file name is determined at 
compile time.</p></dd><dt><span class="term">-l|--log-basename=logdirectory</span></dt><dd><p>Base directory name for log/debug files. The extension
<code class="constant">".progname"</code> will be appended (e.g. log.smbclient, 
log.smbd, etc...). The log file is never removed by the client.
</p></dd></dl></div></div><div class="refsect1" title="ACL FORMAT"><a name="id2491032"/><h2>ACL FORMAT</h2><p>ACL の形式は、コンマか改行記号で 1 つ以上の ACL エントリを区切ったもの
	である。ACL エントリは以下のいずれかの形式をとる: </p><pre class="programlisting"> 
REVISION:&lt;revision number&gt;
OWNER:&lt;sid or name&gt;
GROUP:&lt;sid or name&gt;
ACL:&lt;sid or name&gt;:&lt;type&gt;/&lt;flags&gt;/&lt;mask&gt;
</pre><p>REVISION は、セキュリティディスクリプタに対する内部的な Windows
	NT ACL のリビジョンを表す。特に指定されない場合のデフォルトは 1 である。
	1 以外の値を指定した場合は、挙動がおかしくなることがある。</p><p>OWNER と GROUP はオブジェクトの所有者およびグループの sid を指定する。
	SID が S-1-x-y-z の形式で指定された場合はそのまま用いられ、
	それ以外の場合、指定された名前はファイルやディレクトリが存在するサーバに
	よって解析される。</p><p>ACL は SID に対して与えられるパーミッションを指定する。この SID も
	S-1-x-y-z の形式で指定するか、名前で指定することが可能で、後者の場合、
	ファイルやディレクトリが存在するサーバによって解析される。 type, flag, mask
	の値は、SIDに対して与えられたアクセスの種類を指定する。</p><p>
	typeは SID に対する許可および拒否に対応する(訳注: 実際は type は ALLOWED か DENIED を指定し、それぞれ SID に対するアクセス許可および拒否に対応する、が正しい(fumiya))。
	flag の値はファイルの ACL の場合通常 0 であり、ディレクトリの ACL の場合は通常
	9 か 2 である。 共通的な flags は以下の通りである: </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="constant">#define SEC_ACE_FLAG_OBJECT_INHERIT     	0x1</code></p></li><li class="listitem"><p><code class="constant">#define SEC_ACE_FLAG_CONTAINER_INHERIT  	0x2</code></p></li><li class="listitem"><p><code class="constant">#define SEC_ACE_FLAG_NO_PROPAGATE_INHERIT     0x4</code></p></li><li class="listitem"><p><code class="constant">#define SEC_ACE_FLAG_INHERIT_ONLY       	0x8</code></p></li></ul></div><p>現在のところ flag の値は 10 進数もしくは 16
	進数でのみ指定することができる。</p><p>mask は SID に対して与えられたアクセス権を表現する値である。それは 10
	進数もしくは 16 進数で設定するか、NT のファイルパーミッションと同じ名称である
	以下の文字列のうちの一つを利用して設定することができる。</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="emphasis"><em>R</em></span> - 読みとりの許可 </p></li><li class="listitem"><p><span class="emphasis"><em>W</em></span> - 書き込みの許可</p></li><li class="listitem"><p><span class="emphasis"><em>X</em></span> - オブジェクトの実行</p></li><li class="listitem"><p><span class="emphasis"><em>D</em></span> - オブジェクトの削除</p></li><li class="listitem"><p><span class="emphasis"><em>P</em></span> - パーミッションの変更</p></li><li class="listitem"><p><span class="emphasis"><em>O</em></span> - 所有権の取得</p></li></ul></div><p>以下の複合パーミッションも指定可能である:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="emphasis"><em>READ</em></span> - 'RX'
		パーミッションと等価である。
		</p></li><li class="listitem"><p><span class="emphasis"><em>CHANGE</em></span> - 'RXWD'
		パーミッションと等価である。
		</p></li><li class="listitem"><p><span class="emphasis"><em>FULL</em></span> - 'RWXDPO'
		パーミッションと等価である。
		</p></li></ul></div></div><div class="refsect1" title="終了ステータス"><a name="id2491241"/><h2>終了ステータス</h2><p><code class="literal">smbcacls</code> コマンドは、操作が成功したか、
	その他の結果になったかに応じた戻り値を設定する。 
	戻り値は、以下の値のいずれかになる。</p><p>操作が成功した場合、<code class="literal">smbcacls</code> は戻り値として 0
	を返す。もし <code class="literal">smbcacls</code> が指定したサーバに接続できなかったか、
	ACL を取得または設定する際にエラーが発生した場合、戻り値として 1 が返される。
	コマンドライン引数の解析に失敗した場合は、戻り値として 2 が返される。</p></div><div class="refsect1" title="バージョン"><a name="id2491287"/><h2>バージョン</h2><p>このマニュアルページは Samba バージョン 3用である。</p></div><div class="refsect1" title="著者"><a name="id2491298"/><h2>著者</h2><p>オリジナルの Samba ソフトウェアと関連するユーティリティは、Andrew
	Tridgell によって作成された。現在 Samba は Samba Team によって、Linux
	カーネルの開発と同様のオープンソースプロジェクトとして開発が行なわれている。
	</p><p><code class="literal">smbcacls</code> は Andrew Tridgell と Tim Potter
	によって書かれた。</p><p> Samba 2.2 における DocBook 形式への変換は、Gerald Carter
	によって行なわれた。Samba 3.0 における DocBook XML 4.2 形式への変換は、
	Alexander Bokovoy によって行われた。</p></div><div class="refsect1" title="日本語訳"><a name="id2491334"/><h2>日本語訳</h2><p>このマニュアルページは Samba 3.0.0 - 3.5.3 対応のものである。</p><p>このドキュメントの Samba 3.0.0 - Samba 3.5.3 対応の翻訳は
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>たかはしもとのぶ (monyo@samba.gr.jp)</p></li><li class="listitem"><p>山田 史朗 (shiro@miraclelinux.com)</p></li></ul></div><p>	
        によって行なわれた。</p></div></div></body></html>
