<?xml version="1.0" encoding="UTF-8"?>
<html><head><title>eventlogadm</title><link rel="stylesheet" href="../samba.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="eventlogadm"><a name="eventlogadm.8"/><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>eventlogadm — Samba のイベントログ格納領域にレコードを書き込む</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="literal">eventlogadm</code> [<code class="option">-d</code>] [<code class="option">-h</code>]  <code class="option">-o</code>
		<code class="literal">addsource</code>
		<em class="replaceable"><code>EVENTLOG</code></em>
		<em class="replaceable"><code>SOURCENAME</code></em>
		<em class="replaceable"><code>MSGFILE</code></em>
		 </p></div><div class="cmdsynopsis"><p><code class="literal">eventlogadm</code> [<code class="option">-d</code>] [<code class="option">-h</code>]  <code class="option">-o</code>
		<code class="literal">write</code>
		<em class="replaceable"><code>EVENTLOG</code></em>
		 </p></div><div class="cmdsynopsis"><p><code class="literal">eventlogadm</code> [<code class="option">-d</code>] [<code class="option">-h</code>]  <code class="option">-o</code>
                <code class="literal">dump</code>
                <em class="replaceable"><code>EVENTLOG</code></em>
                <em class="replaceable"><code>RECORD_NUMBER</code></em>
                 </p></div></div><div class="refsect1" title="説明"><a name="id2490609"/><h2>説明</h2><p>このツールは <a class="citerefentry" href="samba.1.html"><span class="citerefentry"><span class="refentrytitle">samba</span>(1)</span></a> の一部として提供されている。</p><p><code class="literal">eventlogadm</code>
は特定の形式に従ったイベントログのレコードを標準入力から読み込み、
それらを Samba のイベントログ格納領域に書き込む。こうすることで、
Windows クライアントから通常の管理ツールを使ってこれらのレコードを
操作できるようになる。</p></div><div class="refsect1" title="オプション"><a name="id2490647"/><h2>オプション</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-d</code></span></dt><dd><p>
		<code class="literal">-d</code> オプションを指定すると、
		<code class="literal">eventlogadm</code>はデバッグ情報を出力する。
		</p></dd><dt><span class="term">
		<code class="option">-o</code>
		<code class="literal">addsource</code>
		<em class="replaceable"><code>EVENTLOG</code></em>
		<em class="replaceable"><code>SOURCENAME</code></em>
		<em class="replaceable"><code>MSGFILE</code></em>
		</span></dt><dd><p>
		<code class="literal">-o addsource</code> オプションは、新しいイベントログの
ソースを生成する。
		</p></dd><dt><span class="term">
		<code class="option">-o</code>
		<code class="literal">write</code>
		<em class="replaceable"><code>EVENTLOG</code></em>
		</span></dt><dd><p>
		<code class="literal">-o write</code> はイベントログのレコードを標準入力から
		読み込み、それらを EVENTLOG で指定された名前の Samba のイベントログ
		格納領域に書き込む。
		</p></dd><dt><span class="term">
                <code class="option">-o</code>
                <code class="literal">dump</code>
                <em class="replaceable"><code>EVENTLOG</code></em>
                <em class="replaceable"><code>RECORD_NUMBER</code></em>
                </span></dt><dd><p>
                <code class="literal">-o dump</code>は、EVENTLOG tdbからのイベントログレコードを
		読み、画面上の標準出力にそれをダンプする。
                </p></dd><dt><span class="term"><code class="option">-h</code></span></dt><dd><p>
		使用法を表示する
		</p></dd></dl></div></div><div class="refsect1" title="EVENTLOG レコードフォーマット"><a name="id2490806"/><h2>EVENTLOG レコードフォーマット</h2><p>書き込みの際、<code class="literal">eventlogadm</code>
は標準入力から書式に従ったレコードが読み込めることを期待している。
これらのレコードは、レコードキーとデータがコロン(:)で区切られた
行の並びである。各レコードは、少なくとも１個以上の空行で区切られている
必要がある。</p><p>イベントログのフィールドは以下の通り:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		<code class="literal">LEN</code> - <code class="literal">eventlogadm</code> はこの
フィールドの値を自動計算するので、このフィールドには 0 をセットする。
		</p></li><li class="listitem"><p>
		<code class="literal">RS1</code> - 1699505740 という値をセットする。
		</p></li><li class="listitem"><p>
		<code class="literal">RCN</code> - 0 をセットする。
		</p></li><li class="listitem"><p>
		<code class="literal">TMG</code> -
イベントログが生成された時刻。
00:00:00 January 1, 1970, UTC からの 累積秒数をセットする。
		</p></li><li class="listitem"><p>
		<code class="literal">TMW</code> -
イベントログが書き込まれた時刻。
00:00:00 January 1, 1970, UTC からの 累積秒数をセットする。
		</p></li><li class="listitem"><p>
		<code class="literal">EID</code> - イベントログ ID
		</p></li><li class="listitem"><p>
		<code class="literal">ETP</code> - イベントログのタイプで、以下のいずれか：
		"INFO",
		"ERROR", "WARNING", "AUDIT
		SUCCESS" or "AUDIT FAILURE".
		</p></li><li class="listitem"><p>
		<code class="literal">ECT</code> -
イベントカテゴリ：これはマシンファイルに依存する。
主にイベントビューワ－におけるフィルタ条件として使われる。
		</p></li><li class="listitem"><p>
		<code class="literal">RS2</code> - 0 をセットする。
		</p></li><li class="listitem"><p>
		<code class="literal">CRN</code> - 0 をセットする。
		</p></li><li class="listitem"><p>
		<code class="literal">USL</code> - 0 をセットする。
		</p></li><li class="listitem"><p>
		<code class="literal">SRC</code> -
このフィールドはイベントログに関連付けられるソースを指定する。
イベントログとしてメッセージファイルが指定された場合、
メッセージファイルの DLL に対してこのソース名が関連付けられた
レジストリーエントリーがあるはずである。
		</p></li><li class="listitem"><p>
		<code class="literal">SRN</code> -
イベントログが生成されたマシンの名前。これは通常ホスト名となる。
		</p></li><li class="listitem"><p>
		<code class="literal">STR</code> - イベントログに関連付けられたテキスト。
１つのレコードに複数の文字列を持つこともできる。
		</p></li><li class="listitem"><p>
		<code class="literal">DAT</code> - このフィールドはセットしないようにする。
		</p></li></ul></div></div><div class="refsect1" title="記述例"><a name="id2491048"/><h2>記述例</h2><p>
<code class="literal">eventlogadm</code> で認識できるレコードフォーマットの例：
	</p><pre class="programlisting">
	LEN: 0
	RS1: 1699505740
	RCN: 0
	TMG: 112863.3.6
	TMW: 112863.3.6
	EID: 1000
	ETP: INFO
	ECT: 0
	RS2: 0
	CRN: 0
	USL: 0
	SRC: cron
	SRN: dmlinux
	STR: (root) CMD ( rm -f /var/spool/cron/lastrun/cron.hourly)
	DAT:
	</pre><p>
メッセージファイルの DLL を指定して、イベントログのソースをセットする：
	</p><pre class="programlisting">
	eventlogadm -o addsource Application MyApplication | \\
	    	%SystemRoot%/system32/MyApplication.dll
	</pre><p>
システムログからのフィルターメッセージをイベントログとして指定する：
	</p><pre class="programlisting">
	tail -f /var/log/messages | \\
		入力をパースしてイベントログのレコードにするプログラム | \\
	      	eventlogadm SystemLogEvents
	</pre></div><div class="refsect1" title="バージョン"><a name="id2491107"/><h2>バージョン</h2><p>このマニュアルは Samba スイートのバージョン 3.0.25 に適合する。</p></div><div class="refsect1" title="著者"><a name="id2491119"/><h2>著者</h2><p>
		オリジナルの Samba ソフトウェアおよび関連するユーティリティーは、
		Andrew Tridgell によって書かれた。現在は Samba は Samba Team によって 
		Linux カーネルの開発と同様に、オープンソースプロジェクトとして
		開発されている。
	</p></div><div class="refsect1" title="日本語訳"><a name="id2491139"/><h2>日本語訳</h2><p>このマニュアルページは Samba 3.5.0 - 3.5.4 対応のものである。</p><p>このドキュメントの Samba 3.2.4 - 3.5.4 対応の翻訳は
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>堀田 倫英(hotta@net-newbie.com)</p></li><li class="listitem"><p>太田俊哉(ribbon@samba.gr.jp)</p></li></ul></div><p>	
		によって行なわれた。</p></div></div></body></html>
