<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>smb_traffic_analyzer</title><link rel="stylesheet" href="../samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="smb_traffic_analyzer"><a name="vfs_smb_traffic_analyzer.8"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vfs_smb_traffic_analyzer — ヘルパアプリケーションに対して、ソケット経由でのSamba VFS読み出し	  書き込み操作のログを取る</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="literal">vfs objects = smb_traffic_analyzer</code></p></div></div><div class="refsect1" title="説明"><a name="id2528726"></a><h2>説明</h2><p>このVFSモジュールは、<a class="citerefentry" href="samba.7.html"><span class="citerefentry"><span class="refentrytitle">samba</span>(7)</span></a>システムの一部である。</p><p><code class="literal">vfs_smb_traffic_analyzer</code> VFSモジュールは、	  Sambaサーバ上のクライアント書き込みと読み出し操作のログを取り、	  このデータを、SQLデータベースに送る、ヘルパプログラムに対して	  ソケット上で送信する。ヘルパプログラムの詳細な情報は、	  http://holger123.wordpress.com/smb-traffic-analyzer/	  にあるプロジェクトホームページから得られる。	</p><p><code class="literal">vfs_smb_traffic_analyzer</code>は現在、以下のVFS操作を	  理解する:</p><table border="0" summary="Simple list" class="simplelist"><tr><td>write</td></tr><tr><td>pwrite</td></tr><tr><td>read</td></tr><tr><td>pread</td></tr></table><p><code class="literal">vfs_smb_traffic_analyzer</code> sends the following data	in a fixed format seperated by a comma through either an internet or a	unix domain socket:</p><p><code class="literal">vfs_smb_traffic_analyzer</code>は、コンマによって分離された	  固定フォーマットで、以下のデータを、インターネットまたはUNIXドメインソケット	  を通じて送る:</p><pre class="programlisting">	BYTES|USER|DOMAIN|READ/WRITE|SHARE|FILENAME|TIMESTAMP	</pre><p>レコードの詳細:	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">BYTES</code> - VFS操作のバイト単位の長さ</p></li><li class="listitem"><p><code class="literal">USER</code> - 操作を開始したユーザ</p></li><li class="listitem"><p><code class="literal">DOMAIN</code> - ユーザのドメイン</p></li><li class="listitem"><p><code class="literal">READ/WRITE</code> - "W"なら書き込み操作、"R"なら読み出し操作</p></li><li class="listitem"><p><code class="literal">SHARE</code> - VFS操作が行われた共有の名前</p></li><li class="listitem"><p><code class="literal">FILENAME</code> - VFS操作によって使われたファイルの名前</p></li><li class="listitem"><p><code class="literal">TIMESTAMP</code> - VFS操作が行われたことを示す "yyyy-mm-dd hh-mm-ss.ms" での時間</p></li></ul></div><p>	</p><p>このモジュールはスタック可能である。</p></div><div class="refsect1" title="オプション"><a name="id2488352"></a><h2>オプション</h2><div class="variablelist"><dl><dt><span class="term">smb_traffic_analyzer:mode = STRING</span></dt><dd><p>もしも、STRINGが "unix_domain_socket" に一致するならば、モジュール		  は/var/tmp/stadsocketに位置するunixドメインソケットを使い、もしも、		  STRINGにそのほかの文字列か、未定義ならば、モジュールは、データの転送		  のためにインターネットドメインソケットを使う。</p></dd><dt><span class="term">smb_traffic_analyzer:host = STRING</span></dt><dd><p>モジュールはホスト名がSTRINGという名前のシステムにデータを送る。</p></dd><dt><span class="term">smb_traffic_analyzer:port = STRING</span></dt><dd><p>モジュールはSTRING中で指定されたTCPポートにデータを送る。</p></dd><dt><span class="term">smb_traffic_analyzer:anonymize_prefix = STRING</span></dt><dd><p>モジュールは、STRINGで与えられたプレフィックスと単純なハッシュ値で		  ユーザ名を置き換える。		</p></dd><dt><span class="term">smb_traffic_analyzer:total_anonymization = STRING</span></dt><dd><p>もしもSTRINGが'yes'に一致するならば、このモジュールは、		  追加のハッシュ値を生成しないで、smb_traffic_analyzer:anonymize_prefix		  オプションによって与えられる文字列で、任意のユーザ名を置き換える。		  これは、任意の転送データが1人のユーザにマッピングされ、ユーザに		  関連するデータの完全な匿名化を提供する。</p></dd></dl></div></div><div class="refsect1" title="使用例"><a name="id2488462"></a><h2>使用例</h2><p>unixドメインソケットを使い、共有"example_share"上でモジュールを走らせる</p><pre class="programlisting">	<em class="parameter"><code>[example_share]</code></em>	<a class="link" href="smb.conf.5.html#PATH" target="_top">path = /data/example</a>	<a class="link" href="smb.conf.5.html#VFSOBJECTS" target="_top">vfs objects = smb_traffic_analyzer</a>	<a class="link" href="smb.conf.5.html#SMB_TRAFFIC_ANALYZER:MODE" target="_top">smb_traffic_analyzer:mode = unix_domain_socket</a>	</pre><p>The module running on share "example_share", using an internet socket,	connecting to host "examplehost" on port 3491.</p><p>インターネットソケットを使い、ポート3491のホスト名"examplehost"に対して	  接続し、共有"example_share"上でモジュールを走らせる</p><pre class="programlisting">	<em class="parameter"><code>[example_share]</code></em>	<a class="link" href="smb.conf.5.html#PATH" target="_top">path = /data/example</a>	<a class="link" href="smb.conf.5.html#VFSOBJECTS" target="_top">vfs objects = smb_traffic_analyzer</a>	<a class="link" href="smb.conf.5.html#SMB_TRAFFIC_ANALYZER:HOST" target="_top">smb_traffic_analyzer:host = examplehost</a>	<a class="link" href="smb.conf.5.html#SMB_TRAFFIC_ANALYZER:PORT" target="_top">smb_traffic_analyzer:port = 3491</a>	</pre><p>The module running on share "example_share", using an internet socket,	connecting to host "examplehost" on port 3491, anonymizing user names with	the prefix "User".</p><p>インターネットソケットを使い、ポート3491のホスト名"examplehost"に対して	  接続し、プレフィックス"User"でユーザ名を匿名化する</p><pre class="programlisting">	<em class="parameter"><code>[example_share]</code></em>	<a class="link" href="smb.conf.5.html#PATH" target="_top">path = /data/example</a>	<a class="link" href="smb.conf.5.html#VFSOBJECTS" target="_top">vfs objects = smb_traffic_analyzer</a>	<a class="link" href="smb.conf.5.html#SMB_TRAFFIC_ANALYZER:HOST" target="_top">smb_traffic_analyzer:host = examplehost</a>	<a class="link" href="smb.conf.5.html#SMB_TRAFFIC_ANALYZER:PORT" target="_top">smb_traffic_analyzer:port = 3491</a>	<a class="link" href="smb.conf.5.html#SMB_TRAFFIC_ANALYZER:ANONYMIZE_PREFIX" target="_top">smb_traffic_analyzer:anonymize_prefix = User</a>	</pre></div><div class="refsect1" title="バージョン"><a name="id2487502"></a><h2>バージョン</h2><p>このマニュアルページはSamba3.3(訳注 3.x?)用のものである。	</p></div><div class="refsect1" title="著者"><a name="id2487514"></a><h2>著者</h2><p>オリジナルの Samba ソフトウェアと関連するユーティリティは、Andrew	Tridgell によって作成された。現在 Samba は Samba Team に	よって、Linuxカーネルの開発と同様のオープンソースプロジェクト	として開発が行なわれている。</p><p>オリジナルのバージョンのVFSモジュールとヘルパツールは、	Holger Hetterichによって作成された。</p></div><div class="refsect1" title="日本語訳"><a name="id2487534"></a><h2>日本語訳</h2><p>このマニュアルページは Samba 3.3.6 - 3.4.6 対応のものである。</p><p>このドキュメントの Samba 3.2.8 - 3.4.6 対応の翻訳は	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>太田俊哉 (ribbon@samba.gr.jp)</p></li></ul></div><p>	        によって行なわれた。</p></div></div></body></html>