<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>smb_traffic_analyzer</title><link rel="stylesheet" href="../samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="smb_traffic_analyzer"><a name="vfs_smb_traffic_analyzer.8"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vfs_smb_traffic_analyzer &#8212; &#12504;&#12523;&#12497;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12395;&#23550;&#12375;&#12390;&#12289;&#12477;&#12465;&#12483;&#12488;&#32076;&#30001;&#12391;&#12398;Samba VFS&#35501;&#12415;&#20986;&#12375;
	  &#26360;&#12365;&#36796;&#12415;&#25805;&#20316;&#12398;&#12525;&#12464;&#12434;&#21462;&#12427;</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="literal">vfs objects = smb_traffic_analyzer</code></p></div></div><div class="refsect1" title="&#35500;&#26126;"><a name="id2528730"></a><h2>&#35500;&#26126;</h2><p>&#12371;&#12398;VFS&#12514;&#12472;&#12517;&#12540;&#12523;&#12399;&#12289;<a class="citerefentry" href="samba.7.html"><span class="citerefentry"><span class="refentrytitle">samba</span>(7)</span></a>&#12471;&#12473;&#12486;&#12512;&#12398;&#19968;&#37096;&#12391;&#12354;&#12427;&#12290;</p><p><code class="literal">vfs_smb_traffic_analyzer</code> VFS&#12514;&#12472;&#12517;&#12540;&#12523;&#12399;&#12289;
	  Samba&#12469;&#12540;&#12496;&#19978;&#12398;&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#26360;&#12365;&#36796;&#12415;&#12392;&#35501;&#12415;&#20986;&#12375;&#25805;&#20316;&#12398;&#12525;&#12464;&#12434;&#21462;&#12426;&#12289;
	  &#12371;&#12398;&#12487;&#12540;&#12479;&#12434;&#12289;SQL&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12395;&#36865;&#12427;&#12289;&#12504;&#12523;&#12497;&#12503;&#12525;&#12464;&#12521;&#12512;&#12395;&#23550;&#12375;&#12390;
	  &#12477;&#12465;&#12483;&#12488;&#19978;&#12391;&#36865;&#20449;&#12377;&#12427;&#12290;&#12504;&#12523;&#12497;&#12503;&#12525;&#12464;&#12521;&#12512;&#12398;&#35443;&#32048;&#12394;&#24773;&#22577;&#12399;&#12289;
	  http://holger123.wordpress.com/smb-traffic-analyzer/
	  &#12395;&#12354;&#12427;&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12507;&#12540;&#12512;&#12506;&#12540;&#12472;&#12363;&#12425;&#24471;&#12425;&#12428;&#12427;&#12290;
	</p><p><code class="literal">vfs_smb_traffic_analyzer</code>&#12399;&#29694;&#22312;&#12289;&#20197;&#19979;&#12398;VFS&#25805;&#20316;&#12434;
	  &#29702;&#35299;&#12377;&#12427;:</p><table border="0" summary="Simple list" class="simplelist"><tr><td>write</td></tr><tr><td>pwrite</td></tr><tr><td>read</td></tr><tr><td>pread</td></tr></table><p><code class="literal">vfs_smb_traffic_analyzer</code> sends the following data
	in a fixed format seperated by a comma through either an internet or a
	unix domain socket:</p><p><code class="literal">vfs_smb_traffic_analyzer</code>&#12399;&#12289;&#12467;&#12531;&#12510;&#12395;&#12424;&#12387;&#12390;&#20998;&#38626;&#12373;&#12428;&#12383;
	  &#22266;&#23450;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12391;&#12289;&#20197;&#19979;&#12398;&#12487;&#12540;&#12479;&#12434;&#12289;&#12452;&#12531;&#12479;&#12540;&#12493;&#12483;&#12488;&#12414;&#12383;&#12399;UNIX&#12489;&#12513;&#12452;&#12531;&#12477;&#12465;&#12483;&#12488;
	  &#12434;&#36890;&#12376;&#12390;&#36865;&#12427;:</p><pre class="programlisting">
	BYTES|USER|DOMAIN|READ/WRITE|SHARE|FILENAME|TIMESTAMP
	</pre><p>&#12524;&#12467;&#12540;&#12489;&#12398;&#35443;&#32048;:

	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">BYTES</code> - VFS&#25805;&#20316;&#12398;&#12496;&#12452;&#12488;&#21336;&#20301;&#12398;&#38263;&#12373;</p></li><li class="listitem"><p><code class="literal">USER</code> - &#25805;&#20316;&#12434;&#38283;&#22987;&#12375;&#12383;&#12518;&#12540;&#12470;</p></li><li class="listitem"><p><code class="literal">DOMAIN</code> - &#12518;&#12540;&#12470;&#12398;&#12489;&#12513;&#12452;&#12531;</p></li><li class="listitem"><p><code class="literal">READ/WRITE</code> - "W"&#12394;&#12425;&#26360;&#12365;&#36796;&#12415;&#25805;&#20316;&#12289;"R"&#12394;&#12425;&#35501;&#12415;&#20986;&#12375;&#25805;&#20316;</p></li><li class="listitem"><p><code class="literal">SHARE</code> - VFS&#25805;&#20316;&#12364;&#34892;&#12431;&#12428;&#12383;&#20849;&#26377;&#12398;&#21517;&#21069;</p></li><li class="listitem"><p><code class="literal">FILENAME</code> - VFS&#25805;&#20316;&#12395;&#12424;&#12387;&#12390;&#20351;&#12431;&#12428;&#12383;&#12501;&#12449;&#12452;&#12523;&#12398;&#21517;&#21069;</p></li><li class="listitem"><p><code class="literal">TIMESTAMP</code> - VFS&#25805;&#20316;&#12364;&#34892;&#12431;&#12428;&#12383;&#12371;&#12392;&#12434;&#31034;&#12377; "yyyy-mm-dd hh-mm-ss.ms" &#12391;&#12398;&#26178;&#38291;</p></li></ul></div><p>

	</p><p>&#12371;&#12398;&#12514;&#12472;&#12517;&#12540;&#12523;&#12399;&#12473;&#12479;&#12483;&#12463;&#21487;&#33021;&#12391;&#12354;&#12427;&#12290;</p></div><div class="refsect1" title="&#12458;&#12503;&#12471;&#12519;&#12531;"><a name="id2488353"></a><h2>&#12458;&#12503;&#12471;&#12519;&#12531;</h2><div class="variablelist"><dl><dt><span class="term">smb_traffic_analyzer:mode = STRING</span></dt><dd><p>&#12418;&#12375;&#12418;&#12289;STRING&#12364; "unix_domain_socket" &#12395;&#19968;&#33268;&#12377;&#12427;&#12394;&#12425;&#12400;&#12289;&#12514;&#12472;&#12517;&#12540;&#12523;
		  &#12399;/var/tmp/stadsocket&#12395;&#20301;&#32622;&#12377;&#12427;unix&#12489;&#12513;&#12452;&#12531;&#12477;&#12465;&#12483;&#12488;&#12434;&#20351;&#12356;&#12289;&#12418;&#12375;&#12418;&#12289;
		  STRING&#12395;&#12381;&#12398;&#12411;&#12363;&#12398;&#25991;&#23383;&#21015;&#12363;&#12289;&#26410;&#23450;&#32681;&#12394;&#12425;&#12400;&#12289;&#12514;&#12472;&#12517;&#12540;&#12523;&#12399;&#12289;&#12487;&#12540;&#12479;&#12398;&#36578;&#36865;
		  &#12398;&#12383;&#12417;&#12395;&#12452;&#12531;&#12479;&#12540;&#12493;&#12483;&#12488;&#12489;&#12513;&#12452;&#12531;&#12477;&#12465;&#12483;&#12488;&#12434;&#20351;&#12358;&#12290;</p></dd><dt><span class="term">smb_traffic_analyzer:host = STRING</span></dt><dd><p>&#12514;&#12472;&#12517;&#12540;&#12523;&#12399;&#12507;&#12473;&#12488;&#21517;&#12364;STRING&#12392;&#12356;&#12358;&#21517;&#21069;&#12398;&#12471;&#12473;&#12486;&#12512;&#12395;&#12487;&#12540;&#12479;&#12434;&#36865;&#12427;&#12290;</p></dd><dt><span class="term">smb_traffic_analyzer:port = STRING</span></dt><dd><p>&#12514;&#12472;&#12517;&#12540;&#12523;&#12399;STRING&#20013;&#12391;&#25351;&#23450;&#12373;&#12428;&#12383;TCP&#12509;&#12540;&#12488;&#12395;&#12487;&#12540;&#12479;&#12434;&#36865;&#12427;&#12290;</p></dd><dt><span class="term">smb_traffic_analyzer:anonymize_prefix = STRING</span></dt><dd><p>&#12514;&#12472;&#12517;&#12540;&#12523;&#12399;&#12289;STRING&#12391;&#19982;&#12360;&#12425;&#12428;&#12383;&#12503;&#12524;&#12501;&#12451;&#12483;&#12463;&#12473;&#12392;&#21336;&#32020;&#12394;&#12495;&#12483;&#12471;&#12517;&#20516;&#12391;
		  &#12518;&#12540;&#12470;&#21517;&#12434;&#32622;&#12365;&#25563;&#12360;&#12427;&#12290;
		</p></dd><dt><span class="term">smb_traffic_analyzer:total_anonymization = STRING</span></dt><dd><p>&#12418;&#12375;&#12418;STRING&#12364;'yes'&#12395;&#19968;&#33268;&#12377;&#12427;&#12394;&#12425;&#12400;&#12289;&#12371;&#12398;&#12514;&#12472;&#12517;&#12540;&#12523;&#12399;&#12289;
		  &#36861;&#21152;&#12398;&#12495;&#12483;&#12471;&#12517;&#20516;&#12434;&#29983;&#25104;&#12375;&#12394;&#12356;&#12391;&#12289;smb_traffic_analyzer:anonymize_prefix
		  &#12458;&#12503;&#12471;&#12519;&#12531;&#12395;&#12424;&#12387;&#12390;&#19982;&#12360;&#12425;&#12428;&#12427;&#25991;&#23383;&#21015;&#12391;&#12289;&#20219;&#24847;&#12398;&#12518;&#12540;&#12470;&#21517;&#12434;&#32622;&#12365;&#25563;&#12360;&#12427;&#12290;
		  &#12371;&#12428;&#12399;&#12289;&#20219;&#24847;&#12398;&#36578;&#36865;&#12487;&#12540;&#12479;&#12364;1&#20154;&#12398;&#12518;&#12540;&#12470;&#12395;&#12510;&#12483;&#12500;&#12531;&#12464;&#12373;&#12428;&#12289;&#12518;&#12540;&#12470;&#12395;
		  &#38306;&#36899;&#12377;&#12427;&#12487;&#12540;&#12479;&#12398;&#23436;&#20840;&#12394;&#21311;&#21517;&#21270;&#12434;&#25552;&#20379;&#12377;&#12427;&#12290;</p></dd></dl></div></div><div class="refsect1" title="&#20351;&#29992;&#20363;"><a name="id2488463"></a><h2>&#20351;&#29992;&#20363;</h2><p>unix&#12489;&#12513;&#12452;&#12531;&#12477;&#12465;&#12483;&#12488;&#12434;&#20351;&#12356;&#12289;&#20849;&#26377;"example_share"&#19978;&#12391;&#12514;&#12472;&#12517;&#12540;&#12523;&#12434;&#36208;&#12425;&#12379;&#12427;</p><pre class="programlisting">
	<em class="parameter"><code>[example_share]</code></em>
	<a class="link" href="smb.conf.5.html#PATH" target="_top">path = /data/example</a>
	<a class="link" href="smb.conf.5.html#VFSOBJECTS" target="_top">vfs objects = smb_traffic_analyzer</a>
	<a class="link" href="smb.conf.5.html#SMB_TRAFFIC_ANALYZER:MODE" target="_top">smb_traffic_analyzer:mode = unix_domain_socket</a>
	</pre><p>The module running on share "example_share", using an internet socket,
	connecting to host "examplehost" on port 3491.</p><p>&#12452;&#12531;&#12479;&#12540;&#12493;&#12483;&#12488;&#12477;&#12465;&#12483;&#12488;&#12434;&#20351;&#12356;&#12289;&#12509;&#12540;&#12488;3491&#12398;&#12507;&#12473;&#12488;&#21517;"examplehost"&#12395;&#23550;&#12375;&#12390;
	  &#25509;&#32154;&#12375;&#12289;&#20849;&#26377;"example_share"&#19978;&#12391;&#12514;&#12472;&#12517;&#12540;&#12523;&#12434;&#36208;&#12425;&#12379;&#12427;</p><pre class="programlisting">
	<em class="parameter"><code>[example_share]</code></em>
	<a class="link" href="smb.conf.5.html#PATH" target="_top">path = /data/example</a>
	<a class="link" href="smb.conf.5.html#VFSOBJECTS" target="_top">vfs objects = smb_traffic_analyzer</a>
	<a class="link" href="smb.conf.5.html#SMB_TRAFFIC_ANALYZER:HOST" target="_top">smb_traffic_analyzer:host = examplehost</a>
	<a class="link" href="smb.conf.5.html#SMB_TRAFFIC_ANALYZER:PORT" target="_top">smb_traffic_analyzer:port = 3491</a>
	</pre><p>The module running on share "example_share", using an internet socket,
	connecting to host "examplehost" on port 3491, anonymizing user names with
	the prefix "User".</p><p>&#12452;&#12531;&#12479;&#12540;&#12493;&#12483;&#12488;&#12477;&#12465;&#12483;&#12488;&#12434;&#20351;&#12356;&#12289;&#12509;&#12540;&#12488;3491&#12398;&#12507;&#12473;&#12488;&#21517;"examplehost"&#12395;&#23550;&#12375;&#12390;
	  &#25509;&#32154;&#12375;&#12289;&#12503;&#12524;&#12501;&#12451;&#12483;&#12463;&#12473;"User"&#12391;&#12518;&#12540;&#12470;&#21517;&#12434;&#21311;&#21517;&#21270;&#12377;&#12427;</p><pre class="programlisting">
	<em class="parameter"><code>[example_share]</code></em>
	<a class="link" href="smb.conf.5.html#PATH" target="_top">path = /data/example</a>
	<a class="link" href="smb.conf.5.html#VFSOBJECTS" target="_top">vfs objects = smb_traffic_analyzer</a>
	<a class="link" href="smb.conf.5.html#SMB_TRAFFIC_ANALYZER:HOST" target="_top">smb_traffic_analyzer:host = examplehost</a>
	<a class="link" href="smb.conf.5.html#SMB_TRAFFIC_ANALYZER:PORT" target="_top">smb_traffic_analyzer:port = 3491</a>
	<a class="link" href="smb.conf.5.html#SMB_TRAFFIC_ANALYZER:ANONYMIZE_PREFIX" target="_top">smb_traffic_analyzer:anonymize_prefix = User</a>
	</pre></div><div class="refsect1" title="&#12496;&#12540;&#12472;&#12519;&#12531;"><a name="id2487502"></a><h2>&#12496;&#12540;&#12472;&#12519;&#12531;</h2><p>&#12371;&#12398;&#12510;&#12491;&#12517;&#12450;&#12523;&#12506;&#12540;&#12472;&#12399;Samba3.3&#29992;&#12398;&#12418;&#12398;&#12391;&#12354;&#12427;&#12290;
	</p></div><div class="refsect1" title="&#33879;&#32773;"><a name="id2487513"></a><h2>&#33879;&#32773;</h2><p>&#12458;&#12522;&#12472;&#12490;&#12523;&#12398; Samba &#12477;&#12501;&#12488;&#12454;&#12455;&#12450;&#12392;&#38306;&#36899;&#12377;&#12427;&#12518;&#12540;&#12486;&#12451;&#12522;&#12486;&#12451;&#12399;&#12289;Andrew
	Tridgell &#12395;&#12424;&#12387;&#12390;&#20316;&#25104;&#12373;&#12428;&#12383;&#12290;&#29694;&#22312; Samba &#12399; Samba Team &#12395;
	&#12424;&#12387;&#12390;&#12289;Linux&#12459;&#12540;&#12493;&#12523;&#12398;&#38283;&#30330;&#12392;&#21516;&#27096;&#12398;&#12458;&#12540;&#12503;&#12531;&#12477;&#12540;&#12473;&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;
	&#12392;&#12375;&#12390;&#38283;&#30330;&#12364;&#34892;&#12394;&#12431;&#12428;&#12390;&#12356;&#12427;&#12290;</p><p>&#12458;&#12522;&#12472;&#12490;&#12523;&#12398;&#12496;&#12540;&#12472;&#12519;&#12531;&#12398;VFS&#12514;&#12472;&#12517;&#12540;&#12523;&#12392;&#12504;&#12523;&#12497;&#12484;&#12540;&#12523;&#12399;&#12289;
	Holger Hetterich&#12395;&#12424;&#12387;&#12390;&#20316;&#25104;&#12373;&#12428;&#12383;&#12290;</p></div><div class="refsect1" title="&#26085;&#26412;&#35486;&#35379;"><a name="id2487533"></a><h2>&#26085;&#26412;&#35486;&#35379;</h2><p>&#12371;&#12398;&#12510;&#12491;&#12517;&#12450;&#12523;&#12506;&#12540;&#12472;&#12399; Samba 3.3.11-3.3.12  &#23550;&#24540;&#12398;&#12418;&#12398;&#12391;&#12354;&#12427;&#12290;</p><p>&#12371;&#12398;&#12489;&#12461;&#12517;&#12513;&#12531;&#12488;&#12398; Samba 3.2.8-3.3.12 &#23550;&#24540;&#12398;&#32763;&#35379;&#12399;
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>&#22826;&#30000;&#20426;&#21705; (ribbon@samba.gr.jp)</p></li></ul></div><p>	
        &#12395;&#12424;&#12387;&#12390;&#34892;&#12394;&#12431;&#12428;&#12383;&#12290;</p></div></div></body></html>
