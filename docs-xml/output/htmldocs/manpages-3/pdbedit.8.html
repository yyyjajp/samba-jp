<html><head><title>pdbedit</title><link rel="stylesheet" href="../samba.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="pdbedit"><a name="pdbedit.8"/><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>pdbedit — SAM データベース (Samba ユーザのデータベース) を管理する</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="literal">pdbedit</code> [-L] [-v] [-w] [-u username] [-f fullname] [-h homedir] [-D drive] [-S script] [-p profile] [-K] [-a] [-t, --password-from-stdin] [-m] [-r] [-x] [-i passdb-backend] [-e passdb-backend] [-b passdb-backend] [-g] [-d debuglevel] [-s configfile] [-P account-policy] [-C value] [-c account-control] [-y]</p></div></div><div class="refsect1" title="説明"><a name="id2490655"/><h2>説明</h2><p>このツールは、<a class="citerefentry" href="samba.7.html"><span class="citerefentry"><span class="refentrytitle">samba</span>(7)</span></a> システムの一部である。</p><p>pdbedit プログラムは SAM
	データベース内に保持されるユーザアカウントを管理するために利用され、
	root だけが実行できる。</p><p>pdbedit ツールは、 passdb モジュールのインターフェイス経由で操作を行なうことで、
	実際に利用するユーザーデータベースの種類
	(現在のところ、smbpasswd ファイル、LDAP、NIS+、tdb
	ベースのデータベースがあり、それ以外のものもツールの変更なしに追加が可能) に依存しない作りになっている。
	</p><p>pdbedit の主な利用方法として、
	ユーザーアカウントの追加、
	ユーザーアカウントの削除、
	ユーザーアカウントの変更、
	ユーザーアカウントの一覧表示、
	ユーザーアカウントの取り込みの 5 種類がある。</p></div><div class="refsect1" title="オプション"><a name="id2531083"/><h2>オプション</h2><div class="variablelist"><dl><dt><span class="term">-L</span></dt><dd><p>
		データベースのすべてのユーザーアカウントを一覧表示する。
		ユーザー名と UID の組み合わせが「:」で区切られて一覧表示される。</p><p>例: <code class="literal">pdbedit -L</code></p><pre class="programlisting">
sorce:500:Simo Sorce
samba:45:Test User
</pre></dd><dt><span class="term">-v</span></dt><dd><p>
		冗長な一覧表示形式を有効にする。
		データベース内のユーザーを一覧表示する際には、
		アカウントの各項目を詳細に表示する。</p><p>例: <code class="literal">pdbedit -L -v</code></p><pre class="programlisting">
---------------
username:       sorce
user ID/Group:  500/500
user RID/GRID:  2000/2001
Full Name:      Simo Sorce
Home Directory: \\BERSERKER\sorce
HomeDir Drive:  H:
Logon Script:   \\BERSERKER\netlogon\sorce.bat
Profile Path:   \\BERSERKER\profile
---------------
username:       samba
user ID/Group:  45/45
user RID/GRID:  1090/1091
Full Name:      Test User
Home Directory: \\BERSERKER\samba
HomeDir Drive:  
Logon Script:   
Profile Path:   \\BERSERKER\profile
</pre></dd><dt><span class="term">-w</span></dt><dd><p>
		一覧表示を「smbpasswd」形式にする。
		データベース内のユーザを一覧表示する際、
		アカウントの各項目は
		<code class="filename">smbpasswd</code>
		ファイル互換の形式
		(詳細は
		<a class="citerefentry" href="smbpasswd.5.html"><span class="citerefentry"><span class="refentrytitle">smbpasswd</span>(5)</span></a> を参照のこと)
		で表示される。	
		</p><p>例: <code class="literal">pdbedit -L -w</code></p><pre class="programlisting">
sorce:500:508818B733CE64BEAAD3B435B51404EE:
          D2A2418EFC466A8A0F6B1DBB5C3DB80C:
          [UX         ]:LCT-00000000:
samba:45:0F2B255F7B67A7A9AAD3B435B51404EE:
          BC281CE3F53B6A5146629CD4751D3490:
          [UX         ]:LCT-3BFA1E8D:
</pre></dd><dt><span class="term">-u username</span></dt><dd><p>
		操作 (表示・追加・削除など) の対象とするユーザ名を指定する。
		追加・削除・変更操作においては<span class="emphasis"><em>必須</em></span>であり、
		表示操作においては<span class="emphasis"><em>任意</em></span>である。</p></dd><dt><span class="term">-f fullname</span></dt><dd><p>
		ユーザの追加および変更を行なう際に、
		ユーザのフルネームを指定する。</p><p>例: <code class="literal">-f "Simo Sorce"</code></p></dd><dt><span class="term">-h homedir</span></dt><dd><p>
		ユーザの追加および変更を行なう際に、
		ユーザのホームディレクトリとなるネットワークパスを指定する。</p><p>例: <code class="literal">-h "\\\\BERSERKER\\sorce"</code>
		</p></dd><dt><span class="term">-D drive</span></dt><dd><p>
		ユーザの追加および変更を行なう際に、
		ホームディレクトリの割り当て先とする
		Windows のドライブ名を指定する。</p><p>例: <code class="literal">-D "H:"</code>
		</p></dd><dt><span class="term">-S script</span></dt><dd><p>
		ユーザの追加および変更を行なう際に、
		ユーザのログオンスクリプトのパスを指定する。</p><p>例: <code class="literal">-S "\\\\BERSERKER\\netlogon\\sorce.bat"</code>
		</p></dd><dt><span class="term">-p profile</span></dt><dd><p>
		ユーザの追加および変更を行なう際に、
		ユーザのプロファイルパスを指定する。</p><p>例: <code class="literal">-p "\\\\BERSERKER\\netlogon"</code>
		</p></dd><dt><span class="term">-G SID|rid</span></dt><dd><p>
		ユーザの追加および変更を行なう際に、
		ユーザのプライマリグループの SID
		(セキュリティ識別子) または RID を指定する。</p><p>例: <code class="literal">-G S-1-5-21-2447931902-1787058256-3961074038-1201</code></p></dd><dt><span class="term">-U SID|rid</span></dt><dd><p>
		ユーザの追加および変更を行なう際に、
		ユーザの SID
		(セキュリティ識別子) または RID を指定する。</p><p>例: <code class="literal">-U S-1-5-21-2447931902-1787058256-3961074038-5004</code></p></dd><dt><span class="term">-c account-control</span></dt><dd><p>
		ユーザの追加および変更を行なう際に、
		ユーザのアカウント制御プロパティを指定する。
		指定可能なフラグを以下に示す:</p><p>
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>N: パスワード不要</p></li><li class="listitem"><p>D: アカウント無効</p></li><li class="listitem"><p>H: ホームディレクトリ必須</p></li><li class="listitem"><p>T: 一時的に他のアカウントと重複</p></li><li class="listitem"><p>U: 通常のユーザアカウント</p></li><li class="listitem"><p>M: MNS ログオン用のユーザアカウント</p></li><li class="listitem"><p>W: コンピュータ信頼アカウント(訳注: ドメインに参加する各マシンのためのアカウント)</p></li><li class="listitem"><p>S: サーバ信頼アカウント</p></li><li class="listitem"><p>L: 自動ロック</p></li><li class="listitem"><p>X: 無期限パスワード</p></li><li class="listitem"><p>I: ドメイン信頼アカウント(訳注: 信頼関係するドメインのためのアカウント)</p></li></ul></div><p>
	</p><p>例: <code class="literal">-c "[X          ]"</code></p></dd><dt><span class="term">-K|--kickoff-time</span></dt><dd><p>このオプションは特定のユーザに対してkickoff時間を
		変更するために使われる。kickoff時間を無制限にする引数は、
		"決して指定してはならない"。
                </p><p>例: <code class="literal">pdbedit -K never user</code></p></dd><dt><span class="term">-a</span></dt><dd><p>
		ユーザをデータベースに追加する際に指定する。
		ユーザ名を
		<em class="parameter"><code>-u</code></em> オプションで指定する必要がある。
		ユーザを追加する際、
		pdbedit はユーザのパスワードの入力を求める。</p><p>例: <code class="literal">pdbedit -a -u sorce</code>
</p><pre class="programlisting">new password:
retype new password
</pre><p>
</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
		<a class="link" href="smb.conf.5.html#UNIXPASSWORDSYNC" target="_top">unix password sync</a> が設定されていた場合でも、
		pdbedit はスクリプトを実行せず、Samba のユーザデータベース内のデータのみを更新する点に注意。
		</p><p>
		ユーザの追加と同時にパスワード同期を直ちに行ないたい場合は、
		<code class="literal">smbpasswd</code> の <code class="option">-a</code> オプションを使用すること。
		</p></div></dd><dt><span class="term">-t, --password-from-stdin</span></dt><dd><p>
		パスワードを		
		(<code class="literal">passwd(1)</code> プログラムのように)
		/dev/tty から読み取る代わりに標準入力から読み取らせる。
		パスワードは二度入力し、各々末尾に改行(newline)文字を付けること。
		</p></dd><dt><span class="term">-r</span></dt><dd><p>
		データベースの既存のユーザの情報を変更する際に指定する。
		ユーザ名は
		<em class="parameter"><code>-u</code></em> オプションで指定する必要がある。
		これ以外のオプションは、
		指定したユーザのプロパティを変更するために用いられる。
		このオプションは過去との互換性を保つために残されているだけで、
		現在は指定する必要はない。
		</p></dd><dt><span class="term">-m</span></dt><dd><p>このオプションは
		<em class="parameter"><code>-a</code></em>
		オプションと組み合わせて利用する。
		これにより、
		pdbedit はユーザーアカウントではなくコンピュータ信頼アカウントを追加する。
		(-u username にはコンピュータ名を指定する)</p><p>例: <code class="literal">pdbedit -a -m -u w2k-wks</code>
		</p></dd><dt><span class="term">-x</span></dt><dd><p>
		データベースからユーザを削除する際に指定する。
		ユーザ名は
		<em class="parameter"><code>-u</code></em> オプションで指定する必要がある。</p><p>例: <code class="literal">pdbedit -x -u bob</code></p></dd><dt><span class="term">-i passdb-backend</span></dt><dd><p>
		ユーザ情報の取得元となるパスワードデータベースとして、
		smb.conf で指定したものとは別のものを指定する。
		これは、ローカルのユーザデータベースにデータを取り込む
		(インポートする) 際に利用する。</p><p>このオプションにより、
		パスワードデータベースの移行を容易に行うことができる。
		</p><p>例: <code class="literal">pdbedit -i smbpasswd:/etc/smbpasswd.old
                </code></p></dd><dt><span class="term">-e passdb-backend</span></dt><dd><p>指定したパスワードデータベースに存在するすべてのユーザを転送 (エクスポート) する。</p><p>このオプションにより、
		パスワードデータベースの移行とバックアップを容易に行うことが可能となる。</p><p>例: <code class="literal">pdbedit -e smbpasswd:/root/samba-users.backup</code></p></dd><dt><span class="term">-g</span></dt><dd><p><em class="parameter"><code>-g</code></em> オプションを指定すると、
		<em class="parameter"><code>-i in-backend -e out-backend</code></em>
		オプションはユーザーデータベースではなく、
		グループマッピングに対して適用される。</p><p>このオプションにより、
		パスワードデータベースの移行とバックアップを容易に行うことが可能となる。</p></dd><dt><span class="term">-b passdb-backend</span></dt><dd><p>デフォルト以外のパスワードデータベースを指定する。</p><p>例: <code class="literal">pdbedit -b xml:/root/pdb-backup.xml -l</code></p></dd><dt><span class="term">-P account-policy</span></dt><dd><p>アカウントポリシーを表示する。</p><p>有効なポリシーは、
		「minimum password age」、「reset count minutes」、
		「disconnect time」、「user must logon to change password」、
		「password history」、「lockout duration」、
		「min password length」、「maximum password age」、
		「bad lockout attempt」である。</p><p>例: <code class="literal">pdbedit -P "bad lockout attempt"</code></p><pre class="programlisting">
account policy value for bad lockout attempt is 0
</pre></dd><dt><span class="term">-C account-policy-value</span></dt><dd><p>アカウントポリシーを指定した値に設定する。
		このオプションは、<em class="parameter"><code>-P</code></em>
		オプションと組み合わせて使用する。</p><p>例: <code class="literal">pdbedit -P "bad lockout attempt" -C 3</code></p><pre class="programlisting">
account policy value for bad lockout attempt was 0
account policy value for bad lockout attempt is now 3
</pre></dd><dt><span class="term">-y</span></dt><dd><p> <em class="parameter"><code>-y</code></em> オプションを指定すると、
		<em class="parameter"><code>-i in-backend -e out-backend</code></em>
		オプションはユーザーデータベースではなく、
		アカウントポリシーに対して適用される。</p><p>このオプションにより、
		アカウントポリシーをデフォルトの TDB から LDAP ディレクトリサーバなどのパスワードデータベースに移行することが可能となる。</p><p>例: <code class="literal">pdbedit -y -i tdbsam: -e ldapsam:ldap://my.ldap.host</code></p></dd><dt><span class="term">-h|--help</span></dt><dd><p>Print a summary of command line options.
</p></dd><dt><span class="term">-d|--debuglevel=level</span></dt><dd><p><em class="replaceable"><code>level</code></em> is an integer 
from 0 to 10. The default value if this parameter is 
not specified is 0.</p><p>The higher this value, the more detail will be 
logged to the log files about the activities of the 
server. At level 0, only critical errors and serious 
warnings will be logged. Level 1 is a reasonable level for
day-to-day running - it generates a small amount of 
information about operations carried out.</p><p>Levels above 1 will generate considerable 
amounts of log data, and should only be used when 
investigating a problem. Levels above 3 are designed for 
use only by developers and generate HUGE amounts of log
data, most of which is extremely cryptic.</p><p>Note that specifying this parameter here will 
override the <a class="link" href="smb.conf.5.html#" target="_top"/> parameter
in the <code class="filename">smb.conf</code> file.</p></dd><dt><span class="term">-V|--version</span></dt><dd><p>Prints the program version number.
</p></dd><dt><span class="term">-s|--configfile &lt;configuration file&gt;</span></dt><dd><p>The file specified contains the 
configuration details required by the server.  The 
information in this file includes server-specific
information such as what printcap file to use, as well 
as descriptions of all the services that the server is 
to provide. See <code class="filename">smb.conf</code> for more information.
The default configuration file name is determined at 
compile time.</p></dd><dt><span class="term">-l|--log-basename=logdirectory</span></dt><dd><p>Base directory name for log/debug files. The extension
<code class="constant">".progname"</code> will be appended (e.g. log.smbclient, 
log.smbd, etc...). The log file is never removed by the client.
</p></dd></dl></div></div><div class="refsect1" title="注意"><a name="id2540973"/><h2>注意</h2><p>このコマンドは root だけが利用できる。</p></div><div class="refsect1" title="バージョン"><a name="id2540983"/><h2>バージョン</h2><p>このマニュアルページは、Samba バージョン 3 用に記述されている。</p></div><div class="refsect1" title="関連項目"><a name="id2540994"/><h2>関連項目</h2><p><a class="citerefentry" href="smbpasswd.5.html"><span class="citerefentry"><span class="refentrytitle">smbpasswd</span>(5)</span></a>, <a class="citerefentry" href="samba.7.html"><span class="citerefentry"><span class="refentrytitle">samba</span>(7)</span></a></p></div><div class="refsect1" title="著者"><a name="id2541017"/><h2>著者</h2><p>オリジナルの Samba ソフトウェアと関連するユーティリティは、
	Andrew Tridgell によって作られた。 Samba は現在、Linux
	カーネルが開発されているような方法でのオープンソースプロジェクトである
	Samba Team によって開発されている。</p><p>pdbedit のマニュアルページは Simo Sorce と Jelmer Vernooij によって作られた。</p></div><div class="refsect1" title="日本語訳"><a name="id2541044"/><h2>日本語訳</h2><p>このマニュアルページは Samba 3.4.4 - 3.4.11 対応のものである。</p><p>このドキュメントの Samba 3.0.24 対応の翻訳は
たかはしもとのぶ (monyo@samba.gr.jp) によって行なわれた。</p><p>このドキュメントの Samba 3.2.4-3.4.11 対応の翻訳は
太田俊哉 (ribbon@samba.gr.jp) によって行なわれた。</p></div></div></body></html>
