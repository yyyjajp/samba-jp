<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>vfs_full_audit</title><link rel="stylesheet" href="../samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" lang="en"><a name="vfs_full_audit.8"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vfs_full_audit &#8212; Samba VFS&#12288;&#12398;&#21205;&#20316;&#12434;system log&#12395;&#35352;&#37682;&#12377;&#12427;</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="literal">vfs objects = full_audit</code></p></div></div><div class="refsect1" lang="en"><a name="id2517207"></a><h2>&#35500;&#26126;</h2><p>&#12371;&#12398;VFS&#12514;&#12472;&#12517;&#12540;&#12523;&#12399;
	<a class="citerefentry" href="samba.7.html"><span class="citerefentry"><span class="refentrytitle">samba</span>(7)</span></a>&#12471;&#12473;&#12486;&#12512;&#12398;&#19968;&#37096;&#12391;&#12354;&#12427;.</p><p><code class="literal">vfs_full_audit</code>VFS&#12514;&#12472;&#12517;&#12540;&#12523;&#12399;&#25351;&#23450;&#12375;&#12383;&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12398;
	&#21205;&#12365;&#12434;<a class="citerefentry" href="syslog.3.html"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a>&#12391;&#12471;&#12473;&#12486;&#12512;&#12525;&#12464;&#12395;&#35352;&#37682;&#12377;&#12427;&#12290;
	</p><p><code class="literal">vfs_full_audit</code>
	&#12399;Samba VFS&#12398;&#21205;&#20316;&#12377;&#12409;&#12390;&#12434;&#35352;&#37682;&#12377;&#12427;&#12371;&#12392;&#12364;&#21487;&#33021;&#12391;&#12354;&#12427;&#12290;
	</p><table class="simplelist" border="0" summary="Simple list"><tr><td>aio_cancel</td></tr><tr><td>aio_error</td></tr><tr><td>aio_fsync</td></tr><tr><td>aio_read</td></tr><tr><td>aio_return</td></tr><tr><td>aio_suspend</td></tr><tr><td>aio_write</td></tr><tr><td>chdir</td></tr><tr><td>chflags</td></tr><tr><td>chmod</td></tr><tr><td>chmod_acl</td></tr><tr><td>chown</td></tr><tr><td>close</td></tr><tr><td>closedir</td></tr><tr><td>connect</td></tr><tr><td>disconnect</td></tr><tr><td>disk_free</td></tr><tr><td>fchmod</td></tr><tr><td>fchmod_acl</td></tr><tr><td>fchown</td></tr><tr><td>fget_nt_acl</td></tr><tr><td>fgetxattr</td></tr><tr><td>flistxattr</td></tr><tr><td>fremovexattr</td></tr><tr><td>fset_nt_acl</td></tr><tr><td>fsetxattr</td></tr><tr><td>fstat</td></tr><tr><td>fsync</td></tr><tr><td>ftruncate</td></tr><tr><td>get_nt_acl</td></tr><tr><td>get_quota</td></tr><tr><td>get_shadow_copy_data</td></tr><tr><td>getlock</td></tr><tr><td>getwd</td></tr><tr><td>getxattr</td></tr><tr><td>kernel_flock</td></tr><tr><td>lgetxattr</td></tr><tr><td>link</td></tr><tr><td>linux_setlease</td></tr><tr><td>listxattr</td></tr><tr><td>llistxattr</td></tr><tr><td>lock</td></tr><tr><td>lremovexattr</td></tr><tr><td>lseek</td></tr><tr><td>lsetxattr</td></tr><tr><td>lstat</td></tr><tr><td>mkdir</td></tr><tr><td>mknod</td></tr><tr><td>open</td></tr><tr><td>opendir</td></tr><tr><td>pread</td></tr><tr><td>pwrite</td></tr><tr><td>read</td></tr><tr><td>readdir</td></tr><tr><td>readlink</td></tr><tr><td>realpath</td></tr><tr><td>removexattr</td></tr><tr><td>rename</td></tr><tr><td>rewinddir</td></tr><tr><td>rmdir</td></tr><tr><td>seekdir</td></tr><tr><td>sendfile</td></tr><tr><td>set_nt_acl</td></tr><tr><td>set_quota</td></tr><tr><td>setxattr</td></tr><tr><td>stat</td></tr><tr><td>statvfs</td></tr><tr><td>symlink</td></tr><tr><td>sys_acl_add_perm</td></tr><tr><td>sys_acl_clear_perms</td></tr><tr><td>sys_acl_create_entry</td></tr><tr><td>sys_acl_delete_def_file</td></tr><tr><td>sys_acl_free_acl</td></tr><tr><td>sys_acl_free_qualifier</td></tr><tr><td>sys_acl_free_text</td></tr><tr><td>sys_acl_get_entry</td></tr><tr><td>sys_acl_get_fd</td></tr><tr><td>sys_acl_get_file</td></tr><tr><td>sys_acl_get_perm</td></tr><tr><td>sys_acl_get_permset</td></tr><tr><td>sys_acl_get_qualifier</td></tr><tr><td>sys_acl_get_tag_type</td></tr><tr><td>sys_acl_init</td></tr><tr><td>sys_acl_set_fd</td></tr><tr><td>sys_acl_set_file</td></tr><tr><td>sys_acl_set_permset</td></tr><tr><td>sys_acl_set_qualifier</td></tr><tr><td>sys_acl_set_tag_type</td></tr><tr><td>sys_acl_to_text</td></tr><tr><td>sys_acl_valid</td></tr><tr><td>telldir</td></tr><tr><td>unlink</td></tr><tr><td>utime</td></tr><tr><td>write</td></tr></table><p>&#12371;&#12428;&#12425;&#12398;&#21205;&#20316;&#12395;&#21152;&#12360;&#12289;
	<code class="literal">vfs_full_audit</code>&#12399;"all" and "none "&#12392;&#12356;&#12358;
	&#12458;&#12503;&#12471;&#12519;&#12531;&#12434;&#20351;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12427;&#12290;&#12371;&#12428;&#12425;&#12399;&#12377;&#12409;&#12390;&#12398;VFS&#21205;&#20316;&#12395;&#23550;&#12375;&#26377;&#21177;&#12395;&#12394;&#12426;&#12289;
	&#12371;&#12371;&#12398;VFS&#21205;&#20316;&#12395;&#23550;&#12375;&#12390;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12399;&#12391;&#12365;&#12394;&#12356;&#12290;
	</p><p><code class="literal">vfs_full_audit</code>&#12399;&#21205;&#20316;&#12434;'|'&#12434;&#12475;&#12497;&#12524;&#12540;&#12479;&#12540;&#12392;&#12375;&#12390;
	&#22266;&#23450;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12391;&#35352;&#37682;&#12377;&#12427;&#12290;
	&#35352;&#37682;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12399;
	</p><pre class="programlisting">
		smbd_audit: PREFIX|OPERATION|RESULT|FILE
	</pre><p>&#21508;&#12501;&#12451;&#12540;&#12523;&#12489;&#12399;:</p><div class="itemizedlist"><ul type="disc"><li><p><code class="literal">PREFIX</code> - full_audit:prefix&#25991;&#23383;&#12392;&#12289;&#21487;&#22793;&#38263;&#12398;&#35299;&#35500;</p></li><li><p><code class="literal">OPERATION</code> - VFS&#12398;&#21517;&#31216;</p></li><li><p><code class="literal">RESULT</code> - &#21205;&#20316;&#12364;&#25104;&#21151;&#12375;&#12383;&#12363;&#12289;&#22833;&#25943;&#12375;&#12383;&#12363;</p></li><li><p><code class="literal">FILE</code> - &#21205;&#20316;&#12364;&#34892;&#12431;&#12428;&#12383;&#12501;&#12449;&#12452;&#12523;&#12420;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12398;&#21517;&#31216;</p></li></ul></div><p>&#12371;&#12398;&#12514;&#12472;&#12517;&#12540;&#12523;&#12399;&#12473;&#12479;&#12483;&#12459;&#12502;&#12523;&#12391;&#12354;&#12427;&#12290;</p></div><div class="refsect1" lang="en"><a name="id2477111"></a><h2>&#12458;&#12503;&#12471;&#12519;&#12531;</h2><div class="variablelist"><dl><dt><span class="term">vfs_full_audit:prefix = STRING</span></dt><dd><p>STRING&#12391;&#30435;&#26619;&#12513;&#12483;&#12475;&#12540;&#12472;&#12434;&#32080;&#21512;&#12377;&#12427;&#12290;STRING&#12399;
		<a class="citerefentry" href="smb.conf.5.html"><span class="citerefentry"><span class="refentrytitle">smb.conf</span>(5)</span></a>&#12395;&#35352;&#36617;&#12373;&#12428;&#12383;&#25351;&#23450;&#12434;&#32622;&#12365;&#25563;&#12360;&#12427;
		&#21021;&#26399;&#20516;&#12399;"%u|%I". </p></dd><dt><span class="term">vfs_full_audit:success = LIST</span></dt><dd><p>LIST&#12399;VFS&#12458;&#12506;&#12524;&#12540;&#12471;&#12519;&#12531;&#12398;&#12522;&#12473;&#12488;&#12391;&#12289;&#21205;&#20316;&#12364;&#25104;&#21151;&#12375;&#12383;&#12392;&#12365;&#12395;&#35352;&#37682;&#12434;&#27531;&#12377;&#12418;&#12398;&#12434;&#34920;&#12377;&#12290;
		&#12458;&#12506;&#12524;&#12540;&#12471;&#12519;&#12531;&#12399;&#19978;&#12395;&#31034;&#12375;&#12383;&#12522;&#12473;&#12488;&#12395;&#12354;&#12427;&#21517;&#21069;&#12391;&#25351;&#23450;&#12377;&#12427;&#12290;
		</p></dd><dt><span class="term">vfs_full_audit:failure = LIST</span></dt><dd><p>LIST&#12399;VFS&#12458;&#12506;&#12524;&#12540;&#12471;&#12519;&#12531;&#12398;&#12522;&#12473;&#12488;&#12391;&#12289;&#21205;&#20316;&#12364;&#22833;&#25943;&#12375;&#12383;&#12392;&#12365;&#12395;&#35352;&#37682;&#12434;&#27531;&#12377;&#12418;&#12398;&#12434;&#34920;&#12377;&#12290;
		&#12458;&#12506;&#12524;&#12540;&#12471;&#12519;&#12531;&#12399;&#19978;&#12395;&#31034;&#12375;&#12383;&#12522;&#12473;&#12488;&#12395;&#12354;&#12427;&#21517;&#21069;&#12391;&#25351;&#23450;&#12377;&#12427;&#12290;
		</p></dd><dt><span class="term">full_audit:facility = FACILITY</span></dt><dd><p>
                <a class="citerefentry" href="syslog.3.html"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a>&#12398;facility&#12434;&#25351;&#23450;&#12377;&#12427;

                </p></dd><dt><span class="term">full_audit:priority = PRIORITY</span></dt><dd><p>
                <a class="citerefentry" href="syslog.3.html"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a>&#12398;priority&#12434;&#25351;&#23450;&#12377;&#12427;
                </p></dd></dl></div></div><div class="refsect1" lang="en"><a name="id2477227"></a><h2>&#35373;&#23450;&#20363;</h2><p>[records]&#20849;&#26377;&#12398;&#20013;&#12398;&#12501;&#12449;&#12452;&#12523;&#12420;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12434;&#12458;&#12540;&#12503;&#12531;&#12375;&#12383;&#12392;&#12365;&#12395;&#12525;&#12464;&#12434;&#27531;&#12377;&#12290;
	&#12381;&#12398;&#38555;&#12289;LOCAL7&#12501;&#12449;&#12471;&#12522;&#12486;&#12451;&#12540;&#12392;&#12289;ALERT&#12503;&#12521;&#12452;&#12458;&#12522;&#12486;&#12451;&#12540;&#12434;&#20351;&#29992;&#12375;&#12289;
	&#12518;&#12540;&#12470;&#12540;&#21517;&#12392;IP&#12450;&#12489;&#12524;&#12473;&#12418;&#35352;&#37682;&#12377;&#12427;:</p><pre class="programlisting">
        <em class="parameter"><code>[records]</code></em>
	<a class="link" href="smb.conf.5.html#PATH">path = /data/records</a>
	<a class="link" href="smb.conf.5.html#VFSOBJECTS">vfs objects = full_audit</a>
	<a class="link" href="smb.conf.5.html#FULL_AUDIT:PREFIX">full_audit:prefix = %u|%I</a>
	<a class="link" href="smb.conf.5.html#FULL_AUDIT:SUCCESS">full_audit:success = open opendir</a>
	<a class="link" href="smb.conf.5.html#FULL_AUDIT:FAILURE">full_audit:failure = all</a>
	<a class="link" href="smb.conf.5.html#FULL_AUDIT:FACILITY">full_audit:facility = LOCAL7</a>
	<a class="link" href="smb.conf.5.html#FULL_AUDIT:PRIORITY">full_audit:priority = ALERT</a>
</pre></div><div class="refsect1" lang="en"><a name="id2477437"></a><h2>&#12496;&#12540;&#12472;&#12519;&#12531;</h2><p>&#12371;&#12398;&#12504;&#12523;&#12503;&#12399;Samba&#12471;&#12473;&#12486;&#12512;&#12288;3.0.25(&#35379;&#27880;:3.3?)&#12395;&#23550;&#24540;&#12375;&#12390;&#12356;&#12427;
	</p></div><div class="refsect1" lang="en"><a name="id2477448"></a><h2>&#33879;&#32773;</h2><p>&#12458;&#12522;&#12472;&#12490;&#12523;&#12398; Samba &#12477;&#12501;&#12488;&#12454;&#12455;&#12450;&#12392;&#38306;&#36899;&#12377;&#12427;&#12518;&#12540;&#12486;&#12451;&#12522;&#12486;&#12451;&#12399;&#12289;Andrew
	Tridgell &#12395;&#12424;&#12387;&#12390;&#20316;&#25104;&#12373;&#12428;&#12383;&#12290;&#29694;&#22312; Samba &#12399; Samba Team &#12395;
	&#12424;&#12387;&#12390;&#12289;Linux&#12459;&#12540;&#12493;&#12523;&#12398;&#38283;&#30330;&#12392;&#21516;&#27096;&#12398;&#12458;&#12540;&#12503;&#12531;&#12477;&#12540;&#12473;&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;
	&#12392;&#12375;&#12390;&#38283;&#30330;&#12364;&#34892;&#12394;&#12431;&#12428;&#12390;&#12356;&#12427;&#12290;</p></div><div class="refsect1" lang="en"><a name="id2477462"></a><h2>&#26085;&#26412;&#35486;&#35379;</h2><p>&#12371;&#12398;&#12489;&#12461;&#12517;&#12513;&#12531;&#12488;&#12399;&#12289;Samba 3.0.25-3.3.7&#23550;&#24540;&#12398;&#12418;&#12398;&#12391;&#12354;&#12427;&#12290;</p><p>&#12371;&#12398;&#12489;&#12461;&#12517;&#12513;&#12531;&#12488;&#12398;&#32763;&#35379;&#12399;
	</p><div class="itemizedlist"><ul type="disc"><li><p>&#24179;&#30000;&#31077;&#21496; (shouji@microft.co.jp)</p></li></ul></div><p>	
        &#12395;&#12424;&#12387;&#12390;&#34892;&#12394;&#12431;&#12428;&#12383;&#12290;</p></div></div></body></html>
