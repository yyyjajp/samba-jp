<?xml version="1.0" encoding="UTF-8"?>
<html><head><title>vfs_gpfs</title><link rel="stylesheet" href="../samba.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="vfs_gpfs"><a name="vfs_gpfs.8"/><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>vfs_gpfs — acl や prealloc 機能と同様に gpfs に特化した Samba の機能拡張を行なう。</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="literal">vfs objects = gpfs</code></p></div></div><div class="refsect1" title="説明"><a name="id2529790"/><h2>説明</h2><p>この VFS モジュールは
	<a class="citerefentry" href="samba.7.html"><span class="citerefentry"><span class="refentrytitle">samba</span>(7)</span></a> システムの一部である。</p><p> <code class="literal">gpfs</code> VFS モジュールは、Samba が GPFS
	と適切に連携する上で必要となる様々な GPFS エクステンションの
モジュールのベースである。
	このモジュールはGPFSによって提供されるGPLライブラリインタフェースを使う。
	</p><p>現在のところ、gpfs VFS
	モジュールは以下のエクステンションのみを提供している:
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>GPFSのために設定可能なNFSv4 ACL インタフェース </p></li><li class="listitem"><p>GPFS 上でのカーネル oplock のサポート</p></li><li class="listitem"><p>GPFS 上での lease サポート</p></li></ul></div><p>
	</p><p><code class="literal">注意:</code>このモジュールは POSIX ACL
	の挙動を模しているため、chown によるパーミッションの変更が可能である。
	しかし、
	Samba は現在のところ、この動作をサポートしていない。
	このモジュールによる chown を禁止するには、Samba よりも下位の
	ファイルシステム側の責任となる。

	</p><p>このモジュールはスタック可能である。</p></div><div class="refsect1" title="オプション"><a name="id2490571"/><h2>オプション</h2><div class="variablelist"><dl><dt><span class="term">nfs4:mode = [ simple | special ]</span></dt><dd><p>
		GPFS上の特別なIDの置き換えを有効/無効にする。このパラメータはどのような方法でも
		windowsのユーザに影響を与えるべきでない。これは、Sambaに、GPFSに関連のある
		OWNER@とGROUP@(単純なuidへのマッピング)である特別なIDを設定することのみを
		確実にする。
		</p><p>以下のモードがこのモジュールによって指定可能である:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">simple(既定値)</code> - GPFSのACE中で特別なIDを使わない</p></li><li class="listitem"><p><code class="literal">special</code> - GPFSのACE中で特別なIDを使う</p></li></ul></div></dd><dt><span class="term">nfs4:acedup = [dontcare|reject|ignore|merge]</span></dt><dd><p>
		このパラメータはGPFSのACL中で遭遇した、重複したACEをSambaがどのように取り扱うかを設定する。
		GPFSは同じIDに対して異なったbitを持つ重複したACEを許容し作成する。
		</p><p>以下はそれぞれの値におけるSambaの動作である:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">dontcare (既定値)</code> - 重複したACEをそのまま利用する</p></li><li class="listitem"><p><code class="literal">reject</code> - ACLの設定処理で、処理を中断し、エラーとして終了する</p></li><li class="listitem"><p><code class="literal">ignore</code> - 2番目にマッチしたACEを無視する</p></li><li class="listitem"><p><code class="literal">merge</code> - 2つのace.flagフィールド、及び2つのace.maskフィールドをビット演算でORを取り、2つの重複したACEを1つのACEに統合する</p></li></ul></div></dd><dt><span class="term">nfs4:chown = [yes|no]</span></dt><dd><p>このパラメータはファイルシステムのレイヤによって
		  サポートされる chown を有効または無効に設定する。
		  このパラメータは、あなたのシステムのセキュリティを
		  低下させるかもしれない事に注意して有効にすべきである。
		</p><p>いくつかのファイルシステムでは、chown の 
		  a) 許可 b) 拒否 が可能である。
		  リスクについて考慮されたのが後者である。</p><p>以下はそれぞれの値に対するSambaの動作である: </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">yes</code> - ファイルシステム下でサポートするようなchownを有効にする。</p></li><li class="listitem"><p><code class="literal">no (既定値)</code> - chownを無効にする</p></li></ul></div></dd></dl></div></div><div class="refsect1" title="使用例"><a name="id2490772"/><h2>使用例</h2><p>GPFS mount は以下のように、Samba経由でエクスポートできる:</p><pre class="programlisting">
        <em class="parameter"><code>[samba_gpfs_share]</code></em>
	<a class="link" href="smb.conf.5.html#VFSOBJECTS" target="_top">vfs objects = gpfs</a>
	<a class="link" href="smb.conf.5.html#PATH" target="_top">path = /test/gpfs_mount</a>
	<a class="link" href="smb.conf.5.html#NFS4:MODE" target="_top">nfs4: mode = special</a>
	<a class="link" href="smb.conf.5.html#NFS4:ACEDUP" target="_top">nfs4: acedup = merge</a>
</pre></div><div class="refsect1" title="警告"><a name="id2490937"/><h2>警告</h2><p>gpfs gplライブラリは、コンパイルと実行時に<code class="literal">gpfs</code>
 VFS モジュールに必要である。
	また、このVFSモジュールは SLES 9/10 と RHEL 4.4で動作テストが行われている。</p></div><div class="refsect1" title="バージョン"><a name="id2490959"/><h2>バージョン</h2><p>このマニュアルページは Samba バージョン 3.0.25用(訳注:3.3?)である。</p></div><div class="refsect1" title="著者"><a name="id2490970"/><h2>著者</h2><p>オリジナルの Samba ソフトウェアと関連するユーティリティは、Andrew
	Tridgell によって作成された。現在 Samba は Samba Team に
	よって、Linuxカーネルの開発と同様のオープンソースプロジェクト
	として開発が行なわれている。</p><p>GPFS VFSモジュールはVolker LendeckeとIBMの開発者によって寄贈され、作成された。</p><p>このマニュアルページは、IBM FSCCチームによって作成された。</p></div><div class="refsect1" title="日本語訳"><a name="id2490997"/><h2>日本語訳</h2><p>このマニュアルページは Samba 3.2.4 - 3.5.4 対応のものである。</p><p>このドキュメントの Samba 3.2.4 - 3.5.4 対応の翻訳は
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>たかはしもとのぶ (monyo@samba.gr.jp)</p></li><li class="listitem"><p>太田俊哉 (ribbon@samba.gr.jp)</p></li></ul></div><p>	
        によって行なわれた。</p></div></div></body></html>
