<?xml version="1.0" encoding="UTF-8"?>
<html><head><title>nmbd</title><link rel="stylesheet" href="../samba.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="nmbd"><a name="nmbd.8"/><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>nmbd — NetBIOS over TCP/IP クライアントへの
	NetBIOS ネームサーバ機能の提供</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="literal">nmbd</code> [-D] [-F] [-S] [-a] [-i] [-o] [-h] [-V] [-d &lt;debug level&gt;] [-H &lt;lmhosts file&gt;] [-l &lt;log directory&gt;] [-p &lt;port number&gt;] [-s &lt;configuration file&gt;]</p></div></div><div class="refsect1" title="説明"><a name="id2490574"/><h2>説明</h2><p>このプログラムは
	<a class="citerefentry" href="samba.7.html"><span class="citerefentry"><span class="refentrytitle">samba</span>(7)</span></a> システムの一部である。</p><p><code class="literal">nmbd</code>
	は、Windows95/98/Me、 Windows NT、Windows XP
	や LanManager クライアントなどの SMB/CIFS クライアントによる
	NetBIOS over TCP/IP のネームサービスのリクエストを認識し、
	応答することができるサーバである。
	また、Windows の「ネットワークコンピュータ」
	で表示されるコンピュータの一覧を
	作り出すブラウジングのプロトコルにも対応している。 </p><p>SMB/CIFS クライアントは、起動時に SMB/CIFS サーバを探索し、
	サーバが用いている IP アドレスを確認しようとする。</p><p>サービスの中でもとりわけ <code class="literal">nmbd</code> は、
	そのようなリクエストを監視し、自分の NetBIOS 名が指定されたなら、
	自身の IP アドレスを返答する。
	「自分の NetBIOS 名」は、
	既定値では動作しているホストのプライマリDNS 名であるが、
	これは <code class="filename">smb.conf</code> の <a class="link" href="smb.conf.5.html#NETBIOSNAME" target="_top">netbios name</a> 
	によって変更可能である。
	このように <code class="literal">nmbd</code> は、 自分の名前(復数の場合もある)を、
	ブロードキャストの問い合わせに対して返答する。nmbd が返す追加の名前を、
	<a class="citerefentry" href="smb.conf.5.html"><span class="citerefentry"><span class="refentrytitle">smb.conf</span>(5)</span></a>
	設定ファイル中のパラメータで設定することができる。</p><p><code class="literal">nmbd</code> は、WINS (Windows Internet Name Service)
	サーバとしても利用できる。
	基本的にこれが意味することは、WINS データベースサーバとして、
	受け取った名前登録要求からデータベースを構築でき、
	またクライアントからの名前の問い合わせに応答することができるということである。
	</p><p>さらに <code class="literal">nmbd</code> は、WINS proxy として動作でき、
	WINS サーバに対して WINS プロトコルで交信することができないクライアントからの、
	ブロードキャスト要求を中継することができる。 </p></div><div class="refsect1" title="オプション"><a name="id2490815"/><h2>オプション</h2><div class="variablelist"><dl><dt><span class="term">-D</span></dt><dd><p>このパラメータが指定されると、<code class="literal">nmbd</code> はデーモンとして動作する。
		すなわち、自分自身を分離してバックグラウンドで動作し、適切なポートのリクエストを処理する。 
		既定では、<code class="literal">nmbd</code> はデーモンとして動作しない。
		推奨しないが、nmbd は <code class="literal">inetd</code> からのメタ・デーモンとしても動作可能である。 
		</p></dd><dt><span class="term">-F</span></dt><dd><p>
		このパラメータを指定すると、
		<code class="literal">nmbd</code>
		のメインプロセスはデーモン化しなくなる。
		つまり、
		2 回の <code class="literal">fork(2)</code> と端末からの切り離しを行なわない。
		通常通り接続要求を処理するための子プロセスが生成されるが、
		メインプロセスは終了しない。
		この動作方式は、
		Daniel J. Bernstein 作の <code class="literal">daemontools</code>
		パッケージに含まれる
		<code class="literal">supervise</code> と <code class="literal">svscan</code>
		や、
		AIX のプロセスモニターなど、プロセス監視の下で
		<code class="literal">nmbd</code>
		を動作させるのに都合がよい。
		</p></dd><dt><span class="term">-S</span></dt><dd><p>このパラメータが指定されると、<code class="literal">nmbd</code> は
		ファイルではなく標準出力にログを出力する。</p></dd><dt><span class="term">-i</span></dt><dd><p>このパラメータが指定されると、
		サーバがシェルのコマンドライン上から起動されてもサーバはデーモンとはならずに「対話的に」動作する。
		このパラメータにより、コマンドラインから起動した際に暗黙的にデーモンモードとなることが抑止される。
		また、<code class="constant">-S</code> パラメータが指定されていたとしても、
		<code class="literal">nmbd</code> は標準出力にログを出力する。
		</p></dd><dt><span class="term">-h|--help</span></dt><dd><p>Print a summary of command line options.
</p></dd><dt><span class="term">-H &lt;filename&gt;</span></dt><dd><p>NetBIOS lmhosts ファイルの指定。lmhosts ファイルは、
		NetBIOS 名と IP アドレスの組で構成されるリストである。 
		これは、nmbd サーバによってロードされ、任意の NetBIOS 名を解決する問い合わせのために、
		<a class="citerefentry" href="smb.conf.5.html"><span class="citerefentry"><span class="refentrytitle">smb.conf</span>(5)</span></a>中で記述されている、
		<a class="link" href="smb.conf.5.html#NAMERESOLVEORDER" target="_top">name resolve order</a>
		名前解決メカニズムに従って、サーバが必要とする
		NetBIOS 名の問い合わせを解決するために使われる。
		このファイルの内容は、 <code class="literal">nmbd</code> が、
		任意の名前問い合わせに応答する時には<span class="emphasis"><em>決して使われない</em></span>ことに注意。
		このファイルに行を追加すると、
		このホストからの NetBIOS 解決に<span class="emphasis"><em>のみ</em></span>影響する。</p><p>
		このファイルへの既定値のパス名は、
		Samba をビルドする過程でバイナリに埋め込まれる。
		共通のデフォルト値は、
		<code class="filename">/usr/local/samba/lib/lmhosts</code>、
		<code class="filename">/usr/samba/lib/lmhosts</code> または
		<code class="filename">/etc/samba/lmhosts</code> である。

		このファイルの内容の詳細は、
		<a class="citerefentry" href="lmhosts.5.html"><span class="citerefentry"><span class="refentrytitle">lmhosts</span>(5)</span></a> マニュアルページを参照のこと。</p></dd><dt><span class="term">-V|--version</span></dt><dd><p>Prints the program version number.
</p></dd><dt><span class="term">-s|--configfile &lt;configuration file&gt;</span></dt><dd><p>The file specified contains the 
configuration details required by the server.  The 
information in this file includes server-specific
information such as what printcap file to use, as well 
as descriptions of all the services that the server is 
to provide. See <code class="filename">smb.conf</code> for more information.
The default configuration file name is determined at 
compile time.</p></dd><dt><span class="term">-l|--log-basename=logdirectory</span></dt><dd><p>Base directory name for log/debug files. The extension
<code class="constant">".progname"</code> will be appended (e.g. log.smbclient, 
log.smbd, etc...). The log file is never removed by the client.
</p></dd><dt><span class="term">-p &lt;UDP port number&gt;</span></dt><dd><p>UDP ポート番号には正の整数を指定する。
		このオプションは、<code class="literal">nmbd</code> が名前問い合わせに返答する、
		既定値の UDP ポート番号(通常は137)を変更する。
		あなたがどんな場面でも助けを必要としない専門家でない限り、
		このオプションを使用してはならない! </p></dd></dl></div></div><div class="refsect1" title="関連ファイル"><a name="id2491181"/><h2>関連ファイル</h2><div class="variablelist"><dl><dt><span class="term"><code class="filename">/etc/inetd.conf</code></span></dt><dd><p>サーバが <code class="literal">inetd</code>
		メタ・デーモン経由で動作しているならば、このファイルは
		メタ・デーモンのための適切な起動情報を含む必要がある。
		</p></dd><dt><span class="term"><code class="filename">/etc/rc</code></span></dt><dd><p>(またはシステムが使う初期化スクリプト)</p><p>サーバをデーモンとして起動させるならば、
		このファイルにサーバに応じた適切なスタートアップ
		手順を含む必要がある。</p></dd><dt><span class="term"><code class="filename">/etc/services</code></span></dt><dd><p>サーバを <code class="literal">inetd</code>
		メタ・デーモン経由で起動させるなら、このファイルにサービス名
		(例えば netbios-ssn)とサービスポート(例えば139)、
		プロトコルタイプ(例えば tcp)のマッピングを含んでいなければいけない。
		</p></dd><dt><span class="term"><code class="filename">/usr/local/samba/lib/smb.conf</code></span></dt><dd><p>これは、
		<a class="citerefentry" href="smb.conf.5.html"><span class="citerefentry"><span class="refentrytitle">smb.conf</span>(5)</span></a> のデフォルトの位置である。
		本ファイルのこれ以外の標準的なインストール位置は、
		<code class="filename">/usr/samba/lib/smb.conf</code> と
		<code class="filename">/etc/samba/smb.conf</code> である。
		</p><p>WINS サーバとして動作させるなら
		(<a class="citerefentry" href="smb.conf.5.html"><span class="citerefentry"><span class="refentrytitle">smb.conf</span>(5)</span></a>
		マニュアルページの
		<a class="link" href="smb.conf.5.html#WINSSUPPORT" target="_top">wins support</a>
		パラメータを参照)、
		<code class="literal">nmbd</code> は、Samba がインストールされた場所の下に作成される
		<code class="filename">var/locks</code> ディレクトリ中の
		<code class="filename">wins.dat</code> ファイルに WINS データベースを格納する。
		</p><p><code class="literal">nmbd</code> が <span class="emphasis"><em>
		ブラウズマスタ</em></span> (
		<a class="citerefentry" href="smb.conf.5.html"><span class="citerefentry"><span class="refentrytitle">smb.conf</span>(5)</span></a> マニュアルページの
		<a class="link" href="smb.conf.5.html#LOCALMASTER" target="_top">local master</a> パラメータを参照)
		として動作している場合、
		<code class="literal">nmbd</code> は、Samba がインストールされた場所の下に作成される
		<code class="filename">var/locks</code> ディレクトリ中の
		<code class="filename">browse.dat</code> ファイルにブラウジングのデータベースを格納する。
		</p></dd></dl></div></div><div class="refsect1" title="シグナル"><a name="id2491411"/><h2>シグナル</h2><p><code class="literal">nmbd</code> プロセスをシャットダウンするために、
	SIGKILL(-9) を使用した場合、
	名前データベースが整合性の崩れた状態で残ってしまう可能性があるため、
	最後の手段として以外には <span class="emphasis"><em>決して</em></span>推奨しない。
	正しい方法は、SIGTERM(-15) を送り、<code class="literal">nmbd</code> が自ら終了するまで待つことである。</p><p><code class="literal">nmbd</code> が SIGHUP を受け取ると、名前の一覧を
	<code class="filename">/usr/local/samba/var/locks</code> ディレクトリ
	(または Samba 自身がインストールされた場所の配下に作成される
	<code class="filename">var/locks</code> ディレクトリ)中のファイル
	<code class="filename">namelist.debug</code> にダンプする。
	同様に nmbd はサーバデータベースを <code class="filename">log.nmb</code>
	ファイルにダンプする。</p><p><a class="citerefentry" href="smbcontrol.1.html"><span class="citerefentry"><span class="refentrytitle">smbcontrol</span>(1)</span></a> を使うと
	nmbd のデバッグ・ログ・レベルを上げたり下げたりできる
	(SIGUSR[1|2] シグナルは Samba 2.2 からもはや使用されていない)。
	これにより、通常は低いログ・レベルで動作させた状態で、
	一時的な問題を診断することができる。</p></div><div class="refsect1" title="バージョン"><a name="id2487078"/><h2>バージョン</h2><p>この man ページは、Samba システムのバージョン 3 用になっている。</p></div><div class="refsect1" title="関連項目"><a name="id2487090"/><h2>関連項目</h2><p>
	<a class="citerefentry" href="inetd.8.html"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>、
	<a class="citerefentry" href="smbd.8.html"><span class="citerefentry"><span class="refentrytitle">smbd</span>(8)</span></a>、
	<a class="citerefentry" href="smb.conf.5.html"><span class="citerefentry"><span class="refentrytitle">smb.conf</span>(5)</span></a>、
	<a class="citerefentry" href="smbclient.1.html"><span class="citerefentry"><span class="refentrytitle">smbclient</span>(1)</span></a>、
	<a class="citerefentry" href="testparm.1.html"><span class="citerefentry"><span class="refentrytitle">testparm</span>(1)</span></a>、
	<a class="citerefentry" href="testprns.1.html"><span class="citerefentry"><span class="refentrytitle">testprns</span>(1)</span></a>、
	Internet RFC の <code class="filename">rfc1001.txt</code>、<code class="filename">rfc1002.txt</code>。
	その他 CIFS(以前のSMB)の仕様を以下のWebページにあるリンクから入手できる:
	<a class="ulink" href="http://samba.org/cifs/" target="_top">
	http://samba.org/cifs/</a> 。</p></div><div class="refsect1" title="著者"><a name="id2487162"/><h2>著者</h2><p>オリジナルの Samba ソフトウェアと関連するユーティリティは、
	Andrew Tridgell によって作られた。Samba は現在 Linux カーネルが
	開発されているような方法でのオープンソースプロジェクトである
	Samba Team によって開発されている。</p><p>オリジナルの Samba の マニュアルページは Karl Auer によって書かれた。
	マニュアルページは YODL 形式(別の、優秀なオープンソースソフトウェアで、
	<a class="ulink" href="ftp://ftp.icce.rug.nl/pub/unix/" target="_top">
	ftp://ftp.icce.rug.nl/pub/unix/</a> にある)
	で変換され、Jeremy Allison によって Samba 2.0 リリースのために更新された。
	Samba 2.2 のための DocBook 形式への変換は Gerald Carter が行った。
	Samba 3.0 のための DocBook XML 4.2 形式への変換は
	Alexander Bokovoy が行った。</p></div><div class="refsect1" title="日本語訳"><a name="id2487205"/><h2>日本語訳</h2><p>このマニュアルページは Samba 3.0.23 - 3.5.3  対応のものである。</p><p>このドキュメントの Samba 3.0.0 対応の翻訳は
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>たかはしもとのぶ (monyo@samba.gr.jp)</p></li><li class="listitem"><p>はせがわ ようすけ</p></li><li class="listitem"><p>ちかましゅうへい</p></li></ul></div><p>	
        によって行なわれた。</p><p>Samba 3.0.23 - 3.0.24 対応の翻訳は、たかはしもとのぶ (monyo@samba.gr.jp) によって行なわれた。</p><p>Samba 3.2.4 - 3.5.3 対応の翻訳は、太田俊哉 (ribbon@samba.gr.jp) によって行なわれた。</p></div></div></body></html>
