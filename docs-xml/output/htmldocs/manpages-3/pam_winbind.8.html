<?xml version="1.0" encoding="UTF-8"?>
<html><head><title>pam_winbind</title><link rel="stylesheet" href="../samba.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="pam_winbind"><a name="pam_winbind.8"/><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>pam_winbind — Winbind 機構の PAM モジュール</p></div><div class="refsect1" title="説明"><a name="id2528751"/><h2>説明</h2><p>このツールは、<a class="citerefentry" href="samba.7.html"><span class="citerefentry"><span class="refentrytitle">samba</span>(7)</span></a> システムの一部である。</p><p>
	pam_winbind は Winbind デーモンと通信を行なうことで、
	ローカルドメインによるユーザ認証を実現する PAM モジュールである。
	</p></div><div class="refsect1" title="概要"><a name="id2528780"/><h2>概要</h2><p>
	        PAMシステム設定ファイル/etc/pam.d/serviceを以下の例のように編集する:
                </p><pre class="programlisting">
                            ...
                            auth      required        pam_env.so
                            auth      sufficient      pam_unix2.so
                        +++ auth      required        pam_winbind.so  use_first_pass
                            account   requisite       pam_unix2.so
                        +++ account   required        pam_winbind.so  use_first_pass
                        +++ password  sufficient      pam_winbind.so
                            password  requisite       pam_pwcheck.so  cracklib
                            password  required        pam_unix2.so    use_authtok
                            session   required        pam_unix2.so
                        +++ session   required        pam_winbind.so
                            ...
                </pre><p>

		pam_winbind はセッション部分の最初のモジュールであるようにする。その他のモジュール
		で必要とされるkerberosチケットを検索しても良い。
        </p></div><div class="refsect1" title="オプション"><a name="id2489177"/><h2>オプション</h2><p>
	pam_winbind では PAM の設定ファイルや	
	pam_winbind の設定ファイルである 
	<code class="filename">/etc/security/pam_winbind.conf</code> 
	で設定可能な幾つかのオプションがサポートされている。
	PAM 設定ファイルのオプションは、設定ファイル中のオプションに優先する。

		</p><div class="variablelist"><dl><dt><span class="term">debug</span></dt><dd><p>syslog にデバッグ出力を行なう。</p></dd><dt><span class="term">debug_state</span></dt><dd><p>syslogに詳細なPAMの状態のデバッグ情報を出力する。</p></dd><dt><span class="term">require_membership_of=[SID もしくは NAME]</span></dt><dd><p>
		このオプションが設定されると、 pam_winbind
		は、認証するユーザが指定された SID もしくは NAME に所属する時のみ認証を成功させる。
		SID にはグループの SID か alias の SID 、もしくはユーザの SID を指定することも可能である。
		SID の代わり名前で指定することも可能である。
		この名前は、
		<em class="parameter"><code>MYDOMAIN\\mygroup</code></em> 形式か、
		<em class="parameter"><code>MYDOMAIN\\myuser</code></em> 形式である必要がある。
		名前で指定された場合、pam_winbind は内部的に SID を検索する。
		名前には空白文字を含めることができないため、SID で指定することが推奨される。
		<code class="literal">wbinfo --user-sids=SID</code> により、あるユーザが所属するグループの SID 一覧を表示できる。
		</p></dd><dt><span class="term">use_first_pass</span></dt><dd><p>
		pam_winbind のデフォルト設定では、前のモジュールから引き渡される認証トークンを使用する。
		トークンが使用できない場合、ユーザに対してパスワードを問い合わせるが、このオプションを
		使用することで、pam_winbind は前のモジュールから認証トークンが引き渡されなかった場合に、
		エラー終了するようになる。
		</p></dd><dt><span class="term">try_first_pass</span></dt><dd><p>
		(前述の)use_first_passと、最初のパスワードが有効でなかった場合、PAMがパスワード要求の
		プロンプトを出すことを除いて同じ。</p></dd><dt><span class="term">use_authtok</span></dt><dd><p>
		その前の、スタックされたpasswordモジュールによって、
		提供された、新しいパスワードを設定する。このオプションが
		設定されていない場合、pam_winbindは新しいパスワードを
		問い合わせる。
		</p></dd><dt><span class="term">krb5_auth</span></dt><dd><p>
		Active Directory のドメインコントローラと通信可能な場合、
		pam_winbind は Kerberos 認証を用いて認証することが可能である。
		このパラメータを指定することで、Kerberos 認証が有効になる。
		(時刻が同期されていない場合など) Kerberos 認証に失敗した場合、
		winbindd は MSRPC を用いた samlogon 認証を試行する。
		このパラメータと共に、
		<em class="parameter"><code>winbind refresh tickets</code></em> が指定された場合、
		Winbind 機構は、必要な時に TGT を更新することで、TGT を保持し続ける。
		</p></dd><dt><span class="term">krb5_ccache_type=[type]</span></dt><dd><p>
		<em class="parameter"><code>krb5_auth</code></em> オプションにより、pam_winbind
		が Kerberos 認証を行なうように構成されていた場合、
		Winbindd は TGT を資格情報キャッシュ中に保持する。
		このオプションにより資格情報キャッシュの形式を指定することが可能である。
		現在のところ、サポートされている唯一の値は <em class="parameter"><code>FILE</code></em> である。
		この場合、資格情報キャッシュは /tmp/krb5cc_UID ファイル中に作成される。UID はユーザの UID の数値である。
		このオプションを空に設定した場合は、ログオン成功後にチケットキャッシュを用いた Kerberos 認証が行なわれない。
		</p></dd><dt><span class="term">cached_login</span></dt><dd><p>
		<em class="parameter"><code>winbind offline logon</code></em> が有効な場合、Winbind 機構によるキャッシュされた
		資格情報を用いたログオンが可能となる。
		PAM モジュールからこの機能を用いたい場合は、このオプションを設定すること。
		</p></dd><dt><span class="term">silent</span></dt><dd><p>
		出力をすべて抑止する。
		</p></dd></dl></div><p>


	</p></div><div class="refsect1" title="PAM DATA EXPORTS"><a name="id2489578"/><h2>PAM DATA EXPORTS</h2><p>この節では、他のPAMモジュールで使うことが出来るPAMスタック中での
	データエクスポートについて説明する。</p><dt><span class="term">PAM_WINBIND_HOMEDIR</span></dt><dd><p>
			これはActive Directoryサーバ上でのユーザ設定中の、
			プロファイルタブ中で設定されたWindowsのホームディレクトリ
			である。これは、ドライブにマップされた共有上のディレクトリか、
			ローカルパスである。
			</p></dd><dt><span class="term">PAM_WINBIND_LOGONSCRIPT</span></dt><dd><p>
			ユーザのログオン時に実行されるログオンスクリプトのパス。これは
			通常サーバ上に格納されるスクリプトへの相対パスである。
			</p></dd><dt><span class="term">PAM_WINBIND_LOGONSERVER</span></dt><dd><p>
			これは認証に対して使うActive Directoryサーバをエクスポートする。
			これは後で変数として使うことが出来る。
			</p></dd><dt><span class="term">PAM_WINBIND_PROFILEPATH</span></dt><dd><p>
			これはユーザ設定中のプロファイルタブ中のプロファイルパス設定である。
			通常、共有上のこのディレクトリとホームディレクトリは同期している。
			</p></dd></div><div class="refsect1" title="関連項目"><a name="id2487340"/><h2>関連項目</h2><p><a class="citerefentry" href="wbinfo.1.html"><span class="citerefentry"><span class="refentrytitle">wbinfo</span>(1)</span></a>, <a class="citerefentry" href="winbindd.8.html"><span class="citerefentry"><span class="refentrytitle">winbindd</span>(8)</span></a>, <a class="citerefentry" href="smb.conf.5.html"><span class="citerefentry"><span class="refentrytitle">smb.conf</span>(5)</span></a></p></div><div class="refsect1" title="バージョン"><a name="id2487375"/><h2>バージョン</h2><p>このマニュアルページは、Samba バージョン 3用に記述されている。</p></div><div class="refsect1" title="著者"><a name="id2487387"/><h2>著者</h2><p>オリジナルの Samba ソフトウェアと関連するユーティリティは、
	Andrew Tridgell によって作られた。 Samba は現在、Linux
	カーネルが開発されているような方法でのオープンソースプロジェクトである
	Samba Team によって開発されている。</p><p>このマニュアルページは Jelmer Vernooij と Guenther Deschner によって作られた。</p></div><div class="refsect1" title="日本語訳"><a name="id2487412"/><h2>日本語訳</h2><p>このマニュアルページは Samba 3.2.15 対応のものである。</p><p>Samba 3.0.23 - Samba 3.0.24 対応の翻訳は、たかはしもとのぶ (monyo@samba.gr.jp) によって行なわれた。</p><p>Samba 3.2.4-3.2.15 対応の翻訳は、太田俊哉 (ribbon@samba.gr.jp) によって行なわれた。</p></div></div></body></html>
