<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 4. Samba&#12398;&#12487;&#12496;&#12483;&#12464;&#12471;&#12473;&#12486;&#12512;</title><link rel="stylesheet" href="../samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="SAMBA&#38283;&#30330;&#32773;&#12460;&#12452;&#12489;"><link rel="up" href="pt02.html" title="Part II. Samba&#12398;&#22522;&#26412;"><link rel="prev" href="architecture.html" title="Chapter 3. Samba&#12450;&#12540;&#12461;&#12486;&#12463;&#12481;&#12515;"><link rel="next" href="internals.html" title="Chapter 5. Samba&#12398;&#20869;&#37096;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 4. Samba&#12398;&#12487;&#12496;&#12483;&#12464;&#12471;&#12473;&#12486;&#12512;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="architecture.html">Prev</a> </td><th width="60%" align="center">Part II. Samba&#12398;&#22522;&#26412;</th><td width="20%" align="right"> <a accesskey="n" href="internals.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 4. Samba&#12398;&#12487;&#12496;&#12483;&#12464;&#12471;&#12473;&#12486;&#12512;"><div class="titlepage"><div><div><h2 class="title"><a name="debug"></a>Chapter 4. Samba&#12398;&#12487;&#12496;&#12483;&#12464;&#12471;&#12473;&#12486;&#12512;</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Chris</span> <span class="surname">Hertel</span></h3></div></div><div><p class="pubdate">July 1998</p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="debug.html#id2563362">&#26032;&#12375;&#12356;&#20986;&#21147;&#24418;&#24335;</a></span></dt><dt><span class="sect1"><a href="debug.html#id2563497">DEBUG() &#12510;&#12463;&#12525;</a></span></dt><dt><span class="sect1"><a href="debug.html#id2563638">DEBUGADD()&#12510;&#12463;&#12525;</a></span></dt><dt><span class="sect1"><a href="debug.html#id2563680">DEBUGLVL()&#12510;&#12463;&#12525;</a></span></dt><dt><span class="sect1"><a href="debug.html#id2563786">&#26032;&#12375;&#12356;&#38306;&#25968;</a></span></dt><dd><dl><dt><span class="sect2"><a href="debug.html#id2563792">dbgtext()</a></span></dt><dt><span class="sect2"><a href="debug.html#id2563811">dbghdr()</a></span></dt><dt><span class="sect2"><a href="debug.html#id2563838">format_debug_text()</a></span></dt></dl></dd></dl></div><div class="sect1" title="&#26032;&#12375;&#12356;&#20986;&#21147;&#24418;&#24335;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2563362"></a>&#26032;&#12375;&#12356;&#20986;&#21147;&#24418;&#24335;</h2></div></div></div><p>
  &#12487;&#12496;&#12483;&#12464;&#12525;&#12464;&#12501;&#12449;&#12452;&#12523;&#12398;&#25991;&#27861;&#12399;&#20197;&#19979;&#12398;&#36890;&#12426;:
</p><pre class="programlisting">
  &gt;debugfile&lt; :== { &gt;debugmsg&lt; }

  &gt;debugmsg&lt;  :== &gt;debughdr&lt; '\n' &gt;debugtext&lt;

  &gt;debughdr&lt;  :== '[' TIME ',' LEVEL ']' FILE ':' [FUNCTION] '(' LINE ')'

  &gt;debugtext&lt; :== { &gt;debugline&lt; }

  &gt;debugline&lt; :== TEXT '\n'
</pre><p>
TEXT&#12399;&#25913;&#34892;&#25991;&#23383;&#12434;&#21547;&#12414;&#12394;&#12356;&#25991;&#23383;&#21015;&#12391;&#12354;&#12427;&#12290;
</p><p>
LEVEL &#12399;&#12513;&#12483;&#12475;&#12540;&#12472;&#12398;DEBUG&#12524;&#12505;&#12523;&#12391;&#12354;&#12427;(0&#12363;&#12425;10&#12398;&#31684;&#22258;&#12398;&#25972;&#25968;&#20516;)&#12290;
</p><p>
TIME &#12399;&#12479;&#12452;&#12512;&#12473;&#12479;&#12531;&#12503;&#12391;&#12354;&#12427;&#12290;
</p><p>
FILE &#12399;&#12391;&#12496;&#12464;&#12513;&#12483;&#12475;&#12540;&#12472;&#12364;&#29983;&#25104;&#12373;&#12428;&#12383;&#12501;&#12449;&#12452;&#12523;&#12398;&#21517;&#21069;&#12391;&#12354;&#12427;&#12290;
</p><p>
FUNCTION&#12399;&#12487;&#12496;&#12483;&#12464;&#12513;&#12483;&#12475;&#12540;&#12472;&#12364;&#29983;&#25104;&#12373;&#12428;&#12383;&#38306;&#25968;&#12391;&#12354;&#12427;&#12290;
</p><p>
LINE&#12399;&#12513;&#12483;&#12475;&#12540;&#12472;&#12364;&#29983;&#25104;&#12373;&#12428;&#12383;&#12487;&#12496;&#12483;&#12464;&#25991;&#12398;&#34892;&#30058;&#21495;&#12391;&#12354;&#12427;&#12290;
</p><p>&#22522;&#26412;&#30340;&#12395;&#12289;&#12381;&#12428;&#12364;&#24847;&#21619;&#12377;&#12427;&#12392;&#12371;&#12429;&#12399;&#20197;&#19979;&#12398;&#36890;&#12426;:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
&#12487;&#12496;&#12483;&#12464;&#12525;&#12464;&#12501;&#12449;&#12452;&#12523;&#12399;&#12487;&#12496;&#12483;&#12464;&#12513;&#12483;&#12475;&#12540;&#12472;&#12391;&#27083;&#25104;&#12373;&#12428;&#12427;&#12290;
</p></li><li class="listitem"><p>
&#26680;&#12391;&#12496;&#12483;&#12464;&#12513;&#12483;&#12475;&#12540;&#12472;&#12399;&#12504;&#12483;&#12480;&#12392;&#12486;&#12461;&#12473;&#12488;&#12363;&#12425;&#27083;&#25104;&#12373;&#12428;&#12427;&#12290;&#12504;&#12483;&#12480;&#12399;&#25913;&#34892;&#12395;&#12424;&#12387;&#12390;&#12486;&#12461;&#12473;&#12488;&#12392;
&#20998;&#38626;&#12373;&#12428;&#12390;&#12356;&#12427;&#12290;
</p></li><li class="listitem"><p>
&#12504;&#12483;&#12480;&#12399;&#12479;&#12452;&#12512;&#12473;&#12479;&#12531;&#12503;&#12391;&#22987;&#12414;&#12426;&#12289;&#25324;&#24359;&#12398;&#20013;&#12395;&#12487;&#12496;&#12483;&#12464;&#12524;&#12505;&#12523;&#12364;&#32154;&#12367;&#12290;&#12513;&#12483;&#12475;&#12540;&#12472;&#12395;&#12424;&#12387;&#12390;
&#29983;&#25104;&#12373;&#12428;&#12383;&#12501;&#12449;&#12452;&#12523;&#21517;&#12289;&#38306;&#25968;&#21517;&#12289;&#12392;&#34892;&#30058;&#21495;&#12364;&#12381;&#12398;&#12354;&#12392;&#12395;&#32154;&#12367;&#12290;&#12501;&#12449;&#12452;&#12523;&#21517;&#12399;&#12467;&#12525;&#12531;&#12391;&#32066;&#20102;&#12375;&#12289;
&#38306;&#25968;&#21517;&#12399;&#34892;&#30058;&#21495;&#12434;&#21547;&#12416;&#25324;&#24359;&#12391;&#32066;&#20102;&#12377;&#12427;&#12290;&#12467;&#12531;&#12497;&#12452;&#12521;&#12395;&#20381;&#23384;&#12377;&#12427;&#12364;&#12289;&#38306;&#25968;&#21517;&#12399;&#28961;&#12356;&#12363;&#12418;&#12375;&#12428;&#12394;&#12356;
(&#12371;&#12428;&#12399;&#12289;&#24195;&#12367;&#23455;&#35013;&#12399;&#12373;&#12428;&#12390;&#12356;&#12394;&#12356;__FUNCTION__&#12510;&#12463;&#12525;&#12395;&#12424;&#12387;&#12390;&#29983;&#25104;&#12373;&#12428;&#12427;&#12289;dangit)&#12290;
</p></li><li class="listitem"><p>
&#12513;&#12483;&#12475;&#12540;&#12472;&#12486;&#12461;&#12473;&#12488;&#12399;0&#12363;&#12381;&#12428;&#20197;&#19978;&#12398;&#34892;&#12363;&#12425;&#27083;&#25104;&#12373;&#12428;&#12289;&#12362;&#12398;&#12362;&#12398;&#12399;&#25913;&#34892;&#12391;&#32066;&#31471;&#12377;&#12427;&#12290;
</p></li></ol></div><p>&#20986;&#21147;&#12398;&#20363;:</p><pre class="programlisting">
    [1998/08/03 12:55:25, 1] nmbd.c:(659)
      Netbios nameserver version 1.9.19-prealpha started.
      Copyright Andrew Tridgell 1994-1997
    [1998/08/03 12:55:25, 3] loadparm.c:(763)
      Initializing global parameters
</pre><p>
&#19978;&#35352;&#12398;&#20363;&#12395;&#12362;&#12356;&#12390;&#38306;&#25968;&#21517;&#12399;&#12504;&#12483;&#12480;&#34892;&#12395;&#12399;&#34920;&#31034;&#12373;&#12428;&#12390;&#12356;&#12394;&#12356;&#12371;&#12392;&#12395;&#27880;&#24847;&#12290;&#12371;&#12428;&#12399;&#12289;&#19978;&#35352;&#12398;&#20363;&#12399;
SGI Indy&#12395;&#12424;&#12387;&#12390;&#29983;&#25104;&#12373;&#12428;&#12289;SGI&#12467;&#12531;&#12497;&#12452;&#12521;&#12399;__FUNCTION__&#12510;&#12463;&#12525;&#12434;&#12469;&#12509;&#12540;&#12488;&#12375;&#12390;&#12356;&#12394;&#12356;&#12392;&#12356;&#12358;
&#29702;&#30001;&#12395;&#12424;&#12427;&#12290;
</p></div><div class="sect1" title="DEBUG() &#12510;&#12463;&#12525;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2563497"></a>DEBUG() &#12510;&#12463;&#12525;</h2></div></div></div><p>
DEBUG()&#12510;&#12463;&#12525;&#12398;&#20351;&#29992;&#12399;&#22793;&#12431;&#12387;&#12390;&#12356;&#12394;&#12356;&#12290;DEBUG()&#12399;2&#12388;&#12398;&#12497;&#12521;&#12513;&#12540;&#12479;&#12434;&#12392;&#12427;&#12290;
&#26368;&#21021;&#12398;&#12418;&#12398;&#12399;&#12513;&#12483;&#12475;&#12540;&#12472;&#12524;&#12505;&#12523;&#12391;&#12354;&#12426;&#12289;2&#30058;&#30446;&#12398;&#12418;&#12398;&#12399;Debug1()&#38306;&#25968;&#12434;&#21628;&#12403;&#20986;&#12377;&#12383;&#12417;&#12398;
&#38306;&#25968;&#21628;&#12403;&#20986;&#12375;&#12398;&#23455;&#20307;&#12391;&#12354;&#12427;&#12290;
</p><p>&#12371;&#12428;&#12399;&#28151;&#20081;&#12373;&#12379;&#12427;&#12290;</p><p>&#33509;&#24178;&#12398;&#25163;&#21161;&#12369;&#12392;&#12394;&#12427;&#12363;&#12418;&#12375;&#12428;&#12394;&#12356;&#20363;&#12399;&#20197;&#19979;&#12398;&#36890;&#12426;&#12290;&#12418;&#12375;&#12418;</p><pre class="programlisting">
printf( "This is a %s message.\n", "debug" );
</pre><p>
&#12392;&#26360;&#12356;&#12390;&#32080;&#26524;&#12434;&#27161;&#28310;&#20986;&#21147;&#12395;&#36865;&#12426;&#12383;&#12356;&#12398;&#12391;&#12354;&#12428;&#12400;&#12289;
to send the output to stdout, then you would write
</p><pre class="programlisting">
DEBUG( 0, ( "This is a %s message.\n", "debug" ) );
</pre><p>
&#12392;&#26360;&#12367;&#12371;&#12392;&#12391;&#12289;&#32080;&#26524;&#12399;&#12487;&#12496;&#12483;&#12464;&#12501;&#12449;&#12452;&#12523;&#12395;&#36865;&#12425;&#12428;&#12427;&#12290;&#12377;&#12409;&#12390;&#12398;&#36890;&#24120;&#12398;printf()
&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12398;&#12456;&#12473;&#12465;&#12540;&#12503;&#20966;&#29702;&#12399;&#12385;&#12419;&#12435;&#12392;&#21205;&#20316;&#12377;&#12427;&#12290;
</p><p>
&#19978;&#35352;&#12398;&#20363;&#12395;&#12362;&#12356;&#12390;&#12289;DEBUG&#12513;&#12483;&#12475;&#12540;&#12472;&#12524;&#12505;&#12523;&#12399;0&#12395;&#35373;&#23450;&#12373;&#12428;&#12390;&#12356;&#12427;&#12371;&#12392;&#12395;&#27880;&#24847;&#12290;&#12513;&#12483;&#12475;&#12540;&#12472;&#12524;&#12505;&#12523;
0&#12399;&#24120;&#26178;&#20986;&#21147;&#12373;&#12428;&#12427;&#12290;&#22522;&#26412;&#30340;&#12395;&#12289;&#12418;&#12375;&#12418;&#12513;&#12483;&#12475;&#12540;&#12472;&#12524;&#12505;&#12523;&#12364;&#12464;&#12525;&#12540;&#12496;&#12523;&#20516;DEBUGLEVEL&#20197;&#19979;&#12398;&#22580;&#21512;&#12289;
DEBUG&#25991;&#12399;&#20966;&#29702;&#12373;&#12428;&#12427;&#12290;
</p><p>
&#19978;&#35352;&#12398;&#20363;&#12398;&#20986;&#21147;&#12399;&#20197;&#19979;&#12398;&#12424;&#12358;&#12394;&#12418;&#12398;&#12395;&#12394;&#12427;:
</p><pre class="programlisting">
    [1998/07/30 16:00:51, 0] file.c:function(128)
      This is a debug message.
</pre><p>
&#12362;&#12398;&#12362;&#12398;&#12398;DEBUG()&#21628;&#12403;&#20986;&#12375;&#12399;&#12289;&#20197;&#21069;&#12398;&#21628;&#12403;&#20986;&#12375;&#12395;&#12424;&#12387;&#12390;&#29983;&#25104;&#12373;&#12428;&#12383;&#20986;&#21147;&#12398;&#34892;&#26411;&#12364;&#12289;
"\n"&#12391;&#32066;&#12431;&#12387;&#12390;&#12356;&#12394;&#12356;&#12394;&#12425;&#12400;&#12289;&#26032;&#12375;&#12356;&#12504;&#12483;&#12480;&#12434;&#20316;&#25104;&#12377;&#12427;&#12290;&#12487;&#12496;&#12483;&#12464;&#12501;&#12449;&#12452;&#12523;&#12408;&#12398;&#20986;&#21147;&#12399;&#12289;
&#25913;&#34892;&#12364;&#26469;&#12427;&#12383;&#12403;&#12372;&#12392;&#12395;&#12501;&#12521;&#12483;&#12471;&#12517;&#12373;&#12428;&#12427;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12496;&#12483;&#12501;&#12449;&#12434;&#36890;&#12375;&#12390;&#28193;&#12373;&#12428;&#12427;&#12290;
&#12418;&#12375;&#12418;&#12289;DEBUG()&#12364;&#21628;&#12400;&#12428;&#12383;&#12392;&#12365;&#12395;&#12496;&#12483;&#12501;&#12449;&#12364;&#12363;&#12425;&#12391;&#12394;&#12369;&#12428;&#12400;&#12289;&#26032;&#12375;&#12356;&#20837;&#21147;&#12399;&#21336;&#12395;
&#36861;&#21152;&#12373;&#12428;&#12427;&#12290;
</p><p>
...&#12375;&#12363;&#12375;&#12289;&#12371;&#12428;&#12399;&#20840;&#12367;&#12381;&#12398;&#22580;&#12375;&#12398;&#12366;&#12391;&#12354;&#12427;&#12290;DEBUG()&#12364;&#20998;&#21106;&#12373;&#12428;&#12383;&#34892;&#12434;&#26360;&#12365;&#36796;&#12416;&#12398;&#12395;
&#20351;&#12431;&#12428;&#12427;&#12392;&#35328;&#12358;&#29702;&#30001;&#12391;&#12289;&#36969;&#20999;&#12394;&#20301;&#32622;&#12395;&#32622;&#12363;&#12428;&#12427;&#12290;&#20197;&#19979;&#12399;&#20170;&#35500;&#26126;&#12375;&#12383;&#12371;&#12392;&#12395;&#38306;&#12377;&#12427;&#12289;
&#12371;&#12398;&#31278;&#12398;&#31777;&#21336;&#12394;&#20363;&#12391;&#12354;&#12427;:
</p><pre class="programlisting">
    DEBUG( 0, ("The test returned " ) );
    if( test() )
      DEBUG(0, ("True") );
    else
      DEBUG(0, ("False") );
    DEBUG(0, (".\n") );
</pre><p>
&#12501;&#12457;&#12540;&#12510;&#12483;&#12486;&#12451;&#12531;&#12464;&#12496;&#12483;&#12501;&#12449;&#12394;&#12375;&#12391;&#12399;&#12289;&#20986;&#21147;(test()&#12364;true&#12434;&#36820;&#12377;&#12371;&#12392;&#12434;&#20206;&#23450;)&#12399;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#12394;&#12427;:

</p><pre class="programlisting">
    [1998/07/30 16:00:51, 0] file.c:function(256)
      The test returned
    [1998/07/30 16:00:51, 0] file.c:function(258)
      True
    [1998/07/30 16:00:51, 0] file.c:function(261)
      .
</pre><p>&#12371;&#12428;&#12399;&#20351;&#12356;&#29289;&#12395;&#12399;&#12394;&#12425;&#12394;&#12356;&#12290;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12496;&#12483;&#12501;&#12449;&#12392;&#12356;&#12358;&#12381;&#12398;&#22580;&#12375;&#12398;&#12366;&#12398;&#26041;&#27861;&#12399;&#12289;
&#12371;&#12398;&#21839;&#38988;&#12434;&#35299;&#27770;&#12377;&#12427;&#12290;
</p></div><div class="sect1" title="DEBUGADD()&#12510;&#12463;&#12525;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2563638"></a>DEBUGADD()&#12510;&#12463;&#12525;</h2></div></div></div><p>
&#19978;&#35352;&#12391;&#35500;&#26126;&#12373;&#12428;&#12390;&#12356;&#12427;&#34892;&#12364;&#22730;&#12428;&#12390;&#12375;&#12414;&#12358;&#21839;&#38988;&#12408;&#12398;&#12289;&#12381;&#12398;&#22580;&#12375;&#12398;&#12366;&#12398;&#35299;&#27770;&#26041;&#27861;&#12408;&#12398;&#36861;&#21152;&#12392;&#12375;&#12390;&#12289;
&#12418;&#12387;&#12392;&#12365;&#12428;&#12356;&#12394;&#35299;&#27770;&#26041;&#27861;&#12364;&#12354;&#12427;&#12290;DEBUGADD()&#12510;&#12463;&#12525;&#12399;&#27770;&#12375;&#12390;&#12504;&#12483;&#12480;&#12434;&#29983;&#25104;&#12375;&#12394;&#12356;&#12290;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;
&#12496;&#12483;&#12501;&#12449;&#12364;&#12363;&#12425;&#12391;&#12354;&#12387;&#12383;&#12392;&#12375;&#12390;&#12418;&#12289;&#12371;&#12428;&#12399;&#29694;&#22312;&#12398;&#12487;&#12496;&#12483;&#12464;&#12513;&#12483;&#12475;&#12540;&#12472;&#12395;&#23550;&#12375;&#12390;&#26032;&#12375;&#12356;&#12486;&#12461;&#12473;&#12488;&#12434;
&#36861;&#21152;&#12377;&#12427;&#12290;DEBUGADD()&#12510;&#12463;&#12525;&#12398;&#25991;&#27861;&#12399;DEBUG()&#12510;&#12463;&#12525;&#12398;&#12418;&#12398;&#12392;&#21516;&#12376;&#12391;&#12354;&#12427;&#12290;
</p><pre class="programlisting">
    DEBUG( 0, ("This is the first line.\n" ) );
    DEBUGADD( 0, ("This is the second line.\nThis is the third line.\n" ) );
</pre><p>&#12371;&#12428;&#12399;&#20197;&#19979;&#12434;&#29983;&#25104;&#12377;&#12427;&#12290;</p><pre class="programlisting">
    [1998/07/30 16:00:51, 0] file.c:function(512)
      This is the first line.
      This is the second line.
      This is the third line.
</pre></div><div class="sect1" title="DEBUGLVL()&#12510;&#12463;&#12525;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2563680"></a>DEBUGLVL()&#12510;&#12463;&#12525;</h2></div></div></div><p>
DEBUG()&#12510;&#12463;&#12525;&#12395;&#12362;&#12369;&#12427;&#21839;&#38988;&#12398;1&#12388;&#12399;&#12289;DEBUG()&#34892;&#12364;&#38263;&#12377;&#12366;&#12427;&#20670;&#21521;&#12395;&#12354;&#12427;&#12392;&#35328;&#12358;&#12371;&#12392;&#12391;&#12354;&#12427;&#12290;
nmbd_sendannounce.c&#12363;&#12425;&#12398;&#20197;&#19979;&#12398;&#20363;&#12395;&#12388;&#12356;&#12390;&#32771;&#12360;&#12390;&#12415;&#12424;&#12358;:
</p><pre class="programlisting">
  DEBUG(3,("send_local_master_announcement: type %x for name %s on subnet %s for workgroup %s\n",
            type, global_myname, subrec-&gt;subnet_name, work-&gt;work_group));
</pre><p>
&#12371;&#12398;&#21839;&#38988;&#12398;1&#12388;&#12398;&#35299;&#12399;&#12289;DEBUG()&#12392;DEBUGADD()&#12434;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#20351;&#12387;&#12390;&#34892;&#12434;&#20998;&#21106;&#12377;&#12427;&#12371;&#12392;&#12391;&#12354;&#12427;:
</p><pre class="programlisting">
  DEBUG( 3, ( "send_local_master_announcement: " ) );
  DEBUGADD( 3, ( "type %x for name %s ", type, global_myname ) );
  DEBUGADD( 3, ( "on subnet %s ", subrec-&gt;subnet_name ) );
  DEBUGADD( 3, ( "for workgroup %s\n", work-&gt;work_group ) );
</pre><p>
&#21516;&#27096;&#12384;&#12364;&#12289;&#12418;&#12387;&#12392;&#12377;&#12390;&#12365;&#12394;&#26041;&#27861;&#12399;&#12289;DEBUGLVL()&#12510;&#12463;&#12525;&#12434;&#20351;&#12358;&#26041;&#27861;&#12391;&#12354;&#12427;&#12290;
&#12371;&#12398;&#12510;&#12463;&#12525;&#12399;&#12289;&#12513;&#12483;&#12475;&#12540;&#12472;&#12524;&#12505;&#12523;&#12364;&#12464;&#12525;&#12540;&#12496;&#12523;&#20516;DEBUGLEVEL&#20197;&#19979;&#12398;&#22580;&#21512;&#12395;&#30495;&#12434;&#36820;&#12377;&#12398;&#12391;:
</p><pre class="programlisting">
  if( DEBUGLVL( 3 ) )
    {
    dbgtext( "send_local_master_announcement: " );
    dbgtext( "type %x for name %s ", type, global_myname );
    dbgtext( "on subnet %s ", subrec-&gt;subnet_name );
    dbgtext( "for workgroup %s\n", work-&gt;work_group );
    }
</pre><p>&#12392;&#26360;&#12369;&#12427;(dbgtext()&#38306;&#25968;&#12399;&#20197;&#19979;&#12391;&#35500;&#26126;&#12377;&#12427;)&#12290;</p><p>&#12371;&#12398;&#26041;&#24335;&#12391;&#12399;&#12356;&#12367;&#12388;&#12363;&#12398;&#21033;&#28857;&#12364;&#12354;&#12427;:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
&#20516;&#12398;&#35413;&#20385;&#12364;1&#22238;&#12398;&#12415;&#23455;&#34892;&#12373;&#12428;&#12427;&#12290;
</p></li><li class="listitem"><p>
&#22793;&#25968;&#12434;&#12289;DEBUGLVL()&#12502;&#12525;&#12483;&#12463;&#20869;&#12391;&#12398;&#12415;&#20351;&#12431;&#12428;&#12427;&#12473;&#12479;&#12483;&#12463;&#12398;&#22806;&#20596;&#12395;&#37197;&#32622;&#12391;&#12365;&#12427;&#12290;
</p></li><li class="listitem"><p>
&#12487;&#12496;&#12483;&#12464;&#20986;&#21147;&#12395;&#12398;&#12415;&#35442;&#24403;&#12377;&#12427;&#20966;&#29702;&#12399;DEBUGLVL()&#12502;&#12525;&#12483;&#12463;&#20869;&#12395;&#37197;&#32622;&#12391;&#12365;&#12427;&#12290;
</p></li></ol></div></div><div class="sect1" title="&#26032;&#12375;&#12356;&#38306;&#25968;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2563786"></a>&#26032;&#12375;&#12356;&#38306;&#25968;</h2></div></div></div><div class="sect2" title="dbgtext()"><div class="titlepage"><div><div><h3 class="title"><a name="id2563792"></a>dbgtext()</h3></div></div></div><p>
&#12371;&#12398;&#38306;&#25968;&#12399;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12496;&#12483;&#12501;&#12449;&#32076;&#30001;&#12391;&#12487;&#12496;&#12483;&#12464;&#12501;&#12449;&#12452;&#12523;(&#12392;&#21487;&#33021;&#12391;&#12354;&#12428;&#12400;syslog)&#12395;
&#12487;&#12496;&#12483;&#12464;&#12513;&#12483;&#12475;&#12540;&#12472;&#12486;&#12461;&#12473;&#12488;&#12434;&#20986;&#21147;&#12377;&#12427;&#12290;&#38306;&#25968;&#12399;printf()&#12420;Debug1(0&#12398;&#12424;&#12358;&#12394;&#21487;&#22793;&#24341;&#25968;&#12434;&#21462;&#12427;&#12290;
&#20837;&#21147;&#12399;vslprintf()&#38306;&#25968;&#12434;&#20351;&#12387;&#12390;&#12496;&#12483;&#12501;&#12449;&#20013;&#12395;&#26684;&#32013;&#12373;&#12428;&#12289;format_debug_text()&#12395;&#28193;&#12373;&#12428;&#12427;&#12290;

&#12418;&#12375;&#12418;DEBUGLVL()&#12434;&#20351;&#12387;&#12390;&#12356;&#12427;&#12394;&#12425;&#12400;&#12289;&#12362;&#12381;&#12425;&#12367;dbgtext()&#12434;&#20351;&#12387;&#12390;&#12513;&#12483;&#12475;&#12540;&#12472;&#26412;&#20307;&#12434;&#20986;&#21147;
&#12375;&#12390;&#12356;&#12427;&#12384;&#12429;&#12358;&#12290;
</p></div><div class="sect2" title="dbghdr()"><div class="titlepage"><div><div><h3 class="title"><a name="id2563811"></a>dbghdr()</h3></div></div></div><p>
&#12371;&#12428;&#12399;&#12289;&#12487;&#12496;&#12483;&#12464;&#12513;&#12483;&#12475;&#12540;&#12472;&#12504;&#12483;&#12480;&#12434;&#20986;&#21147;&#12377;&#12427;&#38306;&#25968;&#12391;&#12354;&#12427;&#12290;&#12504;&#12483;&#12480;&#12399;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12496;&#12483;&#12501;&#12449;
&#32076;&#30001;&#12391;&#12399;&#20966;&#29702;&#12373;&#12428;&#12394;&#12356;&#12290;&#12414;&#12383;&#12289;&#12418;&#12375;&#12418;&#12289;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12496;&#12483;&#12501;&#12449;&#12364;&#12363;&#12425;&#12391;&#12394;&#12356;&#22580;&#21512;&#12289;dbghdr()
&#12398;&#21628;&#12403;&#20986;&#12375;&#12399;&#20309;&#12425;&#12398;&#20986;&#21147;&#12418;&#34892;&#12431;&#12394;&#12356;&#12371;&#12392;&#12395;&#27880;&#24847;&#12290;&#12424;&#12426;&#35443;&#32048;&#12395;&#12388;&#12356;&#12390;&#12399;dbghdr()&#20013;&#12398;&#12467;&#12513;&#12531;&#12488;&#12434;
&#21442;&#29031;&#12290;
</p><p>
&#12371;&#12398;&#38306;&#25968;&#12399;&#30452;&#25509;&#21628;&#12400;&#12428;&#12427;&#12371;&#12392;&#12399;&#12394;&#12356;&#12290;DEBUG()&#12392;DEBUGADD()&#12395;&#12424;&#12387;&#12390;&#20351;&#12431;&#12428;&#12427;&#12290;
</p></div><div class="sect2" title="format_debug_text()"><div class="titlepage"><div><div><h3 class="title"><a name="id2563838"></a>format_debug_text()</h3></div></div></div><p>
&#12371;&#12428;&#12399;debug.c&#20013;&#12398;static&#12394;&#38306;&#25968;&#12391;&#12354;&#12427;&#12290;&#12371;&#12428;&#12399;&#12289;&#25913;&#34892;&#12364;&#26469;&#12427;&#12414;&#12391;&#12289;&#12496;&#12483;&#12501;&#12449;&#20013;&#12395;
&#20986;&#21147;&#12486;&#12461;&#12473;&#12488;&#12398;&#12513;&#12483;&#12475;&#12540;&#12472;&#26412;&#20307;&#12434;&#26684;&#32013;&#12377;&#12427;&#12290;&#25913;&#34892;&#12364;&#26469;&#12383;&#22580;&#21512;&#12289;Debug1()&#38306;&#25968;&#12434;&#20351;&#12387;&#12390;
&#12487;&#12496;&#12483;&#12464;&#12501;&#12449;&#12452;&#12523;&#12395;&#12496;&#12483;&#12501;&#12449;&#12364;&#26360;&#12365;&#36796;&#12414;&#12428;&#12289;&#12496;&#12483;&#12501;&#12449;&#12399;&#12522;&#12475;&#12483;&#12488;&#12373;&#12428;&#12427;&#12290;&#12371;&#12428;&#12399;&#12289;
&#12513;&#12483;&#12475;&#12540;&#12472;&#26412;&#20307;&#12398;&#21508;&#34892;&#12398;&#22987;&#12414;&#12426;&#12398;&#12452;&#12531;&#12487;&#12531;&#12488;&#12434;&#36861;&#21152;&#12377;&#12427;&#12371;&#12392;&#12364;&#20986;&#26469;&#12427;&#12424;&#12358;&#12395;&#12394;&#12426;&#12289;
&#12414;&#12383;&#12289;(syslog&#20986;&#21147;&#12364;&#12365;&#12428;&#12356;&#12395;&#12394;&#12427;)&#12381;&#12398;&#26178;&#28857;&#12391;&#34892;&#21336;&#20301;&#12395;&#20986;&#21147;&#12364;&#26360;&#12363;&#12428;&#12427;&#12424;&#12358;&#12395;&#12394;&#12427;&#12290;
</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="architecture.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="pt02.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="internals.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 3. Samba&#12450;&#12540;&#12461;&#12486;&#12463;&#12481;&#12515; </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 5. Samba&#12398;&#20869;&#37096;</td></tr></table></div></body></html>
