<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 9. RPC&#30528;&#33073;&#21487;&#33021;&#12394;&#12514;&#12472;&#12517;&#12540;&#12523;</title><link rel="stylesheet" href="../samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="SAMBA&#38283;&#30330;&#32773;&#12460;&#12452;&#12489;"><link rel="up" href="pt03.html" title="Part III. Samba&#12469;&#12502;&#12471;&#12473;&#12486;&#12512;"><link rel="prev" href="pt03.html" title="Part III. Samba&#12469;&#12502;&#12471;&#12473;&#12486;&#12512;"><link rel="next" href="vfs.html" title="Chapter 10. VFS &#12514;&#12472;&#12517;&#12540;&#12523;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 9. RPC&#30528;&#33073;&#21487;&#33021;&#12394;&#12514;&#12472;&#12517;&#12540;&#12523;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pt03.html">Prev</a> </td><th width="60%" align="center">Part III. Samba&#12469;&#12502;&#12471;&#12473;&#12486;&#12512;</th><td width="20%" align="right"> <a accesskey="n" href="vfs.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 9. RPC&#30528;&#33073;&#21487;&#33021;&#12394;&#12514;&#12472;&#12517;&#12540;&#12523;"><div class="titlepage"><div><div><h2 class="title"><a name="rpc-plugin"></a>Chapter 9. RPC&#30528;&#33073;&#21487;&#33021;&#12394;&#12514;&#12472;&#12517;&#12540;&#12523;</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Anthony</span> <span class="surname">Liguori</span></h3><div class="affiliation"><span class="orgname">IBM<br></span><div class="address"><p><code class="email">&lt;<a class="email" href="mailto:aliguor@us.ibm.com">aliguor@us.ibm.com</a>&gt;</code></p></div></div></div></div><div><div class="author"><h3 class="author"><span class="firstname">Jelmer</span> <span class="surname">Vernooij</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><code class="email">&lt;<a class="email" href="mailto:jelmer@samba.org">jelmer@samba.org</a>&gt;</code></p></div></div></div></div><div><p class="pubdate">January 2003</p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="rpc-plugin.html#id2565912">&#12399;&#12376;&#12417;&#12395;</a></span></dt><dt><span class="sect1"><a href="rpc-plugin.html#id2565931">&#27010;&#35201;</a></span></dt></dl></div><div class="sect1" title="&#12399;&#12376;&#12417;&#12395;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2565912"></a>&#12399;&#12376;&#12417;&#12395;</h2></div></div></div><p>
&#12371;&#12398;&#25991;&#26360;&#12399;&#12289;&#12393;&#12398;&#12424;&#12358;&#12395;Samba3.0&#29992;&#12398;&#26032;&#12375;&#12356;RPC&#30528;&#33073;&#21487;&#33021;&#12394;&#12514;&#12472;&#12517;&#12540;&#12523;&#27231;&#33021;&#12434;&#20351;&#12360;&#12427;&#12424;&#12358;&#12395;
&#12377;&#12427;&#12363;&#12395;&#12388;&#12356;&#12390;&#35500;&#26126;&#12375;&#12390;&#12356;&#12427;&#12290;&#12371;&#12398;&#12450;&#12540;&#12461;&#12486;&#12463;&#12481;&#12515;&#12399;&#12289;&#12513;&#12452;&#12531;&#12398;CVS&#12502;&#12521;&#12531;&#12481;&#12363;&#12425;&#20998;&#12363;&#12428;&#12390;
&#20316;&#26989;&#12373;&#12428;&#12427;&#12371;&#12392;&#12434;RPC&#12497;&#12452;&#12503;&#12395;&#12388;&#12356;&#12390;&#35377;&#21487;&#12375;&#12390;&#12356;&#12427;Samba&#12398;&#32173;&#25345;&#31649;&#29702;&#24615;&#12434;&#21521;&#19978;&#12373;&#12379;&#12427;&#12371;&#12392;&#12434;
&#20184;&#21152;&#12377;&#12427;&#12290;RPM&#12450;&#12540;&#12461;&#12486;&#12463;&#12481;&#12515;&#12399;&#12414;&#12383;&#12289;&#12469;&#12540;&#12489;&#12497;&#12540;&#12486;&#12451;&#12505;&#12531;&#12480;&#12395;&#23550;&#12375;&#12390;&#12289;&#12503;&#12521;&#12464;&#12452;&#12531;&#12434;&#36890;&#12375;&#12390;&#12289;
Samba&#12395;&#23550;&#12375;&#12390;&#27231;&#33021;&#12434;&#36861;&#21152;&#12377;&#12427;&#20107;&#12418;&#35469;&#12417;&#12390;&#12356;&#12427;&#12290;
</p></div><div class="sect1" title="&#27010;&#35201;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2565931"></a>&#27010;&#35201;</h2></div></div></div><p>
RPC&#21628;&#12403;&#20986;&#12375;&#12364;smbd&#12395;&#36865;&#12425;&#12428;&#12427;&#26178;&#12289;smbd&#12399;&#12289;&#12418;&#12375;&#12418;&#12381;&#12398;&#21628;&#12403;&#20986;&#12375;&#12434;&#20869;&#37096;&#30340;&#12395;&#20966;&#29702;&#12377;&#12427;&#26041;&#27861;&#12364;
&#28961;&#12356;&#22580;&#21512;&#12289;&#12381;&#12428;&#12434;&#20966;&#29702;&#12377;&#12427;&#12383;&#12417;&#12398;&#12289;<code class="filename">librpc_&lt;pipename&gt;.so</code>
&#12392;&#12356;&#12358;&#21517;&#21069;&#12398;&#20849;&#26377;&#12521;&#12452;&#12502;&#12521;&#12522;&#12434;&#12525;&#12540;&#12489;&#12375;&#12424;&#12358;&#12392;&#12377;&#12427;&#12290;&#20363;&#12360;&#12400;&#12289;LSA&#21628;&#12403;&#20986;&#12375;&#12399;
<code class="filename">librpc_lsass.so</code>&#12395;&#12424;&#12387;&#12390;&#20966;&#29702;&#12373;&#12428;&#12427;&#12290;&#12371;&#12428;&#12425;&#12398;&#20849;&#26377;&#12521;&#12452;&#12502;&#12521;&#12522;&#12399;&#12289;
<code class="filename">&lt;sambaroot&gt;/lib/rpc</code>&#20013;&#12395;&#37197;&#32622;&#12373;&#12428;&#12427;&#12409;&#12365;&#12391;&#12354;&#12427;&#12290;
smbd&#12399;&#27425;&#12395;&#20849;&#26377;&#12521;&#12452;&#12502;&#12521;&#12522;&#20869;&#12398;init_module&#38306;&#25968;&#12434;&#21628;&#12403;&#20986;&#12381;&#12358;&#12392;&#12377;&#12427;&#12290;&#35443;&#32048;&#12399;&#12514;&#12472;&#12517;&#12540;&#12523;&#12398;
&#31456;&#12434;&#21442;&#29031;&#12398;&#12371;&#12392;&#12290;
</p><p>
init_module&#38306;&#25968;&#20869;&#12391;&#12289;&#12521;&#12452;&#12502;&#12521;&#12522;&#12399;rpc_pipe_register_commands()&#12434;&#21628;&#12403;&#20986;&#12377;&#12409;&#12365;&#12391;&#12354;&#12427;&#12290;
&#12371;&#12398;&#38306;&#25968;&#12399;&#20197;&#19979;&#12398;&#24341;&#25968;&#12434;&#21462;&#12427;:
</p><pre class="programlisting">
NTSTATUS rpc_pipe_register_commands(int version, const char *clnt, const char *srv,
                               const struct api_struct *cmds, int size);
</pre><div class="variablelist"><dl><dt><span class="term">version</span></dt><dd><p>RPC&#12452;&#12531;&#12479;&#12501;&#12455;&#12540;&#12473;&#12398;&#12496;&#12540;&#12472;&#12519;&#12531;&#30058;&#21495;&#12290;&#12371;&#12398;&#24341;&#25968;&#12395;&#23550;&#12375;&#12390;&#12399;&#12289;
<span class="emphasis"><em>SMB_RPC_INTERFACE_VERSION</em></span>&#12392;&#12356;&#12358;&#23450;&#32681;&#12434;&#20351;&#12358;&#12371;&#12392;&#12290;</p></dd><dt><span class="term">clnt</span></dt><dd><p>&#21517;&#21069;&#20184;&#12365;&#12497;&#12452;&#12503;&#12398;&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#21517;</p></dd><dt><span class="term">srv</span></dt><dd><p>&#21517;&#21069;&#20184;&#12365;&#12497;&#12452;&#12503;&#12398;&#12469;&#12540;&#12496;&#21517;</p></dd><dt><span class="term">cmds</span></dt><dd><p>RPC ordinal&#30058;&#21495;&#12434;&#38306;&#25968;&#21628;&#12403;&#20986;&#12375;&#12395;&#12510;&#12483;&#12503;&#12377;&#12427;api&#27083;&#36896;&#20307;&#12398;&#12522;&#12473;&#12488;</p></dd><dt><span class="term">size</span></dt><dd><p>
cmd&#20013;&#12395;&#21547;&#12414;&#12428;&#12427;api_structs&#12398;&#25968;</p></dd></dl></div><p>
&#12393;&#12398;&#12424;&#12358;&#12395;&#12371;&#12398;&#12521;&#12452;&#12502;&#12521;&#12522;&#12434;&#20351;&#12358;&#12363;&#12395;&#12388;&#12356;&#12390;&#12398;&#23567;&#12373;&#12394;&#20363;&#12395;&#12388;&#12356;&#12390;&#12399;&#12289;
rpc_server/srv_reg.c &#12392; rpc_server/srv_reg_nt.c&#12434;&#21442;&#29031;&#12290;
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pt03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="pt03.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="vfs.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Part III. Samba&#12469;&#12502;&#12471;&#12473;&#12486;&#12512; </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 10. VFS &#12514;&#12472;&#12517;&#12540;&#12523;</td></tr></table></div></body></html>
