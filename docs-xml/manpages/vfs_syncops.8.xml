<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE refentry PUBLIC "-//Samba-Team//DTD DocBook V4.2-Based Variant V1.0//EN" "http://www.samba.org/samba/DTD/samba-doc">
<refentry id="vfs_syncops.8">

<refmeta>
	<refentrytitle>vfs_syncops</refentrytitle>
	<manvolnum>8</manvolnum>
	<refmiscinfo class="source">Samba</refmiscinfo>
	<refmiscinfo class="manual">システム管理ツール</refmiscinfo>
	<refmiscinfo class="version">4.1</refmiscinfo>
</refmeta>


<refnamediv>
	<refname>vfs_syncops</refname>
	<refpurpose>メタデータ操作を同期的に実行させる</refpurpose>
</refnamediv>

<refsynopsisdiv>
	<cmdsynopsis>
		<command>vfs objects = syncops</command>
	</cmdsynopsis>
</refsynopsisdiv>

<refsect1>
	<title>説明</title>

	<para>このVFSモジュールは
	<citerefentry><refentrytitle>samba</refentrytitle>
	<manvolnum>7</manvolnum></citerefentry>システムの一部である。</para>

	<para>
	  ある種のファイルシステム(いくつかなジャーナルファイルシステムなど)
	  では、電源失効後にファイルシステム中に残っていることをオペレーション
	  が保障するために、多くのメタデータ操作に対してfsync()が実行される
	  事を要求する。これは、クラスタ化されたSambaにおいて、
	  ノードフェイルオーバシステム中に参加している、いくつかのクラスタ
	  ファイルシステムにおいては特に重要である。それらのファイルシステム
	  に対して、<command>vfs_syncops</command> VFSモジュールは、それらの操作を
	  安全に実行する方法を提供する。</para>
	<para>  
	Some filesystems (even some journaled filesystems) require that a
	fsync() be performed on many meta data operations to ensure that the
	operation is guaranteed to remain in the filesystem after a power
	failure. This is particularly important for some cluster filesystems
	which are participating in a node failover system with clustered
	Samba. On those filesystems the <command>vfs_syncops</command> VFS module
	provides a way to perform those	operations safely.
	</para>

	<para>このモジュールはスタック可能である。</para>

</refsect1>

<refsect1>
	<title>設定</title>

	<para>
	Most of the performance loss with the <command>vfs_syncops</command>
	VFS module is in fsync on close(). You can disable that with
	<command>syncops:onclose = no</command> that can be set either globally
	or per share.
	</para>

	<para>
	On certain filesystems that only require the last data written to be
	fsync()'ed, you can disable the metadata synchronization of this module with
	<command>syncops:onmeta = no</command>. This option can be set either
	globally or per share.
	</para>

	<para>
	The <command>vfs_syncops</command> VFS module can also be disabled
	completely for a share with <command>syncops:disable = true</command>.
	</para>
</refsect1>

<refsect1>
	<title>使用例</title>

	<para>Add syncops functionality for [share]:</para>
<programlisting>
        <smbconfsection name="[share]"/>
	<smbconfoption name="path">/data/share</smbconfoption>
	<smbconfoption name="vfs objects">syncops</smbconfoption>
	<smbconfoption name="syncops:onclose">no</smbconfoption>
</programlisting>

</refsect1>

<refsect1>
	<title>バージョン</title>

	<para>This man page is correct for version 4.1.0 of the Samba suite.
	</para>
</refsect1>

<refsect1>
	<title>AUTHOR</title>

	<para>The original Samba software and related utilities
	were created by Andrew Tridgell. Samba is now developed
	by the Samba Team as an Open Source project similar
	to the way the Linux kernel is developed.</para>

</refsect1>

</refentry>
