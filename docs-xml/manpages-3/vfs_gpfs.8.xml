<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE refentry PUBLIC "-//Samba-Team//DTD DocBook V4.2-Based Variant V1.0//EN" "http://www.samba.org/samba/DTD/samba-doc">
<refentry id="vfs_gpfs.8">

<refmeta>
	<refentrytitle>vfs_gpfs</refentrytitle>
	<manvolnum>8</manvolnum>
	<refmiscinfo class="source">Samba</refmiscinfo>
	<refmiscinfo class="manual">システム管理ツール</refmiscinfo>
	<refmiscinfo class="version">3.3</refmiscinfo>
</refmeta>


<refnamediv>
	<refname>vfs_gpfs</refname>
	<refpurpose>acl や prealloc 機能と同様に gpfs に特化した Samba の機能拡張を行なう。</refpurpose>
</refnamediv>

<refsynopsisdiv>
	<cmdsynopsis>
		<command>vfs objects = gpfs</command>
	</cmdsynopsis>
</refsynopsisdiv>

<refsect1>
	<title>説明</title>

	<para>この VFS モジュールは
	<citerefentry><refentrytitle>samba</refentrytitle>
	<manvolnum>7</manvolnum></citerefentry> システムの一部である。</para>

	<para> <command>gpfs</command> VFS モジュールは、Samba が GPFS
	と適切に連携する上で必要となる様々な GPFS エクステンションの
モジュールのベースである。
	このモジュールはGPFSによって提供されるGPLライブラリインタフェースを使う。
	</para>

	<para>現在のところ、gpfs VFS
	モジュールは以下のエクステンションのみを提供している:
	<itemizedlist>
	<listitem><para>GPFSのために設定可能なNFSv4 ACL インタフェース </para></listitem>
	<listitem><para>GPFS 上でのカーネル oplock のサポート</para></listitem>
	<listitem><para>GPFS 上での lease サポート</para></listitem>
	</itemizedlist>
	</para>

	<para><command>注意:</command>このモジュールは POSIX ACL
	の挙動を模しているため、chown によるパーミッションの変更が可能である。
	しかし、
	Samba は現在のところ、この動作をサポートしていない。
	このモジュールによる chown を禁止するには、Samba よりも下位の
	ファイルシステム側の責任となる。

	</para>

	<para>このモジュールはスタック可能である。</para>

</refsect1>


<refsect1>
	<title>オプション</title>

	<variablelist>

		<varlistentry>

		<term>nfs4:mode = [ simple | special ]</term>
		<listitem>
		<para>
		GPFS上の特別なIDの置き換えを有効/無効にする。このパラメータはどのような方法でも
		windowsのユーザに影響を与えるべきでない。これは、Sambaに、GPFSに関連のある
		OWNER@とGROUP@(単純なuidへのマッピング)である特別なIDを設定することのみを
		確実にする。
		</para>

		<para>以下のモードがこのモジュールによって指定可能である:</para>
		<itemizedlist>
		<listitem><para><command>simple(既定値)</command> - GPFSのACE中で特別なIDを使わない</para></listitem>
		<listitem><para><command>special</command> - GPFSのACE中で特別なIDを使う</para> </listitem>
		</itemizedlist>
		</listitem>

		</varlistentry>


		<varlistentry>
		<term>nfs4:acedup = [dontcare|reject|ignore|merge]</term>
		<listitem>
		<para>
		このパラメータはGPFSのACL中で遭遇した、重複したACEをSambaがどのように取り扱うかを設定する。
		GPFSは同じIDに対して異なったbitを持つ重複したACEを許容し作成する。
		</para>

		<para>以下はそれぞれの値におけるSambaの動作である:</para>
		<itemizedlist>
		<listitem><para><command>dontcare (既定値)</command> - 重複したACEをそのまま利用する</para></listitem>
		<listitem><para><command>reject</command> - ACLの設定処理で、処理を中断し、エラーとして終了する</para></listitem>
		<listitem><para><command>ignore</command> - 2番目にマッチしたACEを無視する</para></listitem>
		<listitem><para><command>merge</command> - 2つのace.flagフィールド、及び2つのace.maskフィールドをビット演算でORを取り、2つの重複したACEを1つのACEに統合する</para></listitem>
		</itemizedlist>
		</listitem>
		</varlistentry>


		<varlistentry>
		<term>nfs4:chown = [yes|no]</term>
		<listitem>
		<para>このパラメータはファイルシステムのレイヤによって
		  サポートされる chown を有効または無効に設定する。
		  このパラメータは、あなたのシステムのセキュリティを
		  低下させるかもしれない事に注意して有効にすべきである。
		</para>
		<para>いくつかのファイルシステムでは、chown の 
		  a) 許可 b) 拒否 が可能である。
		  リスクについて考慮されたのが後者である。</para>

		<para>以下はそれぞれの値に対するSambaの動作である: </para>
		<itemizedlist>
		<listitem><para><command>yes</command> - ファイルシステム下でサポートするようなchownを有効にする。</para></listitem>
		<listitem><para><command>no (既定値)</command> - chownを無効にする</para></listitem>
		</itemizedlist>
		</listitem>
		</varlistentry>

	</variablelist>
</refsect1>

<refsect1>
	<title>使用例</title>

	<para>GPFS mount は以下のように、Samba経由でエクスポートできる:</para>

<programlisting>
        <smbconfsection name="[samba_gpfs_share]"/>
	<smbconfoption name="vfs objects">gpfs</smbconfoption>
	<smbconfoption name="path">/test/gpfs_mount</smbconfoption>
	<smbconfoption name="nfs4: mode">special</smbconfoption>
	<smbconfoption name="nfs4: acedup">merge</smbconfoption>
</programlisting>
</refsect1>

<refsect1>
	<title>警告</title>
	<para>gpfs gplライブラリは、コンパイルと実行時に<command>gpfs</command>
 VFS モジュールに必要である。
	また、このVFSモジュールは SLES 9/10 と RHEL 4.4で動作テストが行われている。</para>
</refsect1>

<refsect1>
	<title>バージョン</title>
	<para>このマニュアルページは Samba バージョン 3.0.25用(訳注:3.3?)である。</para>
</refsect1>

<refsect1>
	<title>著者</title>

	<para>オリジナルの Samba ソフトウェアと関連するユーティリティは、Andrew
	Tridgell によって作成された。現在 Samba は Samba Team に
	よって、Linuxカーネルの開発と同様のオープンソースプロジェクト
	として開発が行なわれている。</para>

	<para>GPFS VFSモジュールはVolker LendeckeとIBMの開発者によって寄贈され、作成された。</para>

	<para>このマニュアルページは、IBM FSCCチームによって作成された。</para>
</refsect1>

<refsect1>
	<title>日本語訳</title>
	<para>このマニュアルページは Samba 3.2.4 - 3.4.11 対応のものである。</para>
        <para>このドキュメントの Samba 3.2.4 - 3.4.11 対応の翻訳は
	<itemizedlist>
		<listitem><para>たかはしもとのぶ (monyo@samba.gr.jp)</para></listitem>
		<listitem><para>太田俊哉 (ribbon@samba.gr.jp)</para></listitem>
	</itemizedlist>	
        によって行なわれた。</para>
</refsect1>

</refentry>
